(function(){var require = function (file, cwd) {
    var resolved = require.resolve(file, cwd || '/');
    var mod = require.modules[resolved];
    if (!mod) throw new Error(
        'Failed to resolve module ' + file + ', tried ' + resolved
    );
    var cached = require.cache[resolved];
    var res = cached? cached.exports : mod();
    return res;
};

require.paths = [];
require.modules = {};
require.cache = {};
require.extensions = [".js",".coffee",".json"];

require._core = {
    'assert': true,
    'events': true,
    'fs': true,
    'path': true,
    'vm': true
};

require.resolve = (function () {
    return function (x, cwd) {
        if (!cwd) cwd = '/';
        
        if (require._core[x]) return x;
        var path = require.modules.path();
        cwd = path.resolve('/', cwd);
        var y = cwd || '/';
        
        if (x.match(/^(?:\.\.?\/|\/)/)) {
            var m = loadAsFileSync(path.resolve(y, x))
                || loadAsDirectorySync(path.resolve(y, x));
            if (m) return m;
        }
        
        var n = loadNodeModulesSync(x, y);
        if (n) return n;
        
        throw new Error("Cannot find module '" + x + "'");
        
        function loadAsFileSync (x) {
            x = path.normalize(x);
            if (require.modules[x]) {
                return x;
            }
            
            for (var i = 0; i < require.extensions.length; i++) {
                var ext = require.extensions[i];
                if (require.modules[x + ext]) return x + ext;
            }
        }
        
        function loadAsDirectorySync (x) {
            x = x.replace(/\/+$/, '');
            var pkgfile = path.normalize(x + '/package.json');
            if (require.modules[pkgfile]) {
                var pkg = require.modules[pkgfile]();
                var b = pkg.browserify;
                if (typeof b === 'object' && b.main) {
                    var m = loadAsFileSync(path.resolve(x, b.main));
                    if (m) return m;
                }
                else if (typeof b === 'string') {
                    var m = loadAsFileSync(path.resolve(x, b));
                    if (m) return m;
                }
                else if (pkg.main) {
                    var m = loadAsFileSync(path.resolve(x, pkg.main));
                    if (m) return m;
                }
            }
            
            return loadAsFileSync(x + '/index');
        }
        
        function loadNodeModulesSync (x, start) {
            var dirs = nodeModulesPathsSync(start);
            for (var i = 0; i < dirs.length; i++) {
                var dir = dirs[i];
                var m = loadAsFileSync(dir + '/' + x);
                if (m) return m;
                var n = loadAsDirectorySync(dir + '/' + x);
                if (n) return n;
            }
            
            var m = loadAsFileSync(x);
            if (m) return m;
        }
        
        function nodeModulesPathsSync (start) {
            var parts;
            if (start === '/') parts = [ '' ];
            else parts = path.normalize(start).split('/');
            
            var dirs = [];
            for (var i = parts.length - 1; i >= 0; i--) {
                if (parts[i] === 'node_modules') continue;
                var dir = parts.slice(0, i + 1).join('/') + '/node_modules';
                dirs.push(dir);
            }
            
            return dirs;
        }
    };
})();

require.alias = function (from, to) {
    var path = require.modules.path();
    var res = null;
    try {
        res = require.resolve(from + '/package.json', '/');
    }
    catch (err) {
        res = require.resolve(from, '/');
    }
    var basedir = path.dirname(res);
    
    var keys = (Object.keys || function (obj) {
        var res = [];
        for (var key in obj) res.push(key);
        return res;
    })(require.modules);
    
    for (var i = 0; i < keys.length; i++) {
        var key = keys[i];
        if (key.slice(0, basedir.length + 1) === basedir + '/') {
            var f = key.slice(basedir.length);
            require.modules[to + f] = require.modules[basedir + f];
        }
        else if (key === basedir) {
            require.modules[to] = require.modules[basedir];
        }
    }
};

(function () {
    var process = {};
    var global = typeof window !== 'undefined' ? window : {};
    var definedProcess = false;
    
    require.define = function (filename, fn) {
        if (!definedProcess && require.modules.__browserify_process) {
            process = require.modules.__browserify_process();
            definedProcess = true;
        }
        
        var dirname = require._core[filename]
            ? ''
            : require.modules.path().dirname(filename)
        ;
        
        var require_ = function (file) {
            var requiredModule = require(file, dirname);
            var cached = require.cache[require.resolve(file, dirname)];

            if (cached && cached.parent === null) {
                cached.parent = module_;
            }

            return requiredModule;
        };
        require_.resolve = function (name) {
            return require.resolve(name, dirname);
        };
        require_.modules = require.modules;
        require_.define = require.define;
        require_.cache = require.cache;
        var module_ = {
            id : filename,
            filename: filename,
            exports : {},
            loaded : false,
            parent: null
        };
        
        require.modules[filename] = function () {
            require.cache[filename] = module_;
            fn.call(
                module_.exports,
                require_,
                module_,
                module_.exports,
                dirname,
                filename,
                process,
                global
            );
            module_.loaded = true;
            return module_.exports;
        };
    };
})();


require.define("path",Function(['require','module','exports','__dirname','__filename','process','global'],"function filter (xs, fn) {\n    var res = [];\n    for (var i = 0; i < xs.length; i++) {\n        if (fn(xs[i], i, xs)) res.push(xs[i]);\n    }\n    return res;\n}\n\n// resolves . and .. elements in a path array with directory names there\n// must be no slashes, empty elements, or device names (c:\\) in the array\n// (so also no leading and trailing slashes - it does not distinguish\n// relative and absolute paths)\nfunction normalizeArray(parts, allowAboveRoot) {\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = parts.length; i >= 0; i--) {\n    var last = parts[i];\n    if (last == '.') {\n      parts.splice(i, 1);\n    } else if (last === '..') {\n      parts.splice(i, 1);\n      up++;\n    } else if (up) {\n      parts.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (allowAboveRoot) {\n    for (; up--; up) {\n      parts.unshift('..');\n    }\n  }\n\n  return parts;\n}\n\n// Regex to split a filename into [*, dir, basename, ext]\n// posix version\nvar splitPathRe = /^(.+\\/(?!$)|\\/)?((?:.+?)?(\\.[^.]*)?)$/;\n\n// path.resolve([from ...], to)\n// posix version\nexports.resolve = function() {\nvar resolvedPath = '',\n    resolvedAbsolute = false;\n\nfor (var i = arguments.length; i >= -1 && !resolvedAbsolute; i--) {\n  var path = (i >= 0)\n      ? arguments[i]\n      : process.cwd();\n\n  // Skip empty and invalid entries\n  if (typeof path !== 'string' || !path) {\n    continue;\n  }\n\n  resolvedPath = path + '/' + resolvedPath;\n  resolvedAbsolute = path.charAt(0) === '/';\n}\n\n// At this point the path should be resolved to a full absolute path, but\n// handle relative paths to be safe (might happen when process.cwd() fails)\n\n// Normalize the path\nresolvedPath = normalizeArray(filter(resolvedPath.split('/'), function(p) {\n    return !!p;\n  }), !resolvedAbsolute).join('/');\n\n  return ((resolvedAbsolute ? '/' : '') + resolvedPath) || '.';\n};\n\n// path.normalize(path)\n// posix version\nexports.normalize = function(path) {\nvar isAbsolute = path.charAt(0) === '/',\n    trailingSlash = path.slice(-1) === '/';\n\n// Normalize the path\npath = normalizeArray(filter(path.split('/'), function(p) {\n    return !!p;\n  }), !isAbsolute).join('/');\n\n  if (!path && !isAbsolute) {\n    path = '.';\n  }\n  if (path && trailingSlash) {\n    path += '/';\n  }\n  \n  return (isAbsolute ? '/' : '') + path;\n};\n\n\n// posix version\nexports.join = function() {\n  var paths = Array.prototype.slice.call(arguments, 0);\n  return exports.normalize(filter(paths, function(p, index) {\n    return p && typeof p === 'string';\n  }).join('/'));\n};\n\n\nexports.dirname = function(path) {\n  var dir = splitPathRe.exec(path)[1] || '';\n  var isWindows = false;\n  if (!dir) {\n    // No dirname\n    return '.';\n  } else if (dir.length === 1 ||\n      (isWindows && dir.length <= 3 && dir.charAt(1) === ':')) {\n    // It is just a slash or a drive letter with a slash\n    return dir;\n  } else {\n    // It is a full dirname, strip trailing slash\n    return dir.substring(0, dir.length - 1);\n  }\n};\n\n\nexports.basename = function(path, ext) {\n  var f = splitPathRe.exec(path)[2] || '';\n  // TODO: make this comparison case-insensitive on windows?\n  if (ext && f.substr(-1 * ext.length) === ext) {\n    f = f.substr(0, f.length - ext.length);\n  }\n  return f;\n};\n\n\nexports.extname = function(path) {\n  return splitPathRe.exec(path)[3] || '';\n};\n\n//@ sourceURL=path"
));

require.define("__browserify_process",Function(['require','module','exports','__dirname','__filename','process','global'],"var process = module.exports = {};\n\nprocess.nextTick = (function () {\n    var canSetImmediate = typeof window !== 'undefined'\n        && window.setImmediate;\n    var canPost = typeof window !== 'undefined'\n        && window.postMessage && window.addEventListener\n    ;\n\n    if (canSetImmediate) {\n        return function (f) { return window.setImmediate(f) };\n    }\n\n    if (canPost) {\n        var queue = [];\n        window.addEventListener('message', function (ev) {\n            if (ev.source === window && ev.data === 'browserify-tick') {\n                ev.stopPropagation();\n                if (queue.length > 0) {\n                    var fn = queue.shift();\n                    fn();\n                }\n            }\n        }, true);\n\n        return function nextTick(fn) {\n            queue.push(fn);\n            window.postMessage('browserify-tick', '*');\n        };\n    }\n\n    return function nextTick(fn) {\n        setTimeout(fn, 0);\n    };\n})();\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\n\nprocess.binding = function (name) {\n    if (name === 'evals') return (require)('vm')\n    else throw new Error('No such module. (Possibly not yet loaded)')\n};\n\n(function () {\n    var cwd = '/';\n    var path;\n    process.cwd = function () { return cwd };\n    process.chdir = function (dir) {\n        if (!path) path = require('path');\n        cwd = path.resolve(dir, cwd);\n    };\n})();\n\n//@ sourceURL=__browserify_process"
));

require.define("/lib/vendor/esl/lib/easeljs.js",Function(['require','module','exports','__dirname','__filename','process','global'],"module.exports = null;\n\n(function() {\n/*\n* EaselJS\n* Visit http://createjs.com/ for documentation, updates and examples.\n*\n* Copyright (c) 2011 gskinner.com, inc.\n*\n* Distributed under the terms of the MIT license.\n* http://www.opensource.org/licenses/mit-license.html\n*\n* This notice shall be included in all copies or substantial portions of the Software.\n*/\nvar createjs = module.exports = this.createjs = {};\n(function(){var c=function(){throw\"UID cannot be instantiated\";};c._nextID=0;c.get=function(){return c._nextID++};createjs.UID=c})();this.createjs=this.createjs||{};\n(function(){var c=function(){this.initialize()},b=c.prototype;c.initialize=function(a){a.addEventListener=b.addEventListener;a.removeEventListener=b.removeEventListener;a.removeAllEventListeners=b.removeAllEventListeners;a.hasEventListener=b.hasEventListener;a.dispatchEvent=b.dispatchEvent};b._listeners=null;b.initialize=function(){};b.addEventListener=function(a,m){var b=this._listeners;b||(b=this._listeners={});var d=b[a];d?this.removeEventListener(a,m):d=b[a]=[];d.push(m);return m};b.removeEventListener=\nfunction(a,m){var b=this._listeners;if(b){var d=b[a];if(d)for(var e=0,c=d.length;e<c;e++)if(d[e]==m){1==c?delete b[a]:d.splice(e,1);break}}};b.removeAllEventListeners=function(a){a?this._listeners&&delete this._listeners[a]:this._listeners=null};b.dispatchEvent=function(a,m){var b=!1,d=this._listeners;if(a&&d){\"string\"==typeof a&&(a={type:a});a.target=m||this;d=d[a.type];if(!d)return b;for(var d=d.slice(),e=0,c=d.length;e<c;e++){var g=d[e];g instanceof Function?b=b||g.apply(null,[a]):g.handleEvent&&\n(b=b||g.handleEvent(a))}}return!!b};b.hasEventListener=function(a){var m=this._listeners;return!(!m||!m[a])};b.toString=function(){return\"[EventDispatcher]\"};createjs.EventDispatcher=c})();this.createjs=this.createjs||{};\n(function(){var c=function(){throw\"Ticker cannot be instantiated.\";};c.useRAF=!1;c.addEventListener=null;c.removeEventListener=null;c.removeAllEventListeners=null;c.dispatchEvent=null;c.hasEventListener=null;c._listeners=null;createjs.EventDispatcher.initialize(c);c._listeners=null;c._pauseable=null;c._paused=!1;c._inited=!1;c._startTime=0;c._pausedTime=0;c._ticks=0;c._pausedTicks=0;c._interval=50;c._lastTime=0;c._times=null;c._tickTimes=null;c._rafActive=!1;c._timeoutID=null;c.addListener=function(a,\nm){null!=a&&(c.removeListener(a),c._pauseable[c._listeners.length]=null==m?!0:m,c._listeners.push(a))};c.init=function(){c._inited=!0;c._times=[];c._tickTimes=[];c._pauseable=[];c._listeners=[];c._times.push(c._lastTime=c._startTime=c._getTime());c.setInterval(c._interval)};c.removeListener=function(a){var m=c._listeners;m&&(a=m.indexOf(a),-1!=a&&(m.splice(a,1),c._pauseable.splice(a,1)))};c.removeAllListeners=function(){c._listeners=[];c._pauseable=[]};c.setInterval=function(a){c._interval=a;c._inited&&\nc._setupTick()};c.getInterval=function(){return c._interval};c.setFPS=function(a){c.setInterval(1E3/a)};c.getFPS=function(){return 1E3/c._interval};c.getMeasuredFPS=function(a){if(2>c._times.length)return-1;null==a&&(a=c.getFPS()|0);a=Math.min(c._times.length-1,a);return 1E3/((c._times[0]-c._times[a])/a)};c.setPaused=function(a){c._paused=a};c.getPaused=function(){return c._paused};c.getTime=function(a){return c._getTime()-c._startTime-(a?c._pausedTime:0)};c.getTicks=function(a){return c._ticks-(a?\nc._pausedTicks:0)};c._handleAF=function(){c._rafActive=!1;c._setupTick();c._getTime()-c._lastTime>=0.97*(c._interval-1)&&c._tick()};c._handleTimeout=function(){c.timeoutID=null;c._setupTick();c._tick()};c._setupTick=function(){if(!(c._rafActive||null!=c.timeoutID)){if(c.useRAF){var a=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(a){a(c._handleAF);c._rafActive=!0;return}}c.timeoutID=\nsetTimeout(c._handleTimeout,c._interval)}};c._tick=function(){var a=c._getTime();c._ticks++;var m=a-c._lastTime,b=c._paused;b&&(c._pausedTicks++,c._pausedTime+=m);c._lastTime=a;for(var d=c._pauseable,e=c._listeners.slice(),f=e?e.length:0,g=0;g<f;g++){var j=e[g];null==j||b&&d[g]||(j.tick?j.tick(m,b):j instanceof Function&&j(m,b))}c.dispatchEvent({type:\"tick\",paused:b,delta:m,time:a,runTime:a-c._pausedTime});for(c._tickTimes.unshift(c._getTime()-a);100<c._tickTimes.length;)c._tickTimes.pop();for(c._times.unshift(a);100<\nc._times.length;)c._times.pop()};var b=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);c._getTime=function(){return b&&b.call(performance)||(new Date).getTime()};c.init();createjs.Ticker=c})();this.createjs=this.createjs||{};\n(function(){var c=function(a,m,b,d,e,c,g,j,k){this.initialize(a,m,b,d,e,c,g,j,k)},b=c.prototype;b.stageX=0;b.stageY=0;b.rawX=0;b.rawY=0;b.type=null;b.nativeEvent=null;b.onMouseMove=null;b.onMouseUp=null;b.target=null;b.pointerID=0;b.primary=!1;b.addEventListener=null;b.removeEventListener=null;b.removeAllEventListeners=null;b.dispatchEvent=null;b.hasEventListener=null;b._listeners=null;createjs.EventDispatcher.initialize(b);b.initialize=function(a,m,b,d,e,c,g,j,k){this.type=a;this.stageX=m;this.stageY=\nb;this.target=d;this.nativeEvent=e;this.pointerID=c;this.primary=g;this.rawX=null==j?m:j;this.rawY=null==k?b:k};b.clone=function(){return new c(this.type,this.stageX,this.stageY,this.target,this.nativeEvent,this.pointerID,this.primary,this.rawX,this.rawY)};b.toString=function(){return\"[MouseEvent (type=\"+this.type+\" stageX=\"+this.stageX+\" stageY=\"+this.stageY+\")]\"};createjs.MouseEvent=c})();this.createjs=this.createjs||{};\n(function(){var c=function(a,m,b,d,e,c){this.initialize(a,m,b,d,e,c)},b=c.prototype;c.identity=null;c.DEG_TO_RAD=Math.PI/180;b.a=1;b.b=0;b.c=0;b.d=1;b.tx=0;b.ty=0;b.alpha=1;b.shadow=null;b.compositeOperation=null;b.initialize=function(a,b,h,d,e,c){null!=a&&(this.a=a);this.b=b||0;this.c=h||0;null!=d&&(this.d=d);this.tx=e||0;this.ty=c||0;return this};b.prepend=function(a,b,h,d,e,c){var g=this.tx;if(1!=a||0!=b||0!=h||1!=d){var j=this.a,k=this.c;this.a=j*a+this.b*h;this.b=j*b+this.b*d;this.c=k*a+this.d*\nh;this.d=k*b+this.d*d}this.tx=g*a+this.ty*h+e;this.ty=g*b+this.ty*d+c;return this};b.append=function(a,b,h,d,e,c){var g=this.a,j=this.b,k=this.c,l=this.d;this.a=a*g+b*k;this.b=a*j+b*l;this.c=h*g+d*k;this.d=h*j+d*l;this.tx=e*g+c*k+this.tx;this.ty=e*j+c*l+this.ty;return this};b.prependMatrix=function(a){this.prepend(a.a,a.b,a.c,a.d,a.tx,a.ty);this.prependProperties(a.alpha,a.shadow,a.compositeOperation);return this};b.appendMatrix=function(a){this.append(a.a,a.b,a.c,a.d,a.tx,a.ty);this.appendProperties(a.alpha,\na.shadow,a.compositeOperation);return this};b.prependTransform=function(a,b,h,d,e,f,g,j,k){if(e%360){var l=e*c.DEG_TO_RAD;e=Math.cos(l);l=Math.sin(l)}else e=1,l=0;if(j||k)this.tx-=j,this.ty-=k;f||g?(f*=c.DEG_TO_RAD,g*=c.DEG_TO_RAD,this.prepend(e*h,l*h,-l*d,e*d,0,0),this.prepend(Math.cos(g),Math.sin(g),-Math.sin(f),Math.cos(f),a,b)):this.prepend(e*h,l*h,-l*d,e*d,a,b);return this};b.appendTransform=function(a,b,h,d,e,f,g,j,k){if(e%360){var l=e*c.DEG_TO_RAD;e=Math.cos(l);l=Math.sin(l)}else e=1,l=0;f||\ng?(f*=c.DEG_TO_RAD,g*=c.DEG_TO_RAD,this.append(Math.cos(g),Math.sin(g),-Math.sin(f),Math.cos(f),a,b),this.append(e*h,l*h,-l*d,e*d,0,0)):this.append(e*h,l*h,-l*d,e*d,a,b);if(j||k)this.tx-=j*this.a+k*this.c,this.ty-=j*this.b+k*this.d;return this};b.rotate=function(a){var b=Math.cos(a);a=Math.sin(a);var h=this.a,d=this.c,c=this.tx;this.a=h*b-this.b*a;this.b=h*a+this.b*b;this.c=d*b-this.d*a;this.d=d*a+this.d*b;this.tx=c*b-this.ty*a;this.ty=c*a+this.ty*b;return this};b.skew=function(a,b){a*=c.DEG_TO_RAD;\nb*=c.DEG_TO_RAD;this.append(Math.cos(b),Math.sin(b),-Math.sin(a),Math.cos(a),0,0);return this};b.scale=function(a,b){this.a*=a;this.d*=b;this.tx*=a;this.ty*=b;return this};b.translate=function(a,b){this.tx+=a;this.ty+=b;return this};b.identity=function(){this.alpha=this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;this.shadow=this.compositeOperation=null;return this};b.invert=function(){var a=this.a,b=this.b,h=this.c,d=this.d,c=this.tx,f=a*d-b*h;this.a=d/f;this.b=-b/f;this.c=-h/f;this.d=a/f;this.tx=\n(h*this.ty-d*c)/f;this.ty=-(a*this.ty-b*c)/f;return this};b.isIdentity=function(){return 0==this.tx&&0==this.ty&&1==this.a&&0==this.b&&0==this.c&&1==this.d};b.decompose=function(a){null==a&&(a={});a.x=this.tx;a.y=this.ty;a.scaleX=Math.sqrt(this.a*this.a+this.b*this.b);a.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var b=Math.atan2(-this.c,this.d),h=Math.atan2(this.b,this.a);b==h?(a.rotation=h/c.DEG_TO_RAD,0>this.a&&0<=this.d&&(a.rotation+=0>=a.rotation?180:-180),a.skewX=a.skewY=0):(a.skewX=b/c.DEG_TO_RAD,\na.skewY=h/c.DEG_TO_RAD);return a};b.reinitialize=function(a,b,h,d,c,f,g,j,k){this.initialize(a,b,h,d,c,f);this.alpha=g||1;this.shadow=j;this.compositeOperation=k;return this};b.appendProperties=function(a,b,h){this.alpha*=a;this.shadow=b||this.shadow;this.compositeOperation=h||this.compositeOperation;return this};b.prependProperties=function(a,b,h){this.alpha*=a;this.shadow=this.shadow||b;this.compositeOperation=this.compositeOperation||h;return this};b.clone=function(){var a=new c(this.a,this.b,\nthis.c,this.d,this.tx,this.ty);a.shadow=this.shadow;a.alpha=this.alpha;a.compositeOperation=this.compositeOperation;return a};b.toString=function(){return\"[Matrix2D (a=\"+this.a+\" b=\"+this.b+\" c=\"+this.c+\" d=\"+this.d+\" tx=\"+this.tx+\" ty=\"+this.ty+\")]\"};c.identity=new c(1,0,0,1,0,0);createjs.Matrix2D=c})();this.createjs=this.createjs||{};(function(){var c=function(a,b){this.initialize(a,b)},b=c.prototype;b.x=0;b.y=0;b.initialize=function(a,b){this.x=null==a?0:a;this.y=null==b?0:b};b.clone=function(){return new c(this.x,this.y)};b.toString=function(){return\"[Point (x=\"+this.x+\" y=\"+this.y+\")]\"};createjs.Point=c})();this.createjs=this.createjs||{};(function(){var c=function(a,b,h,d){this.initialize(a,b,h,d)},b=c.prototype;b.x=0;b.y=0;b.width=0;b.height=0;b.initialize=function(a,b,h,d){this.x=null==a?0:a;this.y=null==b?0:b;this.width=null==h?0:h;this.height=null==d?0:d};b.clone=function(){return new c(this.x,this.y,this.width,this.height)};b.toString=function(){return\"[Rectangle (x=\"+this.x+\" y=\"+this.y+\" width=\"+this.width+\" height=\"+this.height+\")]\"};createjs.Rectangle=c})();this.createjs=this.createjs||{};\n(function(){var c=function(a,b,h,d,c,f,g){this.initialize(a,b,h,d,c,f,g)},b=c.prototype;b.target=null;b.overLabel=null;b.outLabel=null;b.downLabel=null;b.play=!1;b._isPressed=!1;b.initialize=function(a,b,h,d,c,f,g){a.addEventListener&&(this.target=a,a.cursor=\"pointer\",this.overLabel=null==h?\"over\":h,this.outLabel=null==b?\"out\":b,this.downLabel=null==d?\"down\":d,this.play=c,this.setEnabled(!0),this.handleEvent({}),f&&(g&&(f.actionsEnabled=!1,f.gotoAndStop&&f.gotoAndStop(g)),a.hitArea=f))};b.setEnabled=\nfunction(a){var b=this.target;a?(b.addEventListener(\"mouseover\",this),b.addEventListener(\"mouseout\",this),b.addEventListener(\"mousedown\",this),b.addEventListener(\"click\",this)):(b.removeEventListener(\"mouseover\",this),b.removeEventListener(\"mouseout\",this),b.removeEventListener(\"mousedown\",this),b.removeEventListener(\"click\",this))};b.toString=function(){return\"[ButtonHelper]\"};b.handleEvent=function(a){var b=\"mouseover\"==a.type&&!this._isPressed||\"click\"==a.type?this.overLabel:\"mouseover\"==a.type&&\nthis._isPressed||\"mousedown\"==a.type?this.downLabel:this._isPressed?this.overLabel:this.outLabel;if(\"mousedown\"==a.type)this._isPressed=!0,a.addEventListener(\"mouseup\",this);else if(\"mouseup\"==a.type){this._isPressed=!1;return}a=this.target;this.play?a.gotoAndPlay&&a.gotoAndPlay(b):a.gotoAndStop&&a.gotoAndStop(b)};createjs.ButtonHelper=c})();this.createjs=this.createjs||{};(function(){var c=function(a,b,h,d){this.initialize(a,b,h,d)},b=c.prototype;c.identity=null;b.color=null;b.offsetX=0;b.offsetY=0;b.blur=0;b.initialize=function(a,b,h,d){this.color=a;this.offsetX=b;this.offsetY=h;this.blur=d};b.toString=function(){return\"[Shadow]\"};b.clone=function(){return new c(this.color,this.offsetX,this.offsetY,this.blur)};c.identity=new c(\"transparent\",0,0,0);createjs.Shadow=c})();this.createjs=this.createjs||{};\n(function(){var c=function(a){this.initialize(a)},b=c.prototype;b.complete=!0;b.onComplete=null;b.addEventListener=null;b.removeEventListener=null;b.removeAllEventListeners=null;b.dispatchEvent=null;b.hasEventListener=null;b._listeners=null;createjs.EventDispatcher.initialize(b);b._animations=null;b._frames=null;b._images=null;b._data=null;b._loadCount=0;b._frameHeight=0;b._frameWidth=0;b._numFrames=0;b._regX=0;b._regY=0;b.initialize=function(a){var b,h,d;if(null!=a){if(a.images&&0<(h=a.images.length)){d=\nthis._images=[];for(b=0;b<h;b++){var c=a.images[b];if(\"string\"==typeof c){var f=c,c=new Image;c.src=f}d.push(c);!c.getContext&&!c.complete&&(this._loadCount++,this.complete=!1,function(a){c.onload=function(){a._handleImageLoad()}}(this))}}if(null!=a.frames)if(a.frames instanceof Array){this._frames=[];d=a.frames;b=0;for(h=d.length;b<h;b++)f=d[b],this._frames.push({image:this._images[f[4]?f[4]:0],rect:new createjs.Rectangle(f[0],f[1],f[2],f[3]),regX:f[5]||0,regY:f[6]||0})}else h=a.frames,this._frameWidth=\nh.width,this._frameHeight=h.height,this._regX=h.regX||0,this._regY=h.regY||0,this._numFrames=h.count,0==this._loadCount&&this._calculateFrames();if(null!=(h=a.animations)){this._animations=[];this._data={};for(var g in h){a={name:g};f=h[g];if(\"number\"==typeof f)d=a.frames=[f];else if(f instanceof Array){a.frequency=f[3];a.next=f[2];d=a.frames=[];for(b=f[0];b<=f[1];b++)d.push(b)}else a.frequency=f.frequency,a.next=f.next,b=f.frames,d=a.frames=\"number\"==typeof b?[b]:b.slice(0);a.next=2>d.length||!1==\na.next?null:null==a.next||!0==a.next?g:a.next;a.frequency||(a.frequency=1);this._animations.push(g);this._data[g]=a}}}};b.getNumFrames=function(a){if(null==a)return this._frames?this._frames.length:this._numFrames;a=this._data[a];return null==a?0:a.frames.length};b.getAnimations=function(){return this._animations.slice(0)};b.getAnimation=function(a){return this._data[a]};b.getFrame=function(a){var b;return this.complete&&this._frames&&(b=this._frames[a])?b:null};b.getFrameBounds=function(a){return(a=\nthis.getFrame(a))?new createjs.Rectangle(-a.regX,-a.regY,a.rect.width,a.rect.height):null};b.toString=function(){return\"[SpriteSheet]\"};b.clone=function(){var a=new c;a.complete=this.complete;a._animations=this._animations;a._frames=this._frames;a._images=this._images;a._data=this._data;a._frameHeight=this._frameHeight;a._frameWidth=this._frameWidth;a._numFrames=this._numFrames;a._loadCount=this._loadCount;return a};b._handleImageLoad=function(){0==--this._loadCount&&(this._calculateFrames(),this.complete=\n!0,this.onComplete&&this.onComplete(),this.dispatchEvent(\"complete\"))};b._calculateFrames=function(){if(!(this._frames||0==this._frameWidth)){this._frames=[];for(var a=0,b=this._frameWidth,h=this._frameHeight,d=0,c=this._images;d<c.length;d++){for(var f=c[d],g=(f.width+1)/b|0,j=(f.height+1)/h|0,j=0<this._numFrames?Math.min(this._numFrames-a,g*j):g*j,k=0;k<j;k++)this._frames.push({image:f,rect:new createjs.Rectangle(k%g*b,(k/g|0)*h,b,h),regX:this._regX,regY:this._regY});a+=j}this._numFrames=a}};createjs.SpriteSheet=\nc})();this.createjs=this.createjs||{};\n(function(){function c(a,b,d){this.f=a;this.params=b;this.path=null==d?!0:d}c.prototype.exec=function(a){this.f.apply(a,this.params)};var b=function(){this.initialize()},a=b.prototype;b.getRGB=function(a,b,d,c){null!=a&&null==d&&(c=b,d=a&255,b=a>>8&255,a=a>>16&255);return null==c?\"rgb(\"+a+\",\"+b+\",\"+d+\")\":\"rgba(\"+a+\",\"+b+\",\"+d+\",\"+c+\")\"};b.getHSL=function(a,b,d,c){return null==c?\"hsl(\"+a%360+\",\"+b+\"%,\"+d+\"%)\":\"hsla(\"+a%360+\",\"+b+\"%,\"+d+\"%,\"+c+\")\"};b.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,\nK:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,\"0\":52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,\"+\":62,\"/\":63};b.STROKE_CAPS_MAP=[\"butt\",\"round\",\"square\"];b.STROKE_JOINTS_MAP=[\"miter\",\"round\",\"bevel\"];b._ctx=(createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\")).getContext(\"2d\");b.beginCmd=new c(b._ctx.beginPath,\n[],!1);b.fillCmd=new c(b._ctx.fill,[],!1);b.strokeCmd=new c(b._ctx.stroke,[],!1);a._strokeInstructions=null;a._strokeStyleInstructions=null;a._fillInstructions=null;a._instructions=null;a._oldInstructions=null;a._activeInstructions=null;a._active=!1;a._dirty=!1;a.initialize=function(){this.clear();this._ctx=b._ctx};a.isEmpty=function(){return!(this._instructions.length||this._oldInstructions.length||this._activeInstructions.length)};a.draw=function(a){this._dirty&&this._updateInstructions();for(var b=\nthis._instructions,d=0,c=b.length;d<c;d++)b[d].exec(a)};a.drawAsPath=function(a){this._dirty&&this._updateInstructions();for(var b,d=this._instructions,c=0,f=d.length;c<f;c++)((b=d[c]).path||0==c)&&b.exec(a)};a.moveTo=function(a,b){this._activeInstructions.push(new c(this._ctx.moveTo,[a,b]));return this};a.lineTo=function(a,b){this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.lineTo,[a,b]));return this};a.arcTo=function(a,b,d,e,f){this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.arcTo,\n[a,b,d,e,f]));return this};a.arc=function(a,b,d,e,f,g){this._dirty=this._active=!0;null==g&&(g=!1);this._activeInstructions.push(new c(this._ctx.arc,[a,b,d,e,f,g]));return this};a.quadraticCurveTo=function(a,b,d,e){this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.quadraticCurveTo,[a,b,d,e]));return this};a.bezierCurveTo=function(a,b,d,e,f,g){this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.bezierCurveTo,[a,b,d,e,f,g]));return this};a.rect=function(a,\nb,d,e){this._dirty=this._active=!0;this._activeInstructions.push(new c(this._ctx.rect,[a,b,d,e]));return this};a.closePath=function(){this._active&&(this._dirty=!0,this._activeInstructions.push(new c(this._ctx.closePath,[])));return this};a.clear=function(){this._instructions=[];this._oldInstructions=[];this._activeInstructions=[];this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=null;this._active=this._dirty=!1;return this};a.beginFill=function(a){this._active&&this._newPath();\nthis._fillInstructions=a?[new c(this._setProp,[\"fillStyle\",a],!1)]:null;return this};a.beginLinearGradientFill=function(a,b,d,e,f,g){this._active&&this._newPath();d=this._ctx.createLinearGradient(d,e,f,g);e=0;for(f=a.length;e<f;e++)d.addColorStop(b[e],a[e]);this._fillInstructions=[new c(this._setProp,[\"fillStyle\",d],!1)];return this};a.beginRadialGradientFill=function(a,b,d,e,f,g,j,k){this._active&&this._newPath();d=this._ctx.createRadialGradient(d,e,f,g,j,k);e=0;for(f=a.length;e<f;e++)d.addColorStop(b[e],\na[e]);this._fillInstructions=[new c(this._setProp,[\"fillStyle\",d],!1)];return this};a.beginBitmapFill=function(a,b){this._active&&this._newPath();var d=this._ctx.createPattern(a,b||\"\");this._fillInstructions=[new c(this._setProp,[\"fillStyle\",d],!1)];return this};a.endFill=function(){return this.beginFill()};a.setStrokeStyle=function(a,h,d,e){this._active&&this._newPath();this._strokeStyleInstructions=[new c(this._setProp,[\"lineWidth\",null==a?\"1\":a],!1),new c(this._setProp,[\"lineCap\",null==h?\"butt\":\nisNaN(h)?h:b.STROKE_CAPS_MAP[h]],!1),new c(this._setProp,[\"lineJoin\",null==d?\"miter\":isNaN(d)?d:b.STROKE_JOINTS_MAP[d]],!1),new c(this._setProp,[\"miterLimit\",null==e?\"10\":e],!1)];return this};a.beginStroke=function(a){this._active&&this._newPath();this._strokeInstructions=a?[new c(this._setProp,[\"strokeStyle\",a],!1)]:null;return this};a.beginLinearGradientStroke=function(a,b,d,e,f,g){this._active&&this._newPath();d=this._ctx.createLinearGradient(d,e,f,g);e=0;for(f=a.length;e<f;e++)d.addColorStop(b[e],\na[e]);this._strokeInstructions=[new c(this._setProp,[\"strokeStyle\",d],!1)];return this};a.beginRadialGradientStroke=function(a,b,d,e,f,g,j,k){this._active&&this._newPath();d=this._ctx.createRadialGradient(d,e,f,g,j,k);e=0;for(f=a.length;e<f;e++)d.addColorStop(b[e],a[e]);this._strokeInstructions=[new c(this._setProp,[\"strokeStyle\",d],!1)];return this};a.beginBitmapStroke=function(a,b){this._active&&this._newPath();var d=this._ctx.createPattern(a,b||\"\");this._strokeInstructions=[new c(this._setProp,\n[\"strokeStyle\",d],!1)];return this};a.endStroke=function(){this.beginStroke();return this};a.curveTo=a.quadraticCurveTo;a.drawRect=a.rect;a.drawRoundRect=function(a,b,d,c,f){this.drawRoundRectComplex(a,b,d,c,f,f,f,f);return this};a.drawRoundRectComplex=function(a,b,d,e,f,g,j,k){var l=(d<e?d:e)/2,n=0,p=0,q=0,s=0;0>f&&(f*=n=-1);f>l&&(f=l);0>g&&(g*=p=-1);g>l&&(g=l);0>j&&(j*=q=-1);j>l&&(j=l);0>k&&(k*=s=-1);k>l&&(k=l);this._dirty=this._active=!0;var l=this._ctx.arcTo,r=this._ctx.lineTo;this._activeInstructions.push(new c(this._ctx.moveTo,\n[a+d-g,b]),new c(l,[a+d+g*p,b-g*p,a+d,b+g,g]),new c(r,[a+d,b+e-j]),new c(l,[a+d+j*q,b+e+j*q,a+d-j,b+e,j]),new c(r,[a+k,b+e]),new c(l,[a-k*s,b+e+k*s,a,b+e-k,k]),new c(r,[a,b+f]),new c(l,[a-f*n,b-f*n,a+f,b,f]),new c(this._ctx.closePath));return this};a.drawCircle=function(a,b,d){this.arc(a,b,d,0,2*Math.PI);return this};a.drawEllipse=function(a,b,d,e){this._dirty=this._active=!0;var f=0.5522848*(d/2),g=0.5522848*(e/2),j=a+d,k=b+e;d=a+d/2;e=b+e/2;this._activeInstructions.push(new c(this._ctx.moveTo,[a,\ne]),new c(this._ctx.bezierCurveTo,[a,e-g,d-f,b,d,b]),new c(this._ctx.bezierCurveTo,[d+f,b,j,e-g,j,e]),new c(this._ctx.bezierCurveTo,[j,e+g,d+f,k,d,k]),new c(this._ctx.bezierCurveTo,[d-f,k,a,e+g,a,e]));return this};a.drawPolyStar=function(a,b,d,e,f,g){this._dirty=this._active=!0;null==f&&(f=0);f=1-f;g=null==g?0:g/(180/Math.PI);var j=Math.PI/e;this._activeInstructions.push(new c(this._ctx.moveTo,[a+Math.cos(g)*d,b+Math.sin(g)*d]));for(var k=0;k<e;k++)g+=j,1!=f&&this._activeInstructions.push(new c(this._ctx.lineTo,\n[a+Math.cos(g)*d*f,b+Math.sin(g)*d*f])),g+=j,this._activeInstructions.push(new c(this._ctx.lineTo,[a+Math.cos(g)*d,b+Math.sin(g)*d]));return this};a.decodePath=function(a){for(var h=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo,this.closePath],d=[2,2,4,6,0],c=0,f=a.length,g=[],j=0,k=0,l=b.BASE_64;c<f;){var n=a.charAt(c),p=l[n],q=p>>3,s=h[q];if(!s||p&3)throw\"bad path data (@\"+c+\"): \"+n;n=d[q];q||(j=k=0);g.length=0;c++;p=(p>>2&1)+2;for(q=0;q<n;q++){var r=l[a.charAt(c)],u=r>>5?-1:\n1,r=(r&31)<<6|l[a.charAt(c+1)];3==p&&(r=r<<6|l[a.charAt(c+2)]);r=u*r/10;q%2?j=r+=j:k=r+=k;g[q]=r;c+=p}s.apply(this,g)}return this};a.clone=function(){var a=new b;a._instructions=this._instructions.slice();a._activeInstructions=this._activeInstructions.slice();a._oldInstructions=this._oldInstructions.slice();this._fillInstructions&&(a._fillInstructions=this._fillInstructions.slice());this._strokeInstructions&&(a._strokeInstructions=this._strokeInstructions.slice());this._strokeStyleInstructions&&(a._strokeStyleInstructions=\nthis._strokeStyleInstructions.slice());a._active=this._active;a._dirty=this._dirty;return a};a.toString=function(){return\"[Graphics]\"};a.mt=a.moveTo;a.lt=a.lineTo;a.at=a.arcTo;a.bt=a.bezierCurveTo;a.qt=a.quadraticCurveTo;a.a=a.arc;a.r=a.rect;a.cp=a.closePath;a.c=a.clear;a.f=a.beginFill;a.lf=a.beginLinearGradientFill;a.rf=a.beginRadialGradientFill;a.bf=a.beginBitmapFill;a.ef=a.endFill;a.ss=a.setStrokeStyle;a.s=a.beginStroke;a.ls=a.beginLinearGradientStroke;a.rs=a.beginRadialGradientStroke;a.bs=a.beginBitmapStroke;\na.es=a.endStroke;a.dr=a.drawRect;a.rr=a.drawRoundRect;a.rc=a.drawRoundRectComplex;a.dc=a.drawCircle;a.de=a.drawEllipse;a.dp=a.drawPolyStar;a.p=a.decodePath;a._updateInstructions=function(){this._instructions=this._oldInstructions.slice();this._instructions.push(b.beginCmd);this._fillInstructions&&this._instructions.push.apply(this._instructions,this._fillInstructions);this._strokeInstructions&&(this._instructions.push.apply(this._instructions,this._strokeInstructions),this._strokeStyleInstructions&&\nthis._instructions.push.apply(this._instructions,this._strokeStyleInstructions));this._instructions.push.apply(this._instructions,this._activeInstructions);this._fillInstructions&&this._instructions.push(b.fillCmd);this._strokeInstructions&&this._instructions.push(b.strokeCmd)};a._newPath=function(){this._dirty&&this._updateInstructions();this._oldInstructions=this._instructions;this._activeInstructions=[];this._active=this._dirty=!1};a._setProp=function(a,b){this[a]=b};createjs.Graphics=b})();this.createjs=this.createjs||{};\n(function(){var c=function(){this.initialize()},b=c.prototype;c.suppressCrossDomainErrors=!1;c._hitTestCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\");c._hitTestCanvas.width=c._hitTestCanvas.height=1;c._hitTestContext=c._hitTestCanvas.getContext(\"2d\");c._nextCacheID=1;b.alpha=1;b.cacheCanvas=null;b.id=-1;b.mouseEnabled=!0;b.name=null;b.parent=null;b.regX=0;b.regY=0;b.rotation=0;b.scaleX=1;b.scaleY=1;b.skewX=0;b.skewY=0;b.shadow=null;b.visible=!0;b.x=0;b.y=0;b.compositeOperation=\nnull;b.snapToPixel=!1;b.onPress=null;b.onClick=null;b.onDoubleClick=null;b.onMouseOver=null;b.onMouseOut=null;b.onTick=null;b.filters=null;b.cacheID=0;b.mask=null;b.hitArea=null;b.cursor=null;b.addEventListener=null;b.removeEventListener=null;b.removeAllEventListeners=null;b.dispatchEvent=null;b.hasEventListener=null;b._listeners=null;createjs.EventDispatcher.initialize(b);b._cacheOffsetX=0;b._cacheOffsetY=0;b._cacheScale=1;b._cacheDataURLID=0;b._cacheDataURL=null;b._matrix=null;b.initialize=function(){this.id=\ncreatejs.UID.get();this._matrix=new createjs.Matrix2D};b.isVisible=function(){return!(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY))};b.draw=function(a,b){var c=this.cacheCanvas;if(b||!c)return!1;var d=this._cacheScale;a.drawImage(c,this._cacheOffsetX,this._cacheOffsetY,c.width/d,c.height/d);return!0};b.updateContext=function(a){var b,c=this.mask;c&&(c.graphics&&!c.graphics.isEmpty())&&(b=c.getMatrix(c._matrix),a.transform(b.a,b.b,b.c,b.d,b.tx,b.ty),c.graphics.drawAsPath(a),a.clip(),\nb.invert(),a.transform(b.a,b.b,b.c,b.d,b.tx,b.ty));b=this._matrix.identity().appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY);createjs.Stage._snapToPixelEnabled&&this.snapToPixel?a.transform(b.a,b.b,b.c,b.d,b.tx+0.5|0,b.ty+0.5|0):a.transform(b.a,b.b,b.c,b.d,b.tx,b.ty);a.globalAlpha*=this.alpha;this.compositeOperation&&(a.globalCompositeOperation=this.compositeOperation);this.shadow&&this._applyShadow(a,this.shadow)};b.cache=function(a,\nb,c,d,e){e=e||1;this.cacheCanvas||(this.cacheCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"));this.cacheCanvas.width=Math.ceil(c*e);this.cacheCanvas.height=Math.ceil(d*e);this._cacheOffsetX=a;this._cacheOffsetY=b;this._cacheScale=e||1;this.updateCache()};b.updateCache=function(a){var b=this.cacheCanvas,h=this._cacheScale,d=this._cacheOffsetX*h,e=this._cacheOffsetY*h;if(!b)throw\"cache() must be called before updateCache()\";var f=b.getContext(\"2d\");f.save();a||\nf.clearRect(0,0,b.width,b.height);f.globalCompositeOperation=a;f.setTransform(h,0,0,h,-d,-e);this.draw(f,!0);this._applyFilters();f.restore();this.cacheID=c._nextCacheID++};b.uncache=function(){this._cacheDataURL=this.cacheCanvas=null;this.cacheID=this._cacheOffsetX=this._cacheOffsetY=0;this._cacheScale=1};b.getCacheDataURL=function(){if(!this.cacheCanvas)return null;this.cacheID!=this._cacheDataURLID&&(this._cacheDataURL=this.cacheCanvas.toDataURL());return this._cacheDataURL};b.getStage=function(){for(var a=\nthis;a.parent;)a=a.parent;return a instanceof createjs.Stage?a:null};b.localToGlobal=function(a,b){var c=this.getConcatenatedMatrix(this._matrix);if(null==c)return null;c.append(1,0,0,1,a,b);return new createjs.Point(c.tx,c.ty)};b.globalToLocal=function(a,b){var c=this.getConcatenatedMatrix(this._matrix);if(null==c)return null;c.invert();c.append(1,0,0,1,a,b);return new createjs.Point(c.tx,c.ty)};b.localToLocal=function(a,b,c){a=this.localToGlobal(a,b);return c.globalToLocal(a.x,a.y)};b.setTransform=\nfunction(a,b,c,d,e,f,g,j,k){this.x=a||0;this.y=b||0;this.scaleX=null==c?1:c;this.scaleY=null==d?1:d;this.rotation=e||0;this.skewX=f||0;this.skewY=g||0;this.regX=j||0;this.regY=k||0;return this};b.getMatrix=function(a){return(a?a.identity():new createjs.Matrix2D).appendTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY).appendProperties(this.alpha,this.shadow,this.compositeOperation)};b.getConcatenatedMatrix=function(a){a?a.identity():a=new createjs.Matrix2D;\nfor(var b=this;null!=b;)a.prependTransform(b.x,b.y,b.scaleX,b.scaleY,b.rotation,b.skewX,b.skewY,b.regX,b.regY).prependProperties(b.alpha,b.shadow,b.compositeOperation),b=b.parent;return a};b.hitTest=function(a,b){var h=c._hitTestContext,d=c._hitTestCanvas;h.setTransform(1,0,0,1,-a,-b);this.draw(h);h=this._testHit(h);d.width=0;d.width=1;return h};b.set=function(a){for(var b in a)this[b]=a[b];return this};b.clone=function(){var a=new c;this.cloneProps(a);return a};b.toString=function(){return\"[DisplayObject (name=\"+\nthis.name+\")]\"};b.cloneProps=function(a){a.alpha=this.alpha;a.name=this.name;a.regX=this.regX;a.regY=this.regY;a.rotation=this.rotation;a.scaleX=this.scaleX;a.scaleY=this.scaleY;a.shadow=this.shadow;a.skewX=this.skewX;a.skewY=this.skewY;a.visible=this.visible;a.x=this.x;a.y=this.y;a.mouseEnabled=this.mouseEnabled;a.compositeOperation=this.compositeOperation;this.cacheCanvas&&(a.cacheCanvas=this.cacheCanvas.cloneNode(!0),a.cacheCanvas.getContext(\"2d\").putImageData(this.cacheCanvas.getContext(\"2d\").getImageData(0,\n0,this.cacheCanvas.width,this.cacheCanvas.height),0,0))};b._applyShadow=function(a,b){b=b||Shadow.identity;a.shadowColor=b.color;a.shadowOffsetX=b.offsetX;a.shadowOffsetY=b.offsetY;a.shadowBlur=b.blur};b._tick=function(a){this.onTick&&this.onTick.apply(this,a);var b=this._listeners;b&&b.tick&&this.dispatchEvent({type:\"tick\",params:a})};b._testHit=function(a){try{var b=1<a.getImageData(0,0,1,1).data[3]}catch(h){if(!c.suppressCrossDomainErrors)throw\"An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.\";\n}return b};b._applyFilters=function(){if(this.filters&&0!=this.filters.length&&this.cacheCanvas)for(var a=this.filters.length,b=this.cacheCanvas.getContext(\"2d\"),c=this.cacheCanvas.width,d=this.cacheCanvas.height,e=0;e<a;e++)this.filters[e].applyFilter(b,0,0,c,d)};b._hasMouseHandler=function(a){var b=this._listeners;return!!(a&1&&(this.onPress||this.onClick||this.onDoubleClick||b&&(this.hasEventListener(\"mousedown\")||this.hasEventListener(\"click\")||this.hasEventListener(\"dblclick\")))||a&2&&(this.onMouseOver||\nthis.onMouseOut||this.cursor||b&&(this.hasEventListener(\"mouseover\")||this.hasEventListener(\"mouseout\"))))};createjs.DisplayObject=c})();this.createjs=this.createjs||{};\n(function(){var c=function(){this.initialize()},b=c.prototype=new createjs.DisplayObject;b.children=null;b.DisplayObject_initialize=b.initialize;b.initialize=function(){this.DisplayObject_initialize();this.children=[]};b.isVisible=function(){var a=this.cacheCanvas||this.children.length;return!(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&a))};b.DisplayObject_draw=b.draw;b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;for(var c=this.children.slice(0),d=0,e=c.length;d<\ne;d++){var f=c[d];f.isVisible()&&(a.save(),f.updateContext(a),f.draw(a),a.restore())}return!0};b.addChild=function(a){if(null==a)return a;var b=arguments.length;if(1<b){for(var c=0;c<b;c++)this.addChild(arguments[c]);return arguments[b-1]}a.parent&&a.parent.removeChild(a);a.parent=this;this.children.push(a);return a};b.addChildAt=function(a,b){var c=arguments.length,d=arguments[c-1];if(0>d||d>this.children.length)return arguments[c-2];if(2<c){for(var e=0;e<c-1;e++)this.addChildAt(arguments[e],d+e);\nreturn arguments[c-2]}a.parent&&a.parent.removeChild(a);a.parent=this;this.children.splice(b,0,a);return a};b.removeChild=function(a){var b=arguments.length;if(1<b){for(var c=!0,d=0;d<b;d++)c=c&&this.removeChild(arguments[d]);return c}return this.removeChildAt(this.children.indexOf(a))};b.removeChildAt=function(a){var b=arguments.length;if(1<b){for(var c=[],d=0;d<b;d++)c[d]=arguments[d];c.sort(function(a,b){return b-a});for(var e=!0,d=0;d<b;d++)e=e&&this.removeChildAt(c[d]);return e}if(0>a||a>this.children.length-\n1)return!1;if(b=this.children[a])b.parent=null;this.children.splice(a,1);return!0};b.removeAllChildren=function(){for(var a=this.children;a.length;)a.pop().parent=null};b.getChildAt=function(a){return this.children[a]};b.getChildByName=function(a){for(var b=this.children,c=0,d=b.length;c<d;c++)if(b[c].name==a)return b[c];return null};b.sortChildren=function(a){this.children.sort(a)};b.getChildIndex=function(a){return this.children.indexOf(a)};b.getNumChildren=function(){return this.children.length};\nb.swapChildrenAt=function(a,b){var c=this.children,d=c[a],e=c[b];d&&e&&(c[a]=e,c[b]=d)};b.swapChildren=function(a,b){for(var c=this.children,d,e,f=0,g=c.length;f<g&&!(c[f]==a&&(d=f),c[f]==b&&(e=f),null!=d&&null!=e);f++);f!=g&&(c[d]=b,c[e]=a)};b.setChildIndex=function(a,b){var c=this.children,d=c.length;if(!(a.parent!=this||0>b||b>=d)){for(var e=0;e<d&&c[e]!=a;e++);e==d||e==b||(c.splice(e,1),b<e&&b--,c.splice(b,0,a))}};b.contains=function(a){for(;a;){if(a==this)return!0;a=a.parent}return!1};b.hitTest=\nfunction(a,b){return null!=this.getObjectUnderPoint(a,b)};b.getObjectsUnderPoint=function(a,b){var c=[],d=this.localToGlobal(a,b);this._getObjectsUnderPoint(d.x,d.y,c);return c};b.getObjectUnderPoint=function(a,b){var c=this.localToGlobal(a,b);return this._getObjectsUnderPoint(c.x,c.y)};b.clone=function(a){var b=new c;this.cloneProps(b);if(a)for(var h=b.children=[],d=0,e=this.children.length;d<e;d++){var f=this.children[d].clone(a);f.parent=b;h.push(f)}return b};b.toString=function(){return\"[Container (name=\"+\nthis.name+\")]\"};b.DisplayObject__tick=b._tick;b._tick=function(a){for(var b=this.children.length-1;0<=b;b--){var c=this.children[b];c._tick&&c._tick(a)}this.DisplayObject__tick(a)};b._getObjectsUnderPoint=function(a,b,h,d){var e=createjs.DisplayObject._hitTestContext,f=createjs.DisplayObject._hitTestCanvas,g=this._matrix,j=this._hasMouseHandler(d);if(!this.hitArea&&(this.cacheCanvas&&j)&&(this.getConcatenatedMatrix(g),e.setTransform(g.a,g.b,g.c,g.d,g.tx-a,g.ty-b),e.globalAlpha=g.alpha,this.draw(e),\nthis._testHit(e)))return f.width=0,f.width=1,this;for(var k=this.children.length-1;0<=k;k--){var l=this.children[k],n=l.hitArea;if(l.visible&&!(!n&&!l.isVisible()||d&&!l.mouseEnabled)){var p=d&&l._hasMouseHandler(d);if(l instanceof c&&(!n||!p))if(j){if(l=l._getObjectsUnderPoint(a,b))return this}else{if(l=l._getObjectsUnderPoint(a,b,h,d),!h&&l)return l}else if(!d||j||p)if(l.getConcatenatedMatrix(g),n&&(g.appendTransform(n.x,n.y,n.scaleX,n.scaleY,n.rotation,n.skewX,n.skewY,n.regX,n.regY),g.alpha=n.alpha),\ne.globalAlpha=g.alpha,e.setTransform(g.a,g.b,g.c,g.d,g.tx-a,g.ty-b),(n||l).draw(e),this._testHit(e)){f.width=0;f.width=1;if(j)return this;if(h)h.push(l);else return l}}}return null};createjs.Container=c})();this.createjs=this.createjs||{};\n(function(){var c=function(a){this.initialize(a)},b=c.prototype=new createjs.Container;c._snapToPixelEnabled=!1;b.autoClear=!0;b.canvas=null;b.mouseX=0;b.mouseY=0;b.onMouseMove=null;b.onMouseUp=null;b.onMouseDown=null;b.snapToPixelEnabled=!1;b.mouseInBounds=!1;b.tickOnUpdate=!0;b.mouseMoveOutside=!1;b._pointerData=null;b._pointerCount=0;b._primaryPointerID=null;b._mouseOverIntervalID=null;b.Container_initialize=b.initialize;b.initialize=function(a){this.Container_initialize();this.canvas=\"string\"==\ntypeof a?document.getElementById(a):a;this._pointerData={};this.enableEvents(!0)};b.update=function(){if(this.canvas){this.autoClear&&this.clear();c._snapToPixelEnabled=this.snapToPixelEnabled;this.tickOnUpdate&&this._tick(arguments.length?arguments:null);var a=this.canvas.getContext(\"2d\");a.save();this.updateContext(a);this.draw(a,!1);a.restore()}};b.tick=b.update;b.clear=function(){if(this.canvas){var a=this.canvas.getContext(\"2d\");a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,this.canvas.width,this.canvas.height)}};\nb.toDataURL=function(a,b){b||(b=\"image/png\");var c=this.canvas.getContext(\"2d\"),d=this.canvas.width,e=this.canvas.height,f;if(a){f=c.getImageData(0,0,d,e);var g=c.globalCompositeOperation;c.globalCompositeOperation=\"destination-over\";c.fillStyle=a;c.fillRect(0,0,d,e)}var j=this.canvas.toDataURL(b);a&&(c.clearRect(0,0,d,e),c.putImageData(f,0,0),c.globalCompositeOperation=g);return j};b.enableMouseOver=function(a){this._mouseOverIntervalID&&(clearInterval(this._mouseOverIntervalID),this._mouseOverIntervalID=\nnull);if(null==a)a=20;else if(0>=a)return;var b=this;this._mouseOverIntervalID=setInterval(function(){b._testMouseOver()},1E3/Math.min(50,a))};b.enableEvents=function(a){null==a&&(a=!0);var b,c=this._eventListeners;if(!a&&c){for(b in c)a=c[b],a.t.removeEventListener(b,a.f);this._eventListeners=null}else if(a&&!c){a=window.addEventListener?window:document;var d=this,c=this._eventListeners={};c.mouseup={t:a,f:function(a){d._handleMouseUp(a)}};c.mousemove={t:a,f:function(a){d._handleMouseMove(a)}};c.dblclick=\n{t:a,f:function(a){d._handleDoubleClick(a)}};(a=this.canvas)&&(c.mousedown={t:a,f:function(a){d._handleMouseDown(a)}});for(b in c)a=c[b],a.t.addEventListener(b,a.f)}};b.clone=function(){var a=new c(null);this.cloneProps(a);return a};b.toString=function(){return\"[Stage (name=\"+this.name+\")]\"};b._getPointerData=function(a){var b=this._pointerData[a];b||(b=this._pointerData[a]={x:0,y:0},null==this._primaryPointerID&&(this._primaryPointerID=a));return b};b._handleMouseMove=function(a){a||(a=window.event);\nthis._handlePointerMove(-1,a,a.pageX,a.pageY)};b._handlePointerMove=function(a,b,c,d){if(this.canvas){var e=this._getPointerData(a),f=e.inBounds;this._updatePointerPosition(a,c,d);if(f||e.inBounds||this.mouseMoveOutside){if(this.onMouseMove||this.hasEventListener(\"stagemousemove\"))c=new createjs.MouseEvent(\"stagemousemove\",e.x,e.y,this,b,a,a==this._primaryPointerID,e.rawX,e.rawY),this.onMouseMove&&this.onMouseMove(c),this.dispatchEvent(c);if((d=e.event)&&(d.onMouseMove||d.hasEventListener(\"mousemove\")))c=\nnew createjs.MouseEvent(\"mousemove\",e.x,e.y,d.target,b,a,a==this._primaryPointerID,e.rawX,e.rawY),d.onMouseMove&&d.onMouseMove(c),d.dispatchEvent(c,d.target)}}};b._updatePointerPosition=function(a,b,c){var d=this._getElementRect(this.canvas);b-=d.left;c-=d.top;var e=this.canvas.width,f=this.canvas.height;b/=(d.right-d.left)/e;c/=(d.bottom-d.top)/f;d=this._getPointerData(a);(d.inBounds=0<=b&&0<=c&&b<=e-1&&c<=f-1)?(d.x=b,d.y=c):this.mouseMoveOutside&&(d.x=0>b?0:b>e-1?e-1:b,d.y=0>c?0:c>f-1?f-1:c);d.rawX=\nb;d.rawY=c;a==this._primaryPointerID&&(this.mouseX=d.x,this.mouseY=d.y,this.mouseInBounds=d.inBounds)};b._getElementRect=function(a){var b=a.getBoundingClientRect(),c=(window.pageXOffset||document.scrollLeft||0)-(document.clientLeft||document.body.clientLeft||0),d=(window.pageYOffset||document.scrollTop||0)-(document.clientTop||document.body.clientTop||0),e=window.getComputedStyle?getComputedStyle(a):a.currentStyle;a=parseInt(e.paddingLeft)+parseInt(e.borderLeftWidth);var f=parseInt(e.paddingTop)+\nparseInt(e.borderTopWidth),g=parseInt(e.paddingRight)+parseInt(e.borderRightWidth),e=parseInt(e.paddingBottom)+parseInt(e.borderBottomWidth);return{left:b.left+c+a,right:b.right+c-g,top:b.top+d+f,bottom:b.bottom+d-e}};b._handleMouseUp=function(a){this._handlePointerUp(-1,a,!1)};b._handlePointerUp=function(a,b,c){var d=this._getPointerData(a),e;if(this.onMouseMove||this.hasEventListener(\"stagemouseup\"))e=new createjs.MouseEvent(\"stagemouseup\",d.x,d.y,this,b,a,a==this._primaryPointerID,d.rawX,d.rawY),\nthis.onMouseUp&&this.onMouseUp(e),this.dispatchEvent(e);var f=d.event;if(f&&(f.onMouseUp||f.hasEventListener(\"mouseup\")))e=new createjs.MouseEvent(\"mouseup\",d.x,d.y,f.target,b,a,a==this._primaryPointerID,d.rawX,d.rawY),f.onMouseUp&&f.onMouseUp(e),f.dispatchEvent(e,f.target);if((f=d.target)&&(f.onClick||f.hasEventListener(\"click\"))&&this._getObjectsUnderPoint(d.x,d.y,null,!0,this._mouseOverIntervalID?3:1)==f)e=new createjs.MouseEvent(\"click\",d.x,d.y,f,b,a,a==this._primaryPointerID,d.rawX,d.rawY),f.onClick&&\nf.onClick(e),f.dispatchEvent(e);c?(a==this._primaryPointerID&&(this._primaryPointerID=null),delete this._pointerData[a]):d.event=d.target=null};b._handleMouseDown=function(a){this._handlePointerDown(-1,a,!1)};b._handlePointerDown=function(a,b,c,d){var e=this._getPointerData(a);null!=d&&this._updatePointerPosition(a,c,d);if(this.onMouseDown||this.hasEventListener(\"stagemousedown\"))c=new createjs.MouseEvent(\"stagemousedown\",e.x,e.y,this,b,a,a==this._primaryPointerID,e.rawX,e.rawY),this.onMouseDown&&\nthis.onMouseDown(c),this.dispatchEvent(c);if(d=this._getObjectsUnderPoint(e.x,e.y,null,this._mouseOverIntervalID?3:1))if(e.target=d,d.onPress||d.hasEventListener(\"mousedown\"))if(c=new createjs.MouseEvent(\"mousedown\",e.x,e.y,d,b,a,a==this._primaryPointerID,e.rawX,e.rawY),d.onPress&&d.onPress(c),d.dispatchEvent(c),c.onMouseMove||c.onMouseUp||c.hasEventListener(\"mousemove\")||c.hasEventListener(\"mouseup\"))e.event=c};b._testMouseOver=function(){if(-1==this._primaryPointerID&&!(this.mouseX==this._mouseOverX&&\nthis.mouseY==this._mouseOverY&&this.mouseInBounds)){var a=null;this.mouseInBounds&&(a=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,3),this._mouseOverX=this.mouseX,this._mouseOverY=this.mouseY);var b=this._mouseOverTarget;if(b!=a){var c=this._getPointerData(-1);if(b&&(b.onMouseOut||b.hasEventListener(\"mouseout\"))){var d=new createjs.MouseEvent(\"mouseout\",c.x,c.y,b,null,-1,c.rawX,c.rawY);b.onMouseOut&&b.onMouseOut(d);b.dispatchEvent(d)}b&&(this.canvas.style.cursor=\"\");if(a&&(a.onMouseOver||\na.hasEventListener(\"mouseover\")))d=new createjs.MouseEvent(\"mouseover\",c.x,c.y,a,null,-1,c.rawX,c.rawY),a.onMouseOver&&a.onMouseOver(d),a.dispatchEvent(d);a&&(this.canvas.style.cursor=a.cursor||\"\");this._mouseOverTarget=a}}};b._handleDoubleClick=function(a){var b=this._getPointerData(-1),c=this._getObjectsUnderPoint(b.x,b.y,null,this._mouseOverIntervalID?3:1);if(c&&(c.onDoubleClick||c.hasEventListener(\"dblclick\")))evt=new createjs.MouseEvent(\"dblclick\",b.x,b.y,c,a,-1,!0,b.rawX,b.rawY),c.onDoubleClick&&\nc.onDoubleClick(evt),c.dispatchEvent(evt)};createjs.Stage=c})();this.createjs=this.createjs||{};\n(function(){var c=function(a){this.initialize(a)},b=c.prototype=new createjs.DisplayObject;b.image=null;b.snapToPixel=!0;b.sourceRect=null;b.DisplayObject_initialize=b.initialize;b.initialize=function(a){this.DisplayObject_initialize();\"string\"==typeof a?(this.image=new Image,this.image.src=a):this.image=a};b.isVisible=function(){var a=this.cacheCanvas||this.image&&(this.image.complete||this.image.getContext||2<=this.image.readyState);return!(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&\na))};b.DisplayObject_draw=b.draw;b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;var c=this.sourceRect;c?a.drawImage(this.image,c.x,c.y,c.width,c.height,0,0,c.width,c.height):a.drawImage(this.image,0,0);return!0};b.clone=function(){var a=new c(this.image);this.sourceRect&&(a.sourceRect=this.sourceRect.clone());this.cloneProps(a);return a};b.toString=function(){return\"[Bitmap (name=\"+this.name+\")]\"};createjs.Bitmap=c})();this.createjs=this.createjs||{};\n(function(){var c=function(a){this.initialize(a)},b=c.prototype=new createjs.DisplayObject;b.onAnimationEnd=null;b.currentFrame=-1;b.currentAnimation=null;b.paused=!0;b.spriteSheet=null;b.snapToPixel=!0;b.offset=0;b.currentAnimationFrame=0;b.addEventListener=null;b.removeEventListener=null;b.removeAllEventListeners=null;b.dispatchEvent=null;b.hasEventListener=null;b._listeners=null;createjs.EventDispatcher.initialize(b);b._advanceCount=0;b._animation=null;b.DisplayObject_initialize=b.initialize;b.initialize=\nfunction(a){this.DisplayObject_initialize();this.spriteSheet=a};b.isVisible=function(){var a=this.cacheCanvas||this.spriteSheet.complete&&0<=this.currentFrame;return!(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&a))};b.DisplayObject_draw=b.draw;b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;this._normalizeFrame();var c=this.spriteSheet.getFrame(this.currentFrame);if(c){var d=c.rect;a.drawImage(c.image,d.x,d.y,d.width,d.height,-c.regX,-c.regY,d.width,d.height);return!0}};\nb.play=function(){this.paused=!1};b.stop=function(){this.paused=!0};b.gotoAndPlay=function(a){this.paused=!1;this._goto(a)};b.gotoAndStop=function(a){this.paused=!0;this._goto(a)};b.advance=function(){this._animation?this.currentAnimationFrame++:this.currentFrame++;this._normalizeFrame()};b.getBounds=function(){return this.spriteSheet.getFrameBounds(this.currentFrame)};b.clone=function(){var a=new c(this.spriteSheet);this.cloneProps(a);return a};b.toString=function(){return\"[BitmapAnimation (name=\"+\nthis.name+\")]\"};b.DisplayObject__tick=b._tick;b._tick=function(a){var b=this._animation?this._animation.frequency:1;!this.paused&&0==(++this._advanceCount+this.offset)%b&&this.advance();this.DisplayObject__tick(a)};b._normalizeFrame=function(){var a=this._animation,b=this.currentFrame,c=this.paused,d;if(a)if(d=a.frames.length,this.currentAnimationFrame>=d){var e=a.next;this._dispatchAnimationEnd(a,b,c,e,d-1)||(e?this._goto(e):(this.paused=!0,this.currentAnimationFrame=a.frames.length-1,this.currentFrame=\na.frames[this.currentAnimationFrame]))}else this.currentFrame=a.frames[this.currentAnimationFrame];else d=this.spriteSheet.getNumFrames(),b>=d&&!this._dispatchAnimationEnd(a,b,c,d-1)&&(this.currentFrame=0)};b._dispatchAnimationEnd=function(a,b,c,d,e){var f=a?a.name:null;this.onAnimationEnd&&this.onAnimationEnd(this,f,d);this.dispatchEvent({type:\"animationend\",name:f,next:d});!c&&this.paused&&(this.currentAnimationFrame=e);return this.paused!=c||this._animation!=a||this.currentFrame!=b};b.DisplayObject_cloneProps=\nb.cloneProps;b.cloneProps=function(a){this.DisplayObject_cloneProps(a);a.onAnimationEnd=this.onAnimationEnd;a.currentFrame=this.currentFrame;a.currentAnimation=this.currentAnimation;a.paused=this.paused;a.offset=this.offset;a._animation=this._animation;a.currentAnimationFrame=this.currentAnimationFrame};b._goto=function(a){if(isNaN(a)){var b=this.spriteSheet.getAnimation(a);b&&(this.currentAnimationFrame=0,this._animation=b,this.currentAnimation=a,this._normalizeFrame())}else this.currentAnimation=\nthis._animation=null,this.currentFrame=a};createjs.BitmapAnimation=c})();this.createjs=this.createjs||{};\n(function(){var c=function(a){this.initialize(a)},b=c.prototype=new createjs.DisplayObject;b.graphics=null;b.DisplayObject_initialize=b.initialize;b.initialize=function(a){this.DisplayObject_initialize();this.graphics=a?a:new createjs.Graphics};b.isVisible=function(){var a=this.cacheCanvas||this.graphics&&!this.graphics.isEmpty();return!(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&a))};b.DisplayObject_draw=b.draw;b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;this.graphics.draw(a);\nreturn!0};b.clone=function(a){a=new c(a&&this.graphics?this.graphics.clone():this.graphics);this.cloneProps(a);return a};b.toString=function(){return\"[Shape (name=\"+this.name+\")]\"};createjs.Shape=c})();this.createjs=this.createjs||{};\n(function(){var c=function(a,b,c){this.initialize(a,b,c)},b=c.prototype=new createjs.DisplayObject;c._workingContext=(createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\")).getContext(\"2d\");b.text=\"\";b.font=null;b.color=\"#000\";b.textAlign=\"left\";b.textBaseline=\"top\";b.maxWidth=null;b.outline=!1;b.lineHeight=0;b.lineWidth=null;b.DisplayObject_initialize=b.initialize;b.initialize=function(a,b,c){this.DisplayObject_initialize();this.text=a;this.font=b;this.color=c?c:\"#000\"};\nb.isVisible=function(){var a=this.cacheCanvas||null!=this.text&&\"\"!==this.text;return!(!this.visible||!(0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&a))};b.DisplayObject_draw=b.draw;b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;this.outline?a.strokeStyle=this.color:a.fillStyle=this.color;a.font=this.font;a.textAlign=this.textAlign||\"start\";a.textBaseline=this.textBaseline||\"alphabetic\";this._drawText(a);return!0};b.getMeasuredWidth=function(){return this._getWorkingContext().measureText(this.text).width};\nb.getMeasuredLineHeight=function(){return 1.2*this._getWorkingContext().measureText(\"M\").width};b.getMeasuredHeight=function(){return this._drawText()*(this.lineHeight||this.getMeasuredLineHeight())};b.clone=function(){var a=new c(this.text,this.font,this.color);this.cloneProps(a);return a};b.toString=function(){return\"[Text (text=\"+(20<this.text.length?this.text.substr(0,17)+\"...\":this.text)+\")]\"};b.DisplayObject_cloneProps=b.cloneProps;b.cloneProps=function(a){this.DisplayObject_cloneProps(a);a.textAlign=\nthis.textAlign;a.textBaseline=this.textBaseline;a.maxWidth=this.maxWidth;a.outline=this.outline;a.lineHeight=this.lineHeight;a.lineWidth=this.lineWidth};b._getWorkingContext=function(){var a=c._workingContext;a.font=this.font;a.textAlign=this.textAlign||\"start\";a.textBaseline=this.textBaseline||\"alphabetic\";return a};b._drawText=function(a){var b=!!a;b||(a=this._getWorkingContext());for(var c=String(this.text).split(/(?:\\r\\n|\\r|\\n)/),d=this.lineHeight||this.getMeasuredLineHeight(),e=0,f=0,g=c.length;f<\ng;f++){var j=a.measureText(c[f]).width;if(null==this.lineWidth||j<this.lineWidth)b&&this._drawTextLine(a,c[f],e*d);else{for(var j=c[f].split(/(\\s)/),k=j[0],l=1,n=j.length;l<n;l+=2)a.measureText(k+j[l]+j[l+1]).width>this.lineWidth?(b&&this._drawTextLine(a,k,e*d),e++,k=j[l+1]):k+=j[l]+j[l+1];b&&this._drawTextLine(a,k,e*d)}e++}return e};b._drawTextLine=function(a,b,c){this.outline?a.strokeText(b,0,c,this.maxWidth||65535):a.fillText(b,0,c,this.maxWidth||65535)};createjs.Text=c})();this.createjs=this.createjs||{};\n(function(){var c=function(){throw\"SpriteSheetUtils cannot be instantiated\";};c._workingCanvas=createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\");c._workingContext=c._workingCanvas.getContext(\"2d\");c.addFlippedFrames=function(b,a,m,h){if(a||m||h){var d=0;a&&c._flip(b,++d,!0,!1);m&&c._flip(b,++d,!1,!0);h&&c._flip(b,++d,!0,!0)}};c.extractFrame=function(b,a){isNaN(a)&&(a=b.getAnimation(a).frames[0]);var m=b.getFrame(a);if(!m)return null;var h=m.rect,d=c._workingCanvas;d.width=\nh.width;d.height=h.height;c._workingContext.drawImage(m.image,h.x,h.y,h.width,h.height,0,0,h.width,h.height);m=new Image;m.src=d.toDataURL(\"image/png\");return m};c.mergeAlpha=function(b,a,c){c||(c=createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\"));c.width=Math.max(a.width,b.width);c.height=Math.max(a.height,b.height);var h=c.getContext(\"2d\");h.save();h.drawImage(b,0,0);h.globalCompositeOperation=\"destination-in\";h.drawImage(a,0,0);h.restore();return c};c._flip=function(b,\na,m,h){for(var d=b._images,e=c._workingCanvas,f=c._workingContext,g=d.length/a,j=0;j<g;j++){var k=d[j];k.__tmp=j;e.width=0;e.width=k.width;e.height=k.height;f.setTransform(m?-1:1,0,0,h?-1:1,m?k.width:0,h?k.height:0);f.drawImage(k,0,0);var l=new Image;l.src=e.toDataURL(\"image/png\");l.width=k.width;l.height=k.height;d.push(l)}f=b._frames;e=f.length/a;for(j=0;j<e;j++){var k=f[j],n=k.rect.clone(),l=d[k.image.__tmp+g*a],p={image:l,rect:n,regX:k.regX,regY:k.regY};m&&(n.x=l.width-n.x-n.width,p.regX=n.width-\nk.regX);h&&(n.y=l.height-n.y-n.height,p.regY=n.height-k.regY);f.push(p)}m=\"_\"+(m?\"h\":\"\")+(h?\"v\":\"\");h=b._animations;b=b._data;d=h.length/a;for(j=0;j<d;j++){f=h[j];k=b[f];g={name:f+m,frequency:k.frequency,next:k.next,frames:[]};k.next&&(g.next+=m);f=k.frames;k=0;for(l=f.length;k<l;k++)g.frames.push(f[k]+e*a);b[g.name]=g;h.push(g.name)}};createjs.SpriteSheetUtils=c})();this.createjs=this.createjs||{};\n(function(){var c=function(){this.initialize()},b=c.prototype;c.ERR_DIMENSIONS=\"frame dimensions exceed max spritesheet dimensions\";c.ERR_RUNNING=\"a build is already running\";b.maxWidth=2048;b.maxHeight=2048;b.spriteSheet=null;b.scale=1;b.padding=1;b.timeSlice=0.3;b.progress=-1;b.onComplete=null;b.onProgress=null;b.addEventListener=null;b.removeEventListener=null;b.removeAllEventListeners=null;b.dispatchEvent=null;b.hasEventListener=null;b._listeners=null;createjs.EventDispatcher.initialize(b);b._frames=\nnull;b._animations=null;b._data=null;b._nextFrameIndex=0;b._index=0;b._timerID=null;b._scale=1;b.initialize=function(){this._frames=[];this._animations={}};b.addFrame=function(a,b,h,d,e,f){if(this._data)throw c.ERR_RUNNING;b=b||a.bounds||a.nominalBounds;!b&&a.getBounds&&(b=a.getBounds());if(!b)return null;h=h||1;return this._frames.push({source:a,sourceRect:b,scale:h,funct:d,params:e,scope:f,index:this._frames.length,height:b.height*h})-1};b.addAnimation=function(a,b,h,d){if(this._data)throw c.ERR_RUNNING;\nthis._animations[a]={frames:b,next:h,frequency:d}};b.addMovieClip=function(a,b,h){if(this._data)throw c.ERR_RUNNING;var d=a.frameBounds,e=b||a.bounds||a.nominalBounds;!e&&a.getBounds&&(e=a.getBounds());if(!e&&!d)return null;b=this._frames.length;for(var f=a.timeline.duration,g=0;g<f;g++)this.addFrame(a,d&&d[g]?d[g]:e,h,function(a){var b=this.actionsEnabled;this.actionsEnabled=!1;this.gotoAndStop(a);this.actionsEnabled=b},[g],a);g=a.timeline._labels;a=[];for(var j in g)a.push({index:g[j],label:j});\nif(a.length){a.sort(function(a,b){return a.index-b.index});g=0;for(j=a.length;g<j;g++){h=a[g].label;for(var d=b+(g==j-1?f:a[g+1].index),e=[],k=b+a[g].index;k<d;k++)e.push(k);this.addAnimation(h,e,!0)}}};b.build=function(){if(this._data)throw c.ERR_RUNNING;for(this._startBuild();this._drawNext(););this._endBuild();return this.spriteSheet};b.buildAsync=function(a){if(this._data)throw c.ERR_RUNNING;this.timeSlice=a;this._startBuild();var b=this;this._timerID=setTimeout(function(){b._run()},50-50*Math.max(0.01,\nMath.min(0.99,this.timeSlice||0.3)))};b.stopAsync=function(){clearTimeout(this._timerID);this._data=null};b.clone=function(){throw\"SpriteSheetBuilder cannot be cloned.\";};b.toString=function(){return\"[SpriteSheetBuilder]\"};b._startBuild=function(){var a=this.padding||0;this.progress=0;this.spriteSheet=null;this._index=0;this._scale=this.scale;var b=[];this._data={images:[],frames:b,animations:this._animations};var h=this._frames.slice();h.sort(function(a,b){return a.height<=b.height?-1:1});if(h[h.length-\n1].height+2*a>this.maxHeight)throw c.ERR_DIMENSIONS;for(var d=0,e=0,f=0;h.length;){var g=this._fillRow(h,d,f,b,a);g.w>e&&(e=g.w);d+=g.h;if(!g.h||!h.length){var j=createjs.createCanvas?createjs.createCanvas():document.createElement(\"canvas\");j.width=this._getSize(e,this.maxWidth);j.height=this._getSize(d,this.maxHeight);this._data.images[f]=j;g.h||(e=d=0,f++)}}};b._getSize=function(a,b){for(var c=4;Math.pow(2,++c)<a;);return Math.min(b,Math.pow(2,c))};b._fillRow=function(a,b,h,d,e){var f=this.maxWidth,\ng=this.maxHeight;b+=e;for(var g=g-b,j=e,k=0,l=a.length-1;0<=l;l--){var n=a[l],p=this._scale*n.scale,q=n.sourceRect,s=n.source,r=Math.floor(p*q.x-e),u=Math.floor(p*q.y-e),t=Math.ceil(p*q.height+2*e),q=Math.ceil(p*q.width+2*e);if(q>f)throw c.ERR_DIMENSIONS;t>g||j+q>f||(n.img=h,n.rect=new createjs.Rectangle(j,b,q,t),k=k||t,a.splice(l,1),d[n.index]=[j,b,q,t,h,Math.round(-r+p*s.regX-e),Math.round(-u+p*s.regY-e)],j+=q)}return{w:j,h:k}};b._endBuild=function(){this.spriteSheet=new createjs.SpriteSheet(this._data);\nthis._data=null;this.progress=1;this.onComplete&&this.onComplete(this);this.dispatchEvent(\"complete\")};b._run=function(){for(var a=50*Math.max(0.01,Math.min(0.99,this.timeSlice||0.3)),b=(new Date).getTime()+a,c=!1;b>(new Date).getTime();)if(!this._drawNext()){c=!0;break}if(c)this._endBuild();else{var d=this;this._timerID=setTimeout(function(){d._run()},50-a)}a=this.progress=this._index/this._frames.length;this.onProgress&&this.onProgress(this,a);this.dispatchEvent({type:\"progress\",progress:a})};b._drawNext=\nfunction(){var a=this._frames[this._index],b=a.scale*this._scale,c=a.rect,d=a.sourceRect,e=this._data.images[a.img].getContext(\"2d\");a.funct&&a.funct.apply(a.scope,a.params);e.save();e.beginPath();e.rect(c.x,c.y,c.width,c.height);e.clip();e.translate(Math.ceil(c.x-d.x*b),Math.ceil(c.y-d.y*b));e.scale(b,b);a.source.draw(e);e.restore();return++this._index<this._frames.length};createjs.SpriteSheetBuilder=c})();this.createjs=this.createjs||{};\n(function(){var c=function(a){this.initialize(a)},b=c.prototype=new createjs.DisplayObject;b.htmlElement=null;b._oldMtx=null;b.DisplayObject_initialize=b.initialize;b.initialize=function(a){\"string\"==typeof a&&(a=document.getElementById(a));this.DisplayObject_initialize();this.mouseEnabled=!1;this.htmlElement=a;a=a.style;a.position=\"absolute\";a.transformOrigin=a.WebkitTransformOrigin=a.msTransformOrigin=a.MozTransformOrigin=a.OTransformOrigin=\"0% 0%\"};b.isVisible=function(){return null!=this.htmlElement};\nb.draw=function(){if(null!=this.htmlElement){var a=this.getConcatenatedMatrix(this._matrix),b=this.htmlElement.style;if(this.visible)b.visibility=\"visible\";else return!0;var c=this._oldMtx||{};c.alpha!=a.alpha&&(b.opacity=\"\"+a.alpha,c.alpha=a.alpha);if(c.tx!=a.tx||c.ty!=a.ty||c.a!=a.a||c.b!=a.b||c.c!=a.c||c.d!=a.d)b.transform=b.WebkitTransform=b.OTransform=b.msTransform=[\"matrix(\"+a.a,a.b,a.c,a.d,a.tx+0.5|0,(a.ty+0.5|0)+\")\"].join(),b.MozTransform=[\"matrix(\"+a.a,a.b,a.c,a.d,(a.tx+0.5|0)+\"px\",(a.ty+\n0.5|0)+\"px)\"].join(),this._oldMtx=a.clone();return!0}};b.cache=function(){};b.uncache=function(){};b.updateCache=function(){};b.hitTest=function(){};b.localToGlobal=function(){};b.globalToLocal=function(){};b.localToLocal=function(){};b.clone=function(){throw\"DOMElement cannot be cloned.\";};b.toString=function(){return\"[DOMElement (name=\"+this.name+\")]\"};b.DisplayObject__tick=b._tick;b._tick=function(a){this.htmlElement.style.visible=\"hidden\";this.DisplayObject__tick(a)};createjs.DOMElement=c})();this.createjs=this.createjs||{};(function(){var c=function(){this.initialize()},b=c.prototype;b.initialize=function(){};b.getBounds=function(){return new createjs.Rectangle(0,0,0,0)};b.applyFilter=function(){};b.toString=function(){return\"[Filter]\"};b.clone=function(){return new c};createjs.Filter=c})();this.createjs=this.createjs||{};\n(function(){var c=function(){throw\"Touch cannot be instantiated\";};c.isSupported=function(){return\"ontouchstart\"in window||window.navigator.msPointerEnabled};c.enable=function(b,a,m){if(!b||!b.canvas||!c.isSupported())return!1;b.__touch={pointers:{},multitouch:!a,preventDefault:!m,count:0};\"ontouchstart\"in window?c._IOS_enable(b):window.navigator.msPointerEnabled&&c._IE_enable(b);return!0};c.disable=function(b){b&&(\"ontouchstart\"in window?c._IOS_disable(b):window.navigator.msPointerEnabled&&c._IE_disable(b))};\nc._IOS_enable=function(b){var a=b.canvas,m=b.__touch.f=function(a){c._IOS_handleEvent(b,a)};a.addEventListener(\"touchstart\",m,!1);a.addEventListener(\"touchmove\",m,!1);a.addEventListener(\"touchend\",m,!1);a.addEventListener(\"touchcancel\",m,!1)};c._IOS_disable=function(b){var a=b.canvas;a&&(b=b.__touch.f,a.removeEventListener(\"touchstart\",b,!1),a.removeEventListener(\"touchmove\",b,!1),a.removeEventListener(\"touchend\",b,!1),a.removeEventListener(\"touchcancel\",b,!1))};c._IOS_handleEvent=function(b,a){if(b){b.__touch.preventDefault&&\na.preventDefault&&a.preventDefault();for(var c=a.changedTouches,h=a.type,d=0,e=c.length;d<e;d++){var f=c[d],g=f.identifier;f.target==b.canvas&&(\"touchstart\"==h?this._handleStart(b,g,a,f.pageX,f.pageY):\"touchmove\"==h?this._handleMove(b,g,a,f.pageX,f.pageY):(\"touchend\"==h||\"touchcancel\"==h)&&this._handleEnd(b,g,a))}}};c._IE_enable=function(b){var a=b.canvas,m=b.__touch.f=function(a){c._IE_handleEvent(b,a)};a.addEventListener(\"MSPointerDown\",m,!1);window.addEventListener(\"MSPointerMove\",m,!1);window.addEventListener(\"MSPointerUp\",\nm,!1);window.addEventListener(\"MSPointerCancel\",m,!1);b.__touch.preventDefault&&(a.style.msTouchAction=\"none\");b.__touch.activeIDs={}};c._IE_disable=function(b){var a=b.__touch.f;window.removeEventListener(\"MSPointerMove\",a,!1);window.removeEventListener(\"MSPointerUp\",a,!1);window.removeEventListener(\"MSPointerCancel\",a,!1);b.canvas&&b.canvas.removeEventListener(\"MSPointerDown\",a,!1)};c._IE_handleEvent=function(b,a){if(b){b.__touch.preventDefault&&a.preventDefault&&a.preventDefault();var c=a.type,\nh=a.pointerId,d=b.__touch.activeIDs;if(\"MSPointerDown\"==c)a.srcElement==b.canvas&&(d[h]=!0,this._handleStart(b,h,a,a.pageX,a.pageY));else if(d[h])if(\"MSPointerMove\"==c)this._handleMove(b,h,a,a.pageX,a.pageY);else if(\"MSPointerUp\"==c||\"MSPointerCancel\"==c)delete d[h],this._handleEnd(b,h,a)}};c._handleStart=function(b,a,c,h,d){var e=b.__touch;if(e.multitouch||!e.count){var f=e.pointers;f[a]||(f[a]=!0,e.count++,b._handlePointerDown(a,c,h,d))}};c._handleMove=function(b,a,c,h,d){b.__touch.pointers[a]&&\nb._handlePointerMove(a,c,h,d)};c._handleEnd=function(b,a,c){var h=b.__touch,d=h.pointers;d[a]&&(h.count--,b._handlePointerUp(a,c,!0),delete d[a])};createjs.Touch=c})();(function(){var c=this.createjs=this.createjs||{},c=c.EaselJS=c.EaselJS||{};c.version=\"NEXT\";c.buildDate=\"Thu, 24 Jan 2013 16:19:47 GMT\"})();\n}).call({});\n//@ sourceURL=/lib/vendor/esl/lib/easeljs.js"
));

require.define("/lib/core/bounds.js",Function(['require','module','exports','__dirname','__filename','process','global'],"// Generated by CoffeeScript 1.5.0\nvar Bounds, BoundsDebug, Color, Component, Pool, Vec2,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nComponent = require('./component');\n\nPool = require('./pool');\n\nColor = require('./color');\n\nVec2 = require('./math').Vec2;\n\nBounds = (function(_super) {\n\n  __extends(Bounds, _super);\n\n  Bounds.prototype.type = 'bounds';\n\n  Bounds.prototype.presets = {\n    shape: 'rect',\n    radius: 0,\n    size: Vec2()\n  };\n\n  function Bounds() {\n    this.size = Vec2();\n  }\n\n  Bounds.prototype.reset = function(presets) {\n    Vec2.copy(this.size, presets.size);\n    this.shape = presets.shape;\n    this.radius = presets.radius;\n    return this;\n  };\n\n  Bounds.prototype.getTop = function() {\n    if (this.shape === 'circle') {\n      return this.transform.pos[1] - this.radius;\n    }\n    return this.transform.pos[1];\n  };\n\n  Bounds.prototype.getBottom = function() {\n    if (this.shape === 'circle') {\n      return this.transform.pos[1] + this.radius;\n    }\n    return this.transform.pos[1] + this.size[1];\n  };\n\n  Bounds.prototype.intersectLine = function(p1, p2) {\n    return null;\n  };\n\n  Bounds.prototype.intersect = function(bound) {\n    return null;\n  };\n\n  Bounds.prototype.contains = function(point) {\n    var pos;\n    pos = this.transform.pos;\n    switch (this.shape) {\n      case 'circle':\n        return Bounds.circPoint(pos, this.radius, point);\n      case 'rect':\n        return Bounds.rectPoint(pos, this.size, point);\n    }\n    return false;\n  };\n\n  Bounds.prototype.withinRect = function(pos, size) {\n    var mypos;\n    mypos = this.transform.pos;\n    switch (this.shape) {\n      case 'circle':\n        return Bounds.rectCirc(pos, size, mypos, this.radius);\n      case 'rect':\n        return Bounds.rectRect(pos, size, mypos, this.size);\n    }\n    return false;\n  };\n\n  return Bounds;\n\n})(Component);\n\nBounds.circPoint = function(center, radius, point) {\n  return Vec2.distSq(point, center) <= radius * radius;\n};\n\nBounds.rectPoint = function(pos, size, point) {\n  return pos[0] - size[0] < point[0] && pos[1] < point[1] && pos[0] + size[0] > point[0] && pos[1] + size[1] > point[1];\n};\n\nBounds.rectCirc = function(topLeft, size, center, radius) {\n  var circleDistanceX, circleDistanceY, cornerDistance;\n  circleDistanceX = Math.abs(center[0] - topLeft[0] - size[0] / 2);\n  circleDistanceY = Math.abs(center[1] - topLeft[1] - size[1] / 2);\n  if (circleDistanceX > (size[0] / 2 + radius) || circleDistanceY > (size[1] / 2 + radius)) {\n    return false;\n  }\n  if (circleDistanceX <= size[0] / 2 || circleDistanceY <= size[1] / 2) {\n    return true;\n  }\n  cornerDistance = Math.pow(circleDistanceX - size[0] / 2, 2) + Math.pow(circleDistanceY - size[1] / 2, 2);\n  return cornerDistance <= Math.pow(radius, 2);\n};\n\nBounds.rectRect = function(pos, size, pos2, size2) {\n  return !(pos[0] > pos2[0] + size2[0] || pos[0] + size[0] < pos2[0] || pos[1] > pos2[1] + size2[1] || pos[1] + size[1] < pos2[1]);\n};\n\nBounds.lineRect = function(point1, point2, topLeft, size) {\n  var botOverlap, bottomIntersection, bottomPoint, c, m, topIntersection, topOverlap, topPoint, _ref, _ref1;\n  this.topLeft = topLeft;\n  this.size = size;\n  m = (y2 - y1) / (x2 - x1);\n  c = y1(-(m * x1));\n  if (m > 0) {\n    topIntersection = m * rx + c;\n    bottomIntersection = m * (rx + rw) + c;\n  } else {\n    topIntersection = m * (rx + rw) + c;\n    bottomIntersection = m * rx + c;\n  }\n  if (y1 < y2) {\n    topPoint = y1;\n    bottomPoint = y2;\n  } else {\n    topPoint = y2;\n    bottomPoint = y1;\n  }\n  topOverlap = (_ref = topIntersection > topPoint) != null ? _ref : {\n    topIntersection: topPoint\n  };\n  botOverlap = (_ref1 = bottomIntersection < bottomPoint) != null ? _ref1 : {\n    bottomIntersection: bottomPoint\n  };\n  return (topOverlap < botOverlap) && (!((botOverlap < ry) || (topOverlap > ry + rh)));\n};\n\nBounds.lineCirc = function(point1, point2, center, radius) {\n  var a, b, bb4ac, c, dx, dy, ix1, ix2, iy1, iy2, mu, testX, testY;\n  dx = x2 - x1;\n  dy = y2 - y1;\n  a = dx * dx + dy * dy;\n  b = 2 * (dx * (x1 - cx) + dy * (y1 - cy));\n  c = cx * cx + cy * cy;\n  c += x1 * x1 + y1 * y1;\n  c -= 2 * (cx * x1 + cy * y1);\n  c -= cr * cr;\n  bb4ac = b * b - 4 * a * c;\n  if (bb4ac < 0) {\n    return false;\n  }\n  mu = (-b + sqrt(b * b - 4 * a * c)) / (2 * a);\n  ix1 = x1 + mu * dx;\n  iy1 = y1 + mu * dy;\n  mu = (-b - sqrt(b * b - 4 * a * c)) / (2 * a);\n  ix2 = x1 + mu * dx;\n  iy2 = y1 + mu * dy;\n  if (dist(x1, y1, cx, cy) < dist(x2, y2, cx, cy)) {\n    testX = x2;\n    testY = y2;\n  } else {\n    testX = x1;\n    testY = y1;\n  }\n  if (dist(testX, testY, ix1, iy1) < dist(x1, y1, x2, y2) || dist(testX, testY, ix2, iy2) < dist(x1, y1, x2, y2)) {\n    return true;\n  }\n  return false;\n};\n\nnew Pool(Bounds);\n\nBoundsDebug = (function(_super) {\n\n  __extends(BoundsDebug, _super);\n\n  BoundsDebug.prototype.type = 'boundsDebug';\n\n  BoundsDebug.prototype.presets = {\n    color: Color.white,\n    opacity: 0.5,\n    fill: false\n  };\n\n  function BoundsDebug() {\n    this.color = Vec2();\n  }\n\n  BoundsDebug.prototype.reset = function(presets) {\n    Vec2.copy(this.color, presets.color);\n    this.opacity = presets.opacity, this.fill = presets.fill;\n    return this;\n  };\n\n  BoundsDebug.prototype.render = function(ctx) {\n    var bounds, size;\n    bounds = this.bounds;\n    ctx.save();\n    if (this.fill) {\n      ctx.fillStyle = Color.rgba(this.color, this.opacity * 0.5);\n    }\n    ctx.strokeStyle = Color.rgba(this.color, this.opacity);\n    ctx.lineWidth = 1;\n    this.transform.applyMatrix(ctx);\n    if (bounds.shape === 'circle') {\n      ctx.beginPath();\n      ctx.lineTo(0, bounds.radius);\n      ctx.moveTo(0, 0);\n      ctx.arc(0, 0, bounds.radius | 0, 0, Math.TAU);\n      if (this.fill) {\n        ctx.fill();\n      }\n      ctx.stroke();\n    } else {\n      size = bounds.size;\n      ctx.strokeRect(-size[0] / 2 | 0, -size[1] / 2 | 0, size[0] | 0, size[1] | 0);\n      if (this.fill) {\n        ctx.fillRect(-size[0] / 2 | 0, -size[1] / 2 | 0, size[0] | 0, size[1] | 0);\n      }\n    }\n    ctx.restore();\n    return this;\n  };\n\n  return BoundsDebug;\n\n})(Component);\n\nnew Pool(BoundsDebug);\n\nBounds.Debug = BoundsDebug;\n\nmodule.exports = Bounds;\n\n//@ sourceURL=/lib/core/bounds.js"
));

require.define("/lib/core/color.js",Function(['require','module','exports','__dirname','__filename','process','global'],"// Generated by CoffeeScript 1.5.0\nvar Color, typedArray;\n\nrequire('./math');\n\ntypedArray = Math.TypedArray;\n\nColor = function(fromOrR, g, b, a) {\n  var _ref;\n  if (g != null) {\n    return new typedArray([fromOrR, g, b, a != null ? a : 1]);\n  }\n  if (fromOrR != null) {\n    return new typedArray([fromOrR[0], fromOrR[1], fromOrR[2], (_ref = fromOrR[3]) != null ? _ref : 1]);\n  }\n  return new typedArray(Color.black);\n};\n\nColor.white = Color(255, 255, 255);\n\nColor.black = Color(0, 0, 0);\n\nColor.cache = [Color(), Color(), Color(), Color()];\n\nColor.set = function(result, r, g, b, a) {\n  result[0] = r || 0;\n  result[1] = g || 0;\n  result[2] = b || 0;\n  result[3] = a || 0;\n  return result;\n};\n\nColor.copy = function(result, b) {\n  result[0] = b[0];\n  result[1] = b[1];\n  result[2] = b[2];\n  result[3] = b[3];\n  return result;\n};\n\nColor.lerp = function(a, b, t, alpha, result) {\n  result || (result = a);\n  result[0] = (1 - t) * a[0] + t * b[0];\n  result[1] = (1 - t) * a[1] + t * b[1];\n  result[2] = (1 - t) * a[2] + t * b[2];\n  if (alpha > 0.05) {\n    result[3] = (1 - t) * a[3] + t * b[3];\n  } else {\n    result[3] = a[3];\n  }\n  return result;\n};\n\nColor.variant = function(a, t, result) {\n  t = Math.rand(-t, t);\n  return Color.lerp(a, (t > 0 ? Color.white : Color.black), t, false, result);\n};\n\nColor.rgba = function(a, alpha) {\n  alpha || (alpha = a[3]);\n  if (alpha > 0.98) {\n    return \"rgb(\" + (a[0] | 0) + \", \" + (a[1] | 0) + \", \" + (a[2] | 0) + \")\";\n  } else {\n    return \"rgba(\" + (a[0] | 0) + \", \" + (a[1] | 0) + \", \" + (a[2] | 0) + \", \" + alpha + \")\";\n  }\n};\n\nmodule.exports = Color;\n\n//@ sourceURL=/lib/core/color.js"
));

require.define("/lib/core/border.js",Function(['require','module','exports','__dirname','__filename','process','global'],"// Generated by CoffeeScript 1.5.0\nvar Border, Component, Engine, Pool, Vec2, pos,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nComponent = require('./component');\n\nPool = require('./pool');\n\nVec2 = require('./math').Vec2;\n\nEngine = require('./engine');\n\nBorder = (function(_super) {\n\n  __extends(Border, _super);\n\n  function Border() {\n    Border.__super__.constructor.apply(this, arguments);\n  }\n\n  Border.prototype.type = 'border';\n\n  Border.prototype.presets = {\n    mode: 'bounce',\n    restitution: 1\n  };\n\n  Border.prototype.reset = function(presets) {\n    this.mode = presets.mode, this.restitution = presets.restitution;\n    return this;\n  };\n\n  return Border;\n\n})(Component);\n\npos = Vec2();\n\nBorder.simulate = function(dt) {\n  var border, bounce, diff, hit, horizontal, kinetic, mirror, mode, parent, radius, restitution, size, vel, vertical, viewport, _i, _len, _ref;\n  size = Engine.renderer.content;\n  viewport = Engine.renderer.pos;\n  horizontal = Vec2.set(Vec2.cache[0], viewport[0], viewport[0] + size[0]);\n  vertical = Vec2.set(Vec2.cache[1], viewport[1], viewport[1] + size[1]);\n  _ref = this.roster;\n  for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n    border = _ref[_i];\n    if (!border.enabled) {\n      continue;\n    }\n    parent = border.parent, restitution = border.restitution, mode = border.mode, kinetic = border.kinetic;\n    vel = null;\n    if (kinetic) {\n      if (!kinetic.enabled || kinetic.sleeping) {\n        continue;\n      }\n      vel = kinetic.vel;\n    }\n    mirror = mode === 'mirror';\n    bounce = mode === 'bounce' && vel;\n    Vec2.copy(pos, parent.transform.pos);\n    radius = parent.bounds.radius;\n    if (mirror) {\n      radius *= -1;\n    }\n    hit = 0;\n    if ((diff = pos[0] - radius - horizontal[0]) < 0) {\n      if (mirror) {\n        pos[0] = horizontal[1] - radius;\n      } else {\n        pos[0] -= diff;\n        if (bounce) {\n          vel[0] *= -restitution;\n        }\n      }\n      hit = -1;\n    } else {\n      diff = pos[0] + radius - horizontal[1];\n      if (diff > 0) {\n        if (mirror) {\n          pos[0] = radius;\n        } else {\n          pos[0] -= diff;\n          if (bounce) {\n            vel[0] *= -restitution;\n          }\n        }\n        hit = -1;\n      }\n    }\n    if ((diff = pos[1] - radius - vertical[0]) < 0) {\n      if (mirror) {\n        pos[1] = vertical[1] - radius;\n      } else {\n        pos[1] -= diff;\n        if (bounce) {\n          vel[1] *= -restitution;\n        }\n      }\n      hit = 1;\n    } else {\n      diff = pos[1] + radius - vertical[1];\n      if (diff > 0) {\n        if (mirror) {\n          pos[1] = radius;\n        } else {\n          pos[1] -= diff;\n          if (bounce) {\n            vel[1] *= -restitution;\n          }\n        }\n        hit = 1;\n      }\n    }\n    if (hit != null) {\n      parent.transform.setTransform(pos);\n      parent.pub('onBorder', hit);\n      if (border.mode === 'kill') {\n        parent.free();\n      }\n    }\n  }\n  return this;\n};\n\nnew Pool(Border);\n\nmodule.exports = Border;\n\n//@ sourceURL=/lib/core/border.js"
));

require.define("/lib/core/component.js",Function(['require','module','exports','__dirname','__filename','process','global'],"// Generated by CoffeeScript 1.5.0\nvar Component;\n\nrequire('./math');\n\nComponent = (function() {\n\n  function Component() {}\n\n  Component.prototype.type = 'component';\n\n  Component.prototype.toString = function() {\n    return \"Component \" + this.type + \"#\" + this.uid + \" [\" + this.parent + \"]\";\n  };\n\n  Component.prototype.alloc = function(presets) {\n    var component, components, type;\n    this.parent.components[this.type] = this;\n    this.parent[this.type] = this;\n    components = this.parent.components;\n    for (type in components) {\n      if (!(type !== this.type)) {\n        continue;\n      }\n      this[type] = component = components[type];\n      component[this.type] = this;\n    }\n    if (this.reset) {\n      this.reset(presets);\n    }\n    return this;\n  };\n\n  Component.prototype.free = function() {\n    var components, type;\n    delete this.parent.components[this.type];\n    this.parent[this.type] = null;\n    components = this.parent.components;\n    for (type in components) {\n      if (!(type !== this.type)) {\n        continue;\n      }\n      this[components[type].type] = null;\n      components[type][this.type] = null;\n    }\n    this.pool.free(this);\n    return this;\n  };\n\n  Component.prototype.enable = function(state) {\n    this.enabled = state != null ? state : state = !this.state;\n    this.parent.pub('onComponent' + (state ? 'Enable' : 'Disable'), this);\n    return this;\n  };\n\n  Component.prototype.sub = function(scope, topic, method) {\n    if (scope == null) {\n      scope = this;\n    }\n    this.parent.sub(scope, topic, method);\n    return this;\n  };\n\n  return Component;\n\n})();\n\nmodule.exports = Component;\n\n//@ sourceURL=/lib/core/component.js"
));

require.define("/lib/core/composite.js",Function(['require','module','exports','__dirname','__filename','process','global'],"// Generated by CoffeeScript 1.5.0\nvar Composite, Pool;\n\nPool = require('./pool');\n\nComposite = (function() {\n\n  function Composite() {\n    this.children = {};\n    this.components = {};\n  }\n\n  Composite.prototype.toString = function() {\n    return \"Composite \" + (this.name || this.type) + \"#\" + this.uid;\n  };\n\n  Composite.prototype.alloc = function(presets) {\n    var child, pool, preset, type, _i, _len;\n    if (this.parent) {\n      this.parent.children[this.uid] = this;\n    }\n    if (presets) {\n      for (type in presets) {\n        preset = presets[type];\n        switch (type) {\n          case 'children':\n            for (_i = 0, _len = preset.length; _i < _len; _i++) {\n              child = preset[_i];\n              Composite.alloc(this, child);\n            }\n            break;\n          case 'name':\n            this.name = presets[type];\n            break;\n          default:\n            if ((pool = Pool.types[type])) {\n              pool.alloc(this, preset);\n            } else {\n              throw new Error(\"Unknown preset \" + type + \", expected component. \" + this);\n            }\n        }\n      }\n    }\n    return this;\n  };\n\n  Composite.prototype.free = function() {\n    var key, ref, refSubs, _i, _len;\n    if (refSubs = this.refSubs) {\n      for (_i = 0, _len = refSubs.length; _i < _len; _i++) {\n        ref = refSubs[_i];\n        ref.unsub(this);\n      }\n    }\n    this.refSubs = this.subs = null;\n    for (key in this.components) {\n      this.components[key].free();\n    }\n    for (key in this.children) {\n      this.children[key].free();\n    }\n    if (this.parent) {\n      delete this.parent.children[this.uid];\n    }\n    this.pool.free(this);\n    return this;\n  };\n\n  Composite.prototype.enable = function(state, deep) {\n    var key;\n    this.enabled = state != null ? state : state = !this.state;\n    this.parent.pub('on' + (state ? 'Enable' : 'Disable'), this);\n    for (key in this.components) {\n      this.components[key].enable(state);\n    }\n    if (deep) {\n      for (key in this.children) {\n        this.children[key].enable(state, true);\n      }\n    }\n    return this;\n  };\n\n  Composite.prototype.sub = function(scope, topic, method) {\n    var items, refs, subs;\n    if (scope == null) {\n      scope = this;\n    }\n    subs = this.subs || (this.subs = {});\n    items = subs[topic] || (subs[topic] = []);\n    items.push(scope, method);\n    if (scope !== this) {\n      refs = scope.refSubs || (scope.refSubs = []);\n      if (!~refs.indexOf(this)) {\n        refs.push(this);\n      }\n    }\n    return this;\n  };\n\n  Composite.prototype.pub = function(topic, a0, a1, a2, a3) {\n    var i, items, scope;\n    if (this.subs && (items = this.subs[topic]) && (i = items.length)) {\n      while (scope = items[i -= 2]) {\n        scope[items[i + 1] || topic](a0, a1, a2, a3);\n      }\n    }\n    return this;\n  };\n\n  Composite.prototype.pubUp = function(topic, a0, a1, a2, a3) {\n    var comp;\n    comp = this;\n    while (comp) {\n      if (comp.pub(topic, a0, a1, a2, a3) === false) {\n        break;\n      }\n      comp = comp.parent;\n    }\n    return this;\n  };\n\n  Composite.prototype.pubAll = function(topic, a0, a1, a2, a3) {\n    return Pool.call(topic, a0, a1, a2, a3);\n  };\n\n  Composite.prototype.unsub = function(unscope, untopic) {\n    var i, items, length, scope, subs, topic;\n    if (subs = this.subs) {\n      for (topic in subs) {\n        items = subs[topic];\n        if (!((i = items.length) && (!untopic || untopic === topic))) {\n          continue;\n        }\n        length = i / 2;\n        while ((i -= 2) >= 0) {\n          if (scope = items[i]) {\n            if (unscope && scope !== unscope) {\n              continue;\n            } else {\n              items[i] = null;\n            }\n            length--;\n          }\n        }\n        if (!length) {\n          items.length = 0;\n        }\n      }\n    }\n    return this;\n  };\n\n  return Composite;\n\n})();\n\nnew Pool(Composite);\n\nComposite.Prefab = (function() {\n\n  function Prefab(presets) {\n    var key;\n    this.presets = presets;\n    for (key in presets) {\n      presets[key] = this.presets[key] || {};\n    }\n  }\n\n  Prefab.prototype.alloc = function(parent, presets) {\n    var defaults, key, subKey, subPresets, value;\n    if ((defaults = this.presets) && presets) {\n      for (key in defaults) {\n        value = defaults[key];\n        if (!(key in presets)) {\n          presets[key] = value;\n        } else {\n          subPresets = presets[key];\n          if (key === 'children') {\n            subPresets.unshift.apply(subPresets, value);\n          } else if (typeof value === 'object') {\n            for (subKey in value) {\n              if (!(subKey in subPresets)) {\n                subPresets[subKey] = value[subKey];\n              }\n            }\n          }\n          delete presets[key];\n          presets[key] = subPresets;\n        }\n      }\n    }\n    return Composite.alloc(parent, presets || defaults);\n  };\n\n  return Prefab;\n\n})();\n\nmodule.exports = Composite;\n\n//@ sourceURL=/lib/core/composite.js"
));

require.define("/lib/core/transform.js",Function(['require','module','exports','__dirname','__filename','process','global'],"// Generated by CoffeeScript 1.5.0\nvar Component, Pool, Transform, Vec2,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nComponent = require('./component');\n\nPool = require('./pool');\n\nVec2 = require('./math').Vec2;\n\nTransform = (function(_super) {\n\n  __extends(Transform, _super);\n\n  Transform.prototype.type = 'transform';\n\n  Transform.prototype.presets = {\n    pos: Vec2(),\n    angle: 0\n  };\n\n  function Transform() {\n    this.pos = Vec2();\n  }\n\n  Transform.prototype.reset = function(presets) {\n    Vec2.copy(this.pos, presets.pos);\n    this.worldAngle = this.angle = presets.angle;\n    return this;\n  };\n\n  Transform.prototype.setTransform = function(pos, angle, silent) {\n    if (pos != null) {\n      Vec2.copy(this.pos, pos);\n    }\n    if (angle != null) {\n      this.angle = angle;\n    }\n    this.dirty = true;\n    if (!silent) {\n      this.parent.pub('onTransform', this.pos, this.angle);\n    }\n    return this;\n  };\n\n  Transform.prototype.toWorld = function() {\n    this.worldPos.copy(this.pos);\n    this.worldAngle = this.angle;\n    return this;\n  };\n\n  Transform.prototype.applyMatrix = function(ctx) {\n    ctx.translate(this.pos[0] | 0, this.pos[1] | 0);\n    if (this.angle) {\n      ctx.rotate(this.angle);\n    }\n    return this;\n  };\n\n  return Transform;\n\n})(Component);\n\nnew Pool(Transform);\n\nmodule.exports = Transform;\n\n//@ sourceURL=/lib/core/transform.js"
));

require.define("/lib/core/input.js",Function(['require','module','exports','__dirname','__filename','process','global'],"// Generated by CoffeeScript 1.5.0\nvar Component, Engine, Input, Pool, Vec2, pool,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nComponent = require('./component');\n\nPool = require('./pool');\n\nVec2 = require('./math').Vec2;\n\nEngine = require('./engine');\n\nInput = (function(_super) {\n\n  __extends(Input, _super);\n\n  Input.prototype.type = 'input';\n\n  Input.prototype.support = {\n    touch: 'ontouchstart' in window,\n    orientation: 'ondeviceorientation' in window\n  };\n\n  function Input() {\n    var code, key, type, _ref;\n    this.queue = [];\n    this.locks = {};\n    this.pos = Vec2();\n    this.prevPos = Vec2();\n    this.touchState = null;\n    this.axis = Vec2();\n    this.mouseAxis = Vec2();\n    this.orientation = Vec2();\n    this.prevOrientation = Vec2();\n    this.baseOrientation = Vec2();\n    this.map = {\n      32: 'space',\n      192: 'debug',\n      38: 'up',\n      39: 'right',\n      40: 'bottom',\n      37: 'left'\n    };\n    this.axisMap = {\n      left: Vec2(0, -1),\n      right: Vec2(0, 1),\n      up: Vec2(1, -1),\n      bottom: Vec2(1, 1)\n    };\n    this.keyNames = [];\n    this.keys = {};\n    _ref = this.map;\n    for (code in _ref) {\n      key = _ref[code];\n      if (!~this.keyNames.indexOf(key)) {\n        this.keyNames.push(key);\n        this.keys[key] = null;\n      }\n    }\n    this.throttled = {\n      mousemove: true,\n      deviceorientation: true\n    };\n    this.lastEvent = null;\n    this.events = this.support.touch ? {\n      touchstart: 'startTouch',\n      touchmove: 'moveTouch',\n      touchend: 'endTouch',\n      touchcancel: 'endTouch'\n    } : {\n      mousedown: 'startTouch',\n      mousemove: 'moveTouch',\n      mouseup: 'endTouch',\n      keydown: 'keyStart',\n      keyup: 'keyEnd'\n    };\n    for (type in this.events) {\n      window.addEventListener(type, this, false);\n    }\n  }\n\n  Input.prototype.handleEvent = function(event) {\n    var type;\n    if (event.metaKey) {\n      return;\n    }\n    event.preventDefault();\n    type = event.type;\n    if (this.throttled[type] && this.lastEvent === type) {\n      this.queue[this.queue.length - 1] = event;\n    } else {\n      this.lastEvent = type;\n      this.queue.push(event);\n    }\n    return this;\n  };\n\n  Input.prototype.keyStart = function(event) {\n    var axis, key;\n    if ((key = this.map[event.keyCode]) && !this.keys[key]) {\n      if (!this.lock('key-' + key)) {\n        return false;\n      }\n      this.keys[key] = 'began';\n      if ((axis = this.axisMap[key])) {\n        this.axis[axis[0]] += axis[1];\n      }\n      Engine.pub('onKeyBegan', key);\n    }\n    return this;\n  };\n\n  Input.prototype.keyEnd = function(event) {\n    var axis, key;\n    if (key = this.map[event.keyCode]) {\n      if (!this.lock('key-' + key)) {\n        return false;\n      }\n      this.keys[key] = 'ended';\n      if ((axis = this.axisMap[key])) {\n        this.axis[axis[0]] -= axis[1];\n      }\n      Engine.pub('onKeyEnded', key);\n    }\n    return this;\n  };\n\n  Input.prototype.startTouch = function(event) {\n    if (!this.lock('touch')) {\n      return false;\n    }\n    this.resolve(event);\n    if (!this.touchState && !event.metaKey) {\n      this.touchState = 'began';\n      Engine.pub('onTouchBegan');\n    }\n    return this;\n  };\n\n  Input.prototype.moveTouch = function(event) {\n    var state;\n    state = this.touchState;\n    if ((state === 'began' || state === 'ended') && !this.lock('touch')) {\n      return false;\n    }\n    this.resolve(event);\n    if (state && state !== 'ended' && state !== 'moved') {\n      this.touchState = 'moved';\n    }\n    return this;\n  };\n\n  Input.prototype.endTouch = function(event) {\n    if (!this.lock('touch')) {\n      return false;\n    }\n    this.resolve(event);\n    if (this.touchState && (!this.support.touch || !event.targetTouches.length)) {\n      Engine.pub('onTouchEnded');\n      this.touchState = 'ended';\n    }\n    return this;\n  };\n\n  Input.prototype.calibrateOrientation = function() {\n    this.baseOrientationTime = this.orientationTime;\n    Vec2.copy(this.baseOrientation, this.orientation);\n    Vec2.set(this.orientation);\n    return this;\n  };\n\n  Input.prototype.deviceOrientation = function(event) {\n    Vec2.copy(this.prevOrientation, this.orientation);\n    Vec2.sub(Vec2.set(this.orientation, event.gamma | 0, event.beta | 0), this.baseOrientation);\n    this.orientationTime = event.timeStamp / 1000;\n    if (!this.baseOrientationTime) {\n      this.calibrateOrientation();\n    }\n    return this;\n  };\n\n  Input.prototype.resolve = function(event) {\n    var coords, renderer;\n    coords = this.support.touch ? event.targetTouches[0] : event;\n    if (coords) {\n      this.prevTime = this.time;\n      this.time = event.timeStamp / 1000;\n      Vec2.copy(this.prevPos, this.pos);\n      renderer = Engine.renderer;\n      Vec2.set(this.pos, (coords.pageX - renderer.margin[0]) / renderer.scale | 0, (coords.pageY - renderer.margin[1]) / renderer.scale | 0);\n    }\n    return this;\n  };\n\n  Input.prototype.lock = function(key) {\n    if (this.locks[key] === this.frame) {\n      console.log('LOCKED: ' + key);\n      return false;\n    }\n    this.locks[key] = this.frame;\n    return true;\n  };\n\n  Input.prototype.lateUpdate = function(dt, scene) {\n    var event, key, keys, queue, type, _i, _len, _ref;\n    switch (this.touchState) {\n      case 'began':\n        this.touchState = 'stationary';\n        break;\n      case 'ended':\n        this.touchState = null;\n        break;\n    }\n    keys = this.keys;\n    _ref = this.keyNames;\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      key = _ref[_i];\n      switch (keys[key]) {\n        case 'began':\n          keys[key] = 'pressed';\n          break;\n        case 'ended':\n          keys[key] = null;\n          break;\n      }\n    }\n    this.frame = Engine.frame;\n    queue = this.queue;\n    while ((event = queue[0])) {\n      type = event.type;\n      if (!this[this.events[type]](event)) {\n        break;\n      }\n      queue.shift();\n    }\n    if (!queue.length) {\n      this.lastEvent = null;\n    }\n    return this;\n  };\n\n  return Input;\n\n})(Component);\n\npool = new Pool(Input);\n\nmodule.exports = Input;\n\n//@ sourceURL=/lib/core/input.js"
));

require.define("/lib/vendor/esl/container.js",Function(['require','module','exports','__dirname','__filename','process','global'],"// Generated by CoffeeScript 1.5.0\nvar Component, Engine, Esl, EslContainer, Pool, Vec2,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nComponent = require('./../../core/component');\n\nPool = require('./../../core/pool');\n\nVec2 = require('./../../core/math').Vec2;\n\nEsl = require('./esl');\n\nEngine = require('./../../core/engine');\n\nEslContainer = (function(_super) {\n\n  __extends(EslContainer, _super);\n\n  EslContainer.prototype.type = 'eslContainer';\n\n  function EslContainer() {}\n\n  EslContainer.prototype.reset = function(presets) {\n    var child, stage;\n    if (!(stage = this.root.eslStage)) {\n      stage = new Esl.Stage(Engine.renderer.buf);\n      stage.autoClear = false;\n      EslContainer.eslStage = stage;\n      this.root.eslStage = stage;\n    }\n    child = presets.child;\n    if (typeof child === 'function') {\n      child = child.call(this, presets);\n    }\n    stage.addChild(child);\n    this.child = child;\n    return this;\n  };\n\n  EslContainer.prototype.onTransform = function() {\n    return this;\n  };\n\n  EslContainer.prototype.onEnable = function() {\n    this.child.visible = true;\n    return this;\n  };\n\n  EslContainer.prototype.onDisable = function() {\n    this.child.visible = false;\n    return this;\n  };\n\n  EslContainer.prototype.free = function() {\n    this.root.eslStage.removeChild(this.child);\n    this.child = null;\n    return EslContainer.__super__.free.call(this);\n  };\n\n  return EslContainer;\n\n})(Component);\n\nEslContainer.render = function(dt) {\n  var child, container, transform, _i, _len, _ref;\n  _ref = this.roster;\n  for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n    container = _ref[_i];\n    if (!container.enabled) {\n      continue;\n    }\n    child = container.child, transform = container.transform;\n    Vec2.toObj(transform.pos, child);\n    child.rotation = transform.angle;\n  }\n  EslContainer.eslStage.update();\n  return this;\n};\n\nnew Pool(EslContainer);\n\nmodule.exports = EslContainer;\n\n//@ sourceURL=/lib/vendor/esl/container.js"
));

require.define("/lib/vendor/esl/esl.js",Function(['require','module','exports','__dirname','__filename','process','global'],"// Generated by CoffeeScript 1.5.0\nvar Ejs;\n\nEjs = require('./lib/easeljs');\n\nmodule.exports = Ejs;\n\n//@ sourceURL=/lib/vendor/esl/esl.js"
));

require.define("/lib/core/renderer.js",Function(['require','module','exports','__dirname','__filename','process','global'],"// Generated by CoffeeScript 1.5.0\nvar Bounds, Composite, Renderer, Vec2,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nComposite = require('./composite');\n\nBounds = require('./bounds');\n\nVec2 = require('./math').Vec2;\n\nRenderer = (function(_super) {\n\n  __extends(Renderer, _super);\n\n  function Renderer(element, client) {\n    var fullscreenChange, self;\n    this.element = element;\n    this.client = Vec2(client);\n    this.content = Vec2(client);\n    this.canvas = document.createElement('canvas');\n    this.element.appendChild(this.canvas);\n    this.ctx = this.canvas.getContext('2d');\n    this.browser = Vec2();\n    this.margin = Vec2();\n    this.pos = Vec2();\n    this.scale = 0;\n    this.orientation = 'landscape';\n    this.buffer = false;\n    this.buf = document.createElement('canvas');\n    this.bufctx = this.buf.getContext('2d');\n    this.buf.width = this.canvas.width = this.content[0];\n    this.buf.height = this.canvas.height = this.content[1];\n    this.element.style.width = this.content[0] + 'px';\n    this.element.style.height = this.content[1] + 'px';\n    window.addEventListener('resize', this, false);\n    self = this;\n    fullscreenChange = function() {\n      return self.fullscreenChange();\n    };\n    document.addEventListener('fullscreenchange', fullscreenChange(false));\n    document.addEventListener('mozfullscreenchange', fullscreenChange, false);\n    document.addEventListener('webkitfullscreenchange', fullscreenChange, false);\n    this.reflow();\n    this;\n  }\n\n  Renderer.prototype.isFullscreen = function() {\n    var doc;\n    doc = document;\n    return doc.fullscreen || doc.mozFullScreen || doc.webkitIsFullScreen;\n  };\n\n  Renderer.prototype.requestFullscreen = function() {\n    var target;\n    if (!this.isFullscreen()) {\n      target = this.element.parentNode;\n      if ('webkitRequestFullScreen' in target) {\n        target.webkitRequestFullScreen();\n      } else if ('mozRequestFullScreen' in target) {\n        target.mozRequestFullScreen();\n      }\n    }\n    return this;\n  };\n\n  Renderer.prototype.fullscreenChange = function() {\n    if (this.orientation) {\n      this.lockOrientation(this.orientation);\n    }\n    return this;\n  };\n\n  Renderer.prototype.lockOrientation = function(format) {\n    var target;\n    if (format == null) {\n      format = this.orientation;\n    }\n    target = window.screen;\n    if ('lockOrientation' in target) {\n      screen.lockOrientation(format);\n    } else if ('mozLockOrientation' in target) {\n      screen.mozLockOrientation(format);\n    }\n    return this;\n  };\n\n  Renderer.prototype.handleEvent = function() {\n    this.reflow();\n    return this;\n  };\n\n  Renderer.prototype.reflow = function() {\n    var browser, rule, scale;\n    browser = Vec2.set(this.browser, window.innerWidth, window.innerHeight);\n    scale = Math.min(this.browser[0] / this.content[0], this.browser[1] / this.content[1]);\n    if (scale !== this.scale) {\n      this.scale = scale;\n      Vec2.scal(this.content, this.scale, this.client);\n    }\n    Vec2.scal(Vec2.sub(browser, this.client, this.margin), 0.5);\n    rule = \"translate(\" + this.margin[0] + \"px, \" + this.margin[1] + \"px) scale(\" + this.scale + \")\";\n    this.element.style.transform = rule;\n    this.element.style.webkitTransform = rule;\n    return this;\n  };\n\n  Renderer.prototype.save = function() {\n    var ctx;\n    ctx = this.buffer ? this.bufctx : this.ctx;\n    ctx.clearRect(0, 0, this.content[0], this.content[1]);\n    ctx.save();\n    ctx.translate(this.pos[0] | 0, this.pos[1] | 0);\n    return ctx;\n  };\n\n  Renderer.prototype.restore = function() {\n    if (this.buffer) {\n      this.bufctx.restore();\n      this.ctx.clearRect(0, 0, this.content[0], this.content[1]);\n      this.ctx.drawImage(this.buf, 0, 0);\n    } else {\n      this.ctx.restore();\n    }\n    return this;\n  };\n\n  Renderer.prototype.center = function(pos) {\n    Vec2.set(this.pos, pos[0] - this.client[0] / 2, pos[0] - this.client[1] / 2);\n    return this;\n  };\n\n  Renderer.prototype.cull = function(entity) {\n    var bounds;\n    if (!(bounds = entity.bounds)) {\n      return false;\n    }\n    if (bounds.withinRect(this.pos, this.content)) {\n      if (bounds.culled) {\n        bounds.culled = false;\n      }\n      return false;\n    }\n    if (!bounds.culled) {\n      bounds.culled = true;\n    }\n    return true;\n  };\n\n  return Renderer;\n\n})(Composite);\n\nmodule.exports = Renderer;\n\n//@ sourceURL=/lib/core/renderer.js"
));

require.define("/lib/core/engine.js",Function(['require','module','exports','__dirname','__filename','process','global'],"// Generated by CoffeeScript 1.5.0\nvar Composite, Engine, Pool, Vec2, engine, perf, requestAnimationFrame,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nComposite = require('./composite');\n\nPool = require('./pool');\n\nVec2 = require('./math').Vec2;\n\nrequestAnimationFrame = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(callback) {\n  return setTimeout(callback, 20);\n};\n\nperf = window.performance || {};\n\nperf.now = perf.now || perf.webkitNow || perf.msNow || perf.mozNow || Date.now;\n\nEngine = (function(_super) {\n\n  __extends(Engine, _super);\n\n  function Engine() {\n    Engine.__super__.constructor.apply(this, arguments);\n  }\n\n  Engine.prototype.type = 'engine';\n\n  Engine.prototype.init = function(element) {\n    var Input,\n      _this = this;\n    this.element = element;\n    this.time = 0.0;\n    this.frame = 0;\n    this.tail = 0.0;\n    this.debug = {\n      step: false,\n      fps: false,\n      fpsLength: 0,\n      fpsSum: 0,\n      mspf: true,\n      mspfLength: 0,\n      mspfSum: 0,\n      stats: false,\n      profile: 0\n    };\n    this.fdt = 1 / 60;\n    this.dtCap = 0.5;\n    this.fdtCap = this.fdt * 5;\n    this.scale = 1;\n    this.fps = 0;\n    this.mspf = 0;\n    Input = require('./input');\n    Input.alloc(this);\n    return this.tickBound = function(now) {\n      return _this.tick(now);\n    };\n  };\n\n  Engine.prototype.play = function(scene) {\n    this.scene = scene;\n    this.input.root = this.scene;\n    if (this.debug.stats) {\n      this.startStats();\n    }\n    if (!this.running) {\n      return this.start();\n    }\n  };\n\n  Engine.prototype.start = function() {\n    this.running = true;\n    requestAnimationFrame(this.tickBound);\n    return this;\n  };\n\n  Engine.prototype.tick = function(now) {\n    var debug, dt, mspfStart;\n    now = (now && now < 1e12 ? now : perf.now()) / 1000;\n    debug = this.debug;\n    if (this.lastTime) {\n      if ((dt = now - this.lastTime) > 0.5) {\n        dt = this.fdt;\n      } else if (dt > 0.01) {\n        if (debug.fpsSum > 0.333) {\n          this.fps = debug.fpsLength / debug.fpsSum;\n          debug.fpsLength = 0;\n          debug.fpsSum = 0;\n        }\n        debug.fpsSum += dt;\n        debug.fpsLength++;\n      }\n      this.dt = (dt *= this.scale);\n      this.time += dt;\n      this.frame++;\n      if (debug._stats) {\n        debug._stats.begin();\n      }\n      if (debug.mspf) {\n        mspfStart = perf.now();\n      }\n      if (debug.profile && !debug.profileFrom) {\n        debug.profileFrom = debug.profile;\n        console.profile(\"Frame \" + debug.profileFrom);\n      }\n      this.update(dt);\n      if (debug.profileFrom) {\n        if (!--debug.profile) {\n          console.profileEnd(\"Frame \" + debug.profileFrom);\n          debug.profileFrom = 0;\n        }\n      }\n      if (debug.step) {\n        debugger;\n      }\n      if (debug.mspf) {\n        if (debug.mspfSum > 100) {\n          this.mspf = debug.mspfSum / debug.mspfLength;\n          debug.mspfLength = 0;\n          debug.mspfSum = 0;\n        }\n        debug.mspfSum += perf.now() - mspfStart;\n        debug.mspfLength++;\n      }\n      if (debug._stats) {\n        debug._stats.end();\n      }\n    } else {\n      this.time = now;\n    }\n    this.lastTime = now;\n    if (this.running) {\n      requestAnimationFrame(this.tickBound);\n    }\n    return this;\n  };\n\n  Engine.prototype.update = function(dt) {\n    var ctx, fdt, fps, mspf, tail;\n    ctx = this.renderer.save();\n    tail = Math.min(this.tail + dt, this.fdtCap * this.scale);\n    fdt = this.fdt;\n    while (tail > fdt) {\n      tail -= fdt;\n      Pool.invoke('fixedUpdate', fdt);\n      Pool.invoke('simulate', fdt);\n    }\n    this.tail = tail;\n    Pool.invoke('update', dt);\n    Pool.invoke('lateUpdate', dt);\n    Pool.invoke('render', ctx, dt);\n    if (this.debug.fps && this.fps < 55) {\n      fps = Math.round(this.fps);\n      ctx.fillStyle = 'black';\n      ctx.strokeStyle = 'white';\n      ctx.lineWidth = 2;\n      ctx.strokeText(fps, 2, 11);\n      ctx.fillText(fps, 2, 11);\n    }\n    if (this.debug.mspf) {\n      mspf = Math.round(this.mspf);\n      ctx.fillStyle = 'black';\n      ctx.strokeStyle = 'white';\n      ctx.lineWidth = 2;\n      ctx.strokeText(mspf, 2, 11);\n      ctx.fillText(mspf, 2, 11);\n    }\n    return this.renderer.restore();\n  };\n\n  Engine.prototype.startStats = function() {\n    var el, stats;\n    if (this.debug._stats || !window.Stats) {\n      return;\n    }\n    this.debug._stats = stats = new Stats();\n    el = stats.domElement;\n    el.style.position = 'absolute';\n    el.style.left = 0;\n    el.style.top = 0;\n    document.body.appendChild(el);\n    return this;\n  };\n\n  return Engine;\n\n})(Composite);\n\nengine = new Engine();\n\nif ('console' in window) {\n  window.mgame = console.m = {\n    pool: Pool.dump,\n    profile: function(frames) {\n      if (frames == null) {\n        frames = 60;\n      }\n      engine.debug.profile = frames;\n      return null;\n    },\n    step: function() {\n      engine.debug.step = !engine.debug.step;\n      return null;\n    }\n  };\n}\n\nmodule.exports = engine;\n\n//@ sourceURL=/lib/core/engine.js"
));

require.define("/lib/core/math.js",Function(['require','module','exports','__dirname','__filename','process','global'],"// Generated by CoffeeScript 1.5.0\nvar Mat, Vec2, abs, epsilon, fn, i, objCache, objVecCache, pow, powIn, radCache, random, sqrt, toInOut, toOut, transition, typedArray, _i, _len, _ref;\n\nMat = Math;\n\nsqrt = Mat.sqrt, pow = Mat.pow, abs = Mat.abs, random = Mat.random;\n\nMat.epsilon = epsilon = 0.001;\n\nMat.TypedArray = typedArray = Float64Array || Float32Array || function(arr) {\n  return arr;\n};\n\nMat.Vec2 = Vec2 = function(fromOrX, y) {\n  if (y != null) {\n    return new typedArray([fromOrX, y]);\n  }\n  if (fromOrX != null) {\n    return new typedArray(fromOrX);\n  }\n  return new typedArray(Vec2.zero);\n};\n\nVec2.zero = Vec2.center = Vec2(0, 0);\n\nVec2.cache = [Vec2(), Vec2(), Vec2(), Vec2(), Vec2()];\n\nVec2.topLeft = Vec2(-1, -1);\n\nVec2.topCenter = Vec2(0, -1);\n\nVec2.topRight = Vec2(1, -1);\n\nVec2.centerLeft = Vec2(-1, 0);\n\nVec2.centerRight = Vec2(1, 0);\n\nVec2.bottomLeft = Vec2(-1, 1);\n\nVec2.bottomCenter = Vec2(0, 1);\n\nVec2.bottomRight = Vec2(1, 1);\n\nradCache = [Vec2(), Vec2()];\n\nobjCache = {\n  x: 0,\n  y: 0\n};\n\nobjVecCache = Vec2();\n\nVec2.set = function(result, x, y) {\n  result[0] = x || 0;\n  result[1] = y || 0;\n  return result;\n};\n\nVec2.copy = function(result, b) {\n  result[0] = b[0];\n  result[1] = b[1];\n  return result;\n};\n\nVec2.valid = function(a) {\n  return !(isNaN(a[0]) || isNaN(a[1]));\n};\n\nVec2.toString = function(a) {\n  return \"[\" + a[0] + \", \" + a[1] + \"]\";\n};\n\nVec2.fromObj = function(obj, a) {\n  a || (a = objVecCache);\n  a[0] = obj.x;\n  a[1] = obj.y;\n  return a;\n};\n\nVec2.toObj = function(a, obj) {\n  obj || (obj = objCache);\n  obj.x = a[0];\n  obj.y = a[1];\n  return obj;\n};\n\nVec2.eq = function(a, b) {\n  return abs(a[0] - b[0]) < epsilon && abs(a[1] - b[1]) < epsilon;\n};\n\nVec2.add = function(a, b, result) {\n  result || (result = a);\n  result[0] = a[0] + b[0];\n  result[1] = a[1] + b[1];\n  return result;\n};\n\nVec2.sub = function(a, b, result) {\n  result || (result = a);\n  result[0] = a[0] - b[0];\n  result[1] = a[1] - b[1];\n  return result;\n};\n\nVec2.mul = function(a, b, result) {\n  result || (result = a);\n  result[0] = a[0] * b[0];\n  result[1] = a[1] * b[1];\n  return result;\n};\n\nVec2.scal = function(a, scalar, result) {\n  result || (result = a);\n  result[0] = a[0] * scalar;\n  result[1] = a[1] * scalar;\n  return result;\n};\n\nVec2.norm = function(a, result, scalar) {\n  var len, x, y;\n  result || (result = a);\n  x = a[0];\n  y = a[1];\n  len = (scalar || 1) / (sqrt(x * x + y * y) || 1);\n  result[0] = x * len;\n  result[1] = y * len;\n  return result;\n};\n\nVec2.lenSq = function(a) {\n  return a[0] * a[0] + a[1] * a[1];\n};\n\nVec2.len = function(a) {\n  return sqrt(a[0] * a[0] + a[1] * a[1]);\n};\n\nVec2.dot = function(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n};\n\nVec2.cross = function(a, b) {\n  return a[0] * b[1] - a[1] * b[0];\n};\n\nVec2.lerp = function(a, b, scalar, result) {\n  result || (result = a);\n  result[0] = a[0] + scalar * (b[0] - a[0]);\n  result[1] = a[1] + scalar * (b[1] - a[1]);\n  return result;\n};\n\nVec2.max = function(a, b, axis) {\n  if (axis != null) {\n    if (a[axis] > b[axis]) {\n      return a;\n    } else {\n      return b;\n    }\n  }\n  if (Vec2.lenSq(a) > Vec2.lenSq(b)) {\n    return a;\n  } else {\n    return b;\n  }\n};\n\nVec2.perp = function(a, result) {\n  var x;\n  result || (result = a);\n  x = a[0];\n  result[0] = a[1];\n  result[1] = -x;\n  return result;\n};\n\nVec2.dist = function(a, b) {\n  var x, y;\n  x = b[0] - a[0];\n  y = b[1] - a[1];\n  return sqrt(x * x + y * y);\n};\n\nVec2.distSq = function(a, b) {\n  var x, y;\n  x = b[0] - a[0];\n  y = b[1] - a[1];\n  return x * x + y * y;\n};\n\nVec2.limit = function(a, max, result) {\n  var ratio, x, y;\n  result || (result = a);\n  x = a[0];\n  y = a[1];\n  if ((ratio = max / sqrt(x * x + y * y)) < 1) {\n    result[0] = x * ratio;\n    result[1] = y * ratio;\n  } else if (result !== a) {\n    result[0] = x;\n    result[1] = y;\n  }\n  return result;\n};\n\nVec2.rad = function(a, b) {\n  if (!b) {\n    return Mat.atan2(a[1], a[0]);\n  }\n  return Mat.acos(Vec2.dot(Vec2.norm(a, radCache[0]), Vec2.norm(b, radCache[1])));\n};\n\nVec2.rot = function(a, theta, result) {\n  var cosA, sinA, x, y;\n  result || (result = a);\n  sinA = Mat.sin(theta);\n  cosA = Mat.cos(theta);\n  x = a[0];\n  y = a[1];\n  result[0] = x * cosA - y * sinA;\n  result[1] = x * sinA + y * cosA;\n  return result;\n};\n\nVec2.rotAxis = function(a, b, theta, result) {\n  return Vec2.add(Vec2.rot(Vec2.sub(a, b, result || a), theta), b);\n};\n\nVec2.lookAt = function(a, b, result) {\n  var len;\n  len = Vec2.len(a);\n  return Vec2.norm(Vec2.rot(a, Mat.atan2(b[0] - a[0], b[1] - a[1]) - Mat.atan2(a[1], a[0]), result || a), null, len);\n};\n\nrandom = Mat.random, pow = Mat.pow;\n\nMat.TAU = Mat.PI * 2;\n\nMat.UID = 1;\n\nMat.uid = function() {\n  return Mat.UID++;\n};\n\nMat.clamp = function(a, low, high) {\n  if (a < low) {\n    return low;\n  }\n  if (a > high) {\n    return high;\n  } else {\n    return a;\n  }\n};\n\nMat.rand = function(low, high, ease) {\n  return (ease || Mat.linear)(random()) * (high - low) + low;\n};\n\nMat.randArray = function(array) {\n  return array[random() * array.length | 0];\n};\n\nMat.chance = function(chance) {\n  return random() <= chance;\n};\n\npowIn = function(strength) {\n  if (strength == null) {\n    strength = 2;\n  }\n  return function(t) {\n    return pow(t, strength);\n  };\n};\n\ntoOut = function(fn) {\n  return function(t) {\n    return 1 - fn(1 - t);\n  };\n};\n\ntoInOut = function(fn) {\n  return function(t) {\n    return (t < 0.5 ? fn(t * 2) : 2 - fn(2 * (1 - t))) / 2;\n  };\n};\n\nMat.linear = function(t) {\n  return t;\n};\n\n_ref = ['quad', 'cubic', 'quart', 'quint'];\nfor (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {\n  transition = _ref[i];\n  Mat[transition + 'In'] = fn = powIn(i + 2);\n  Mat[transition + 'Out'] = toOut(fn);\n  Mat[transition + 'InOut'] = toInOut(fn);\n}\n\nmodule.exports.Vec2 = Vec2;\n\n//@ sourceURL=/lib/core/math.js"
));

require.define("/lib/core/pool.js",Function(['require','module','exports','__dirname','__filename','process','global'],"// Generated by CoffeeScript 1.5.0\nvar Pool, fn, _i, _len, _ref;\n\nrequire('./math');\n\nPool = (function() {\n  var invoke;\n\n  Pool.typedHooks = ['fixedUpdate', 'simulate', 'update', 'lateUpdate', 'render'];\n\n  Pool.regxHook = /^on[A-Z]/;\n\n  Pool.regxGetter = /^get[A-Z]/;\n\n  Pool.hooks = {};\n\n  Pool.types = {};\n\n  Pool.defaults = {};\n\n  Pool.order = {\n    render: false\n  };\n\n  Pool.prototype.toString = function() {\n    return \"Pool {@type} [\" + this.roster.length + \"]\";\n  };\n\n  function Pool(cls) {\n    var fn, key, keys, proto, types, _i, _j, _len, _len1,\n      _this = this;\n    this.cls = cls;\n    proto = cls.prototype;\n    this.type = proto.type;\n    this.isComponent = this.type && this.type !== 'composite';\n    this.light = (!this.isComponent) || proto.light || false;\n    if (this.type) {\n      Pool.types[this.type] = this;\n    }\n    proto.pool = this;\n    cls.pool = this;\n    this.roster = [];\n    this.subs = [];\n    this.hooks = [];\n    this.enabled = false;\n    this.allocd = 0;\n    this.layer = proto.layer || cls.layer || 0;\n    if (this.isComponent) {\n      if (!this.light) {\n        types = Pool.typedHooks;\n        keys = Object.keys(proto).concat(Object.keys(cls));\n        for (_i = 0, _len = keys.length; _i < _len; _i++) {\n          fn = keys[_i];\n          if (Pool.regxHook.test(fn)) {\n            if (!~types.indexOf(fn)) {\n              types.push(fn);\n              Pool.hooks[fn] = [];\n            }\n            this.subs.push(fn);\n          } else if (Pool.regxGetter.test(fn)) {\n            key = fn.substr(3, 1).toLowerCase() + fn.substr(4);\n            Pool.defineGetter(proto, key, fn);\n          }\n        }\n        for (_j = 0, _len1 = types.length; _j < _len1; _j++) {\n          fn = types[_j];\n          if (fn in cls) {\n            this[fn] = cls[fn];\n            Pool.hooks[fn].push(this);\n          } else if (fn in proto) {\n            this.hooks.push(fn);\n          }\n        }\n      }\n    }\n    cls.alloc = function(parent, presets) {\n      return _this.alloc(parent, presets);\n    };\n  }\n\n  Pool.prototype.preinstantiate = function(i) {\n    while (i--) {\n      this.instantiate();\n    }\n    return this;\n  };\n\n  Pool.prototype.instantiate = function() {\n    var cls, hook, _i, _len, _ref;\n    cls = new this.cls();\n    this.roster.push(cls);\n    _ref = this.hooks;\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      hook = _ref[_i];\n      Pool.hooks[hook].push(cls);\n    }\n    return cls;\n  };\n\n  Pool.prototype.alloc = function(parent, presets) {\n    var defaults, entity, hook, i, roster, topic, uid, _i, _j, _len, _len1, _ref, _ref1;\n    roster = this.roster;\n    i = roster.length;\n    while (i--) {\n      if (!roster[i].allocd) {\n        entity = roster[i];\n        break;\n      }\n    }\n    if (!entity) {\n      entity = this.instantiate();\n    }\n    this.allocd++;\n    this.enabled = true;\n    _ref = this.hooks;\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      hook = _ref[_i];\n      if (hook in Pool.order) {\n        Pool.order[hook] = true;\n      }\n    }\n    entity.uid = uid = Math.uid();\n    entity.enabled = true;\n    entity.allocd = true;\n    entity.parent = parent || null;\n    entity.root = parent && parent.root || parent || entity;\n    entity.layer = (parent && parent.layer || 0) + this.layer + 2 - 1 / uid;\n    if (entity.root.descendants) {\n      entity.root.descendants[uid] = entity;\n    } else {\n      entity.descendants = {};\n    }\n    if (this.isComponent) {\n      if (defaults = entity.presets) {\n        if (presets && !presets._merged) {\n          presets.__proto__ = defaults;\n          presets._merged = true;\n        }\n      }\n      _ref1 = this.subs;\n      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {\n        topic = _ref1[_j];\n        parent.sub(entity, topic);\n      }\n    }\n    entity.alloc(presets || defaults || null);\n    return entity;\n  };\n\n  Pool.prototype.free = function(entity) {\n    if (entity.root === entity) {\n      entity.descendants = null;\n    } else if (entity.root.descendants) {\n      delete entity.root.descendants[entity.uid];\n    }\n    entity.enabled = false;\n    entity.allocd = false;\n    entity.uid = null;\n    entity.root = null;\n    entity.parent = null;\n    this.enabled = this.allocd-- > 1;\n    return this;\n  };\n\n  invoke = function(fn, a0, a1, a2, a3) {\n    var entity, _i, _len, _ref;\n    _ref = this.roster;\n    for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n      entity = _ref[_i];\n      if (entity.enabled) {\n        entity[fn](a0, a1, a2, a3);\n      }\n    }\n    return this;\n  };\n\n  return Pool;\n\n})();\n\n_ref = Pool.typedHooks;\nfor (_i = 0, _len = _ref.length; _i < _len; _i++) {\n  fn = _ref[_i];\n  Pool.hooks[fn] = [];\n}\n\nPool.dump = function(free) {\n  var pool, type, _ref1;\n  _ref1 = Pool.types;\n  for (type in _ref1) {\n    pool = _ref1[type];\n    console.log(\"%s: %d/%d allocd\", type, pool.allocd, pool.roster.length);\n  }\n  if (free) {\n    Pool.free();\n  }\n  return null;\n};\n\nPool.defineGetter = function(proto, key, fn) {\n  Object.defineProperty(proto, key, {\n    get: proto[fn],\n    enumerable: true,\n    configurable: true\n  });\n  return proto;\n};\n\nPool.free = function() {\n  var freed, i, pool, roster, type, _ref1;\n  _ref1 = Pool.types;\n  for (type in _ref1) {\n    pool = _ref1[type];\n    roster = pool.roster;\n    i = roster.length;\n    freed = 0;\n    while (i--) {\n      if (!(!roster[i].allocd)) {\n        continue;\n      }\n      roster.splice(i, 1);\n      freed++;\n    }\n    console.log(\"%s: %d/%d freed\", type, freed, pool.roster.length);\n  }\n  return this;\n};\n\nPool.invoke = function(fn, a0, a1, a2, a3) {\n  var i, stack;\n  if ((stack = this.hooks[fn]) && (i = stack.length)) {\n    if (fn in Pool.order && Pool.order[fn]) {\n      stack.sort(Pool.orderFn);\n      Pool.order[fn] = false;\n    }\n    while (i--) {\n      if (stack[i].enabled) {\n        stack[i][fn](a0, a1, a2, a3);\n      }\n    }\n  }\n  return this;\n};\n\nPool.orderFn = function(a, b) {\n  return b.layer - a.layer;\n};\n\nmodule.exports = Pool;\n\n//@ sourceURL=/lib/core/pool.js"
));

require.define("/examples/esl/index.js",Function(['require','module','exports','__dirname','__filename','process','global'],"// Generated by CoffeeScript 1.5.0\n'use strict';\nvar Color, Component, Composite, Container, Engine, Esl, GameController, Pool, Renderer, Vec2,\n  __hasProp = {}.hasOwnProperty,\n  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };\n\nVec2 = require('../../lib/core/math').Vec2;\n\nEngine = require('../../lib/core/engine');\n\nEngine.init(document.getElementById('game-1'));\n\nRenderer = require('../../lib/core/renderer');\n\nEngine.renderer = new Renderer(Engine.element.getElementsByClassName('game-canvas')[0], Vec2(480, 290));\n\nComposite = require('../../lib/core/composite');\n\nComponent = require('../../lib/core/component');\n\nPool = require('../../lib/core/pool');\n\nColor = require('../../lib/core/color');\n\nrequire('../../lib/core/transform');\n\nrequire('../../lib/core/border');\n\nContainer = require('../../lib/vendor/esl/container');\n\nEsl = require('../../lib/vendor/esl/esl');\n\nGameController = (function(_super) {\n\n  __extends(GameController, _super);\n\n  function GameController() {\n    GameController.__super__.constructor.apply(this, arguments);\n  }\n\n  GameController.prototype.type = 'gameController';\n\n  GameController.prototype.reset = function() {\n    var i, _i;\n    this.root.gravity = Vec2(0, 0);\n    for (i = _i = 0; _i <= 1; i = ++_i) {\n      this.spawnBox();\n    }\n    return this;\n  };\n\n  GameController.prototype.spawnBox = function() {\n    Composite.alloc(this.root, {\n      transform: {\n        pos: Vec2(Math.rand(25, 450), Math.rand(25, 265))\n      },\n      eslContainer: {\n        child: function() {\n          var circle;\n          circle = new Esl.Shape();\n          circle.graphics.beginFill(\"red\").drawCircle(0, 0, 40);\n          return circle;\n        }\n      }\n    });\n    return this;\n  };\n\n  return GameController;\n\n})(Component);\n\nnew Pool(GameController);\n\nEngine.gameScene = Composite.alloc(null, {\n  gameController: null\n});\n\nEngine.debug.stats = true;\n\nEngine.play(Engine.gameScene);\n\n//@ sourceURL=/examples/esl/index.js"
));
require("/examples/esl/index.js");
})();
