{"version":3,"sources":["index.js","control/catapult.js","core/bounds.js","core/component.js","core/context.js","core/entity.js","core/event.js","core/input.js","core/registry.js","core/renderer.js","core/shims.js","core/sprite.js","core/transform.js","debug/console.js","labs/attraction.js","labs/avoid.js","labs/bezier.js","labs/cubicBezier.js","labs/fmath.js","labs/heightmap.js","labs/perlin.js","labs/seek.js","labs/spring.js","labs/tween.js","labs/wander.js","math/color.js","math/mat2.js","math/mathf.js","math/random.js","math/tweens.js","math/vec2.js","physics/body.js","physics/boid.js","physics/border.js","physics/collider.js","physics/jitter.js","physics/particle.js","physics/physics.js","box2d-js/index.js","box2dweb/b2.js","box2dweb/body.js","pixi/index.js"],"names":[],"mappings":"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","file":"acme.js","sourcesContent":["\nexport * from './math/mathf'\nexport * from './math/random'\nexport * from './core/sprite'\nexport * from './vendor/pixi'\n// export * from './vendor/box2d-js'\nimport Body from './physics/body'\nimport Boid from './physics/boid'\nimport Border from './physics/border'\nimport Bounds from './core/bounds'\nimport Collider from './physics/collider'\nimport Color from './math/color'\nimport Component from './core/component'\nimport Console from './debug/console'\nimport Context from './core/context'\nimport Entity from './core/entity'\nimport Event from './core/event'\nimport Input from './core/input'\nimport Jitter from './physics/jitter'\nimport Mat2 from './math/mat2'\nimport Particle from './physics/particle'\nimport Physics from './physics/physics'\nimport Registry from './core/registry'\nimport Renderer from './core/renderer'\nimport Shims from './core/shims'\nimport Transform from './core/transform'\nimport Tweens from './math/tweens'\nimport Vec2 from './math/vec2'\n\nexport {\n\tBody,\n\tBoid,\n\tBorder,\n\tBounds,\n\tCollider,\n\tColor,\n\tComponent,\n\tConsole,\n\tContext,\n\tEntity,\n\tEvent,\n\tInput,\n\tJitter,\n\tMat2,\n\tParticle,\n\tPhysics,\n\tRegistry,\n\tRenderer,\n\tShims,\n\tTransform,\n\tTweens,\n\tVec2\n}","'use strict';\n\nvar Context = require('./context');\nvar Component = require('./component');\nvar Vec2 = require('../math/vec2');\nvar Color = require('./color');\n\nfunction Catapult() {\n\tthis.position = Vec2();\n\tthis.color = Color();\n\tthis.start = Vec2();\n\tthis.end = Vec2();\n\tthis.impulse = Vec2();\n\tthis.impulseNorm = Vec2();\n}\n\nCatapult.prototype = {\n\n\tattributes: {\n\t\tposition: Vec2(),\n\t\tcolor: Color.white\n\t},\n\n\tcreate: function(attributes) {\n\t\tVec2.copy(this.position, attributes.position);\n\t\tColor.copy(this.color, attributes.color);\n\t\tthis.state = null;\n\t\tthis.radius = 90;\n\t\tthis.listenRadius = this.radius * 0.15;\n\t\tthis.fireRadius = this.radius * 0.1;\n\t\tthis.listenRadiusSq = this.listenRadius * this.listenRadius;\n\t\tVec2.set(this.impulse);\n\t},\n\n\tupdate: function(dt) {\n\t\tif (this.state === 'fired') {\n\t\t\tthis.entity.emit('onCatapultFire', this.impulseNorm);\n\t\t}\n\n\t\tvar input = Context.input;\n\n\t\tswitch (this.state) {\n\t\t\tcase 'active':\n\t\t\t\tswitch (input.touchState) {\n\t\t\t\t\tcase 'moved':\n\t\t\t\t\t\tvar end = Vec2.copy(cache, input.position);\n\t\t\t\t\t\tVec2.limit(Vec2.sub(end, this.start, this.impulse), this.radius);\n\t\t\t\t\t\tif (Vec2.len(this.impulse) < this.fireRadius) {\n\t\t\t\t\t\t\tVec2.set(this.impulse);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tVec2.scale(this.impulse, 1 / this.radius, this.impulseNorm);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ended':\n\t\t\t\t\t\tif (Vec2.dist(this.start, input.position) < this.fireRadius) {\n\t\t\t\t\t\t\tthis.state = null;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.state = 'fired';\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase 'fired':\n\t\t\t\tthis.state = null;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tif (input.touchState === 'began' &&\n\t\t\t\t\tVec2.distSq(input.position, this.position) <= this.listenRadiusSq) {\n\t\t\t\t\tthis.state = 'active';\n\t\t\t\t\tVec2.copy(this.start, input.position);\n\t\t\t\t\tVec2.set(this.impulse);\n\t\t\t\t\tVec2.set(this.impulseNorm);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t},\n\n\trender: function(ctx) {\n\t\tvar active = this.state === 'active';\n\t\tvar pos = this.position;\n\n\t\tthis.color[3] = active ? 1 : 0.3;\n\n\t\tctx.strokeStyle = Color.rgba(this.color);\n\t\tctx.beginPath();\n\t\tctx.arc(pos[0] | 0, pos[1] | 0, this.listenRadius, 0, Math.TAU, true);\n\t\tctx.closePath();\n\t\tctx.stroke();\n\n\t\tif (active) {\n\t\t\tvar target = Vec2.add(pos, this.impulse, cache);\n\t\t\tctx.lineWidth = 1;\n\t\t\tthis.color[3] = 0.5;\n\t\t\tctx.strokeStyle = Color.rgba(this.color);\n\t\t\tthis.color[3] = 0.2;\n\t\t\tctx.fillStyle = Color.rgba(this.color);\n\t\t\tctx.beginPath();\n\t\t\tctx.arc(target[0] | 0, target[1] | 0, this.fireRadius, 0, Math.TAU, true);\n\t\t\tctx.closePath();\n\t\t\tctx.stroke();\n\t\t\tctx.fill();\n\t\t}\n\t}\n\n};\n\nvar cache = Vec2();\n\nnew Component('catapult', Catapult);\n\nmodule.exports = Catapult;","\nimport Component from './component'\nimport Registry from './registry'\nimport Color from '../math/color'\nimport {clamp, TAU} from '../math/mathf'\nimport Vec2 from '../math/vec2'\nimport {random} from '../math/random'\n\nlet _position = Vec2();\n\n/**\n * @class Bounds\n * Tracks shape and dimensions of an entity.\n * TODO: Shapes into poolable objects\n * TODO: https://github.com/photonstorm/phaser/blob/master/Phaser/Collision.ts\n * @extends Component\n * @property {String} shape \"circle\" or \"rect\"\n * @property {Number} radius Circle radius\n * @property {Number[]} size Rect size\n */\nexport default class Bounds extends Component {\n\tconstructor() {\n\t\tComponent.call(this);\n\t\tthis.shape = 'rect';\n\t\tthis.radius = 0.0;\n\t\tthis._size = Vec2();\n\t\tthis._anchor = Vec2();\n\t\tthis._topLeft = Vec2();\n\t\tthis._bottomRight = Vec2();\n\t\tthis._position = _position;\n\t}\n\n\tcreate() {\n\t\tthis._position = this.components.transform.position;\n\t}\n\n\tget attributes() {\n\t\treturn {\n\t\t\tshape: 'rect',\n\t\t\tradius: 0.0,\n\t\t\tsize: Vec2(),\n\t\t\tanchor: Vec2.center\n\t\t};\n\t}\n\n\tintersectLine(a1, a2, result) {\n\t\tif (this.shape == 'circle') {\n\t\t\treturn intersectLineCircle(a1, a2, this._position, this.radius, result);\n\t\t}\n\t\treturn false;\n\t}\n\n\tcontains(point) {\n\t\tif (this.shape == 'circle') {\n\t\t\treturn circleContains(\n\t\t\t\tthis._position,\n\t\t\t\tthis.radius,\n\t\t\t\tpoint\n\t\t\t);\n\t\t}\n\t\treturn rectangleContains(this.topLeft, this._size, point);\n\t}\n\n\tintersectRect(topLeft, size) {\n\t\tif (this.shape == 'circle') {\n\t\t\treturn intersectCircleRectangle(\n\t\t\t\ttopLeft,\n\t\t\t\tsize,\n\t\t\t\tthis._position,\n\t\t\t\tthis.radius\n\t\t\t);\n\t\t}\n\t\treturn intersectRectangle(this.topLeft, this._size, topLeft, size);\n\t}\n\n\tget top() {\n\t\tif (this.shape == 'circle') {\n\t\t\treturn this._position[1] - this.radius;\n\t\t}\n\t\treturn this._position[1] - this._size[1] * this._anchor[1];\n\t}\n\n\tget bottom() {\n\t\tif (this.shape == 'circle') {\n\t\t\treturn this._position[1] + this.radius;\n\t\t}\n\t\treturn this._position[1] + this._size[1] * this._anchor[1];\n\t}\n\n\tget left() {\n\t\tif (this.shape == 'circle') {\n\t\t\treturn this._position[0] - this.radius;\n\t\t}\n\t\treturn this._position[0] - this._size[0] * this._anchor[0];\n\t}\n\n\tget right() {\n\t\tif (this.shape == 'circle') {\n\t\t\treturn this._position[0] + this.radius;\n\t\t}\n\t\treturn this._position[0] + this._size[0] * this._anchor[0];\n\t}\n\n\tget width() {\n\t\tif (this.shape == 'circle') {\n\t\t\treturn this.radius * 2;\n\t\t}\n\t\treturn this._size[0];\n\t}\n\n\tget height() {\n\t\tif (this.shape == 'circle') {\n\t\t\treturn this.radius * 2;\n\t\t}\n\t\treturn this._size[1];\n\t}\n\n\tget topLeft() {\n\t\treturn Vec2.sub(\n\t\t\tthis._position,\n\t\t\tVec2.mul(this._size, this._anchor, this._topLeft),\n\t\t\tthis._topLeft\n\t\t);\n\t}\n\n\tget bottomRight() {\n\t\treturn Vec2.add(\n\t\t\tthis._position,\n\t\t\tVec2.mul(this._size, this._anchor, this._bottomRight),\n\t\t\tthis._topLeft\n\t\t);\n\t}\n};\n\nVec2.defineProperty(Bounds, 'size');\nVec2.defineProperty(Bounds, 'anchor');\n\nComponent.create(Bounds, 'bounds');\n\nlet v = Vec2();\nlet w = Vec2();\nlet lineCircTest = Vec2();\n\n/**\n * Intersection circle/point\n * http://www.openprocessing.org/user/54\n * @param {Number[]} center\n * @param {Number} radius\n * @param {Number[]} point\n * @return {Boolean}\n */\nexport function circleContains(center, radius, point) {\n\treturn Vec2.distSq(point, center) <= radius * radius;\n}\n\n/**\n * Intersection rectangle/point\n * @param {Number[]} topLeft\n * @param {Number[]} size\n * @param {Number[]} point\n * @return {Boolean}\n */\nexport function rectangleContains(topLeft, size, point) {\n\treturn topLeft[0] - size[0] < point[0] &&\n\t\ttopLeft[1] < point[1] &&\n\t\ttopLeft[0] + size[0] > point[0] &&\n\t\ttopLeft[1] + size[1] > point[1];\n}\n\n/**\n * Closes point to a line\n * http://blog.generalrelativity.org/actionscript-30/collision-detection-circleline-segment-circlecapsule/\n * @param {Number[]} a Line P1\n * @param {Number[]} b Line P2\n * @param {Number[]} point Point\n * @param {Number[]} result Result\n * @return {Number[]} Result\n */\nexport function closestLinePoint(a, b, point, result) {\n\tVec2.sub(b, a, v);\n\tVec2.sub(point, a, w);\n\tlet t = Mathf.clamp(Vec2.dot(w, v) / Vec2.dot(v, v), 0, 1);\n\treturn Vec2.add(a, Vec2.scale(v, t, result));\n}\n\n/**\n * Intersection line/circle\n *\n * @static\n * @param {Number[]} a Line P1\n * @param {Number[]} b Line P2\n * @param {Number[]} center Circle center\n * @param {Number} radius Circe radius\n * @param {Number[]} result Result vector\n * @return {Number[]|Boolean}\n */\nexport function intersectLineCircle(a, b, center, radius, result) {\n\tclosestLinePoint(a, b, center, lineCircTest);\n\tVec2.sub(lineCircTest, center);\n\tif (Vec2.dot(lineCircTest, lineCircTest) > radius * radius) {\n\t\treturn false;\n\t}\n\tif (!result) {\n\t\treturn true;\n\t}\n\treturn Vec2.copy(result, lineCircTest);\n}\n\n/**\n * Intersection rectangle/circle\n *\n * http://stackoverflow.com/questions/401847/circle-rectangle-collision-detection-intersection/402010#402010\n *\n * @param {Number[]} topLeft Rectangle top-left point\n * @param {Number[]} size Rectangle size\n * @param {Number[]} center Circle center\n * @param {Number} radius Circle radius\n * @return {Boolean}\n */\nexport function intersectCircleRectangle(topLeft, size, center, radius) {\n\tlet circleDistanceX = Math.abs(center[0] - topLeft[0] - size[0] / 2);\n\tlet circleDistanceY = Math.abs(center[1] - topLeft[1] - size[1] / 2);\n\tif (circleDistanceX > (size[0] / 2 + radius) || circleDistanceY > (size[1] / 2 + radius)) {\n\t\treturn false;\n\t}\n\tif (circleDistanceX <= size[0] / 2 || circleDistanceY <= size[1] / 2) {\n\t\treturn true;\n\t}\n\tlet cornerDistance = Math.pow(circleDistanceX - size[0] / 2, 2) + Math.pow(circleDistanceY - size[1] / 2, 2);\n\treturn cornerDistance <= Math.pow(radius, 2);\n}\n\n/**\n * Intersection rectangle/rectangle\n *\n * @param {Number[]} pos\n * @param {Number[]} size\n * @param {Number[]} topLeft2\n * @param {Number[]} size2\n * @return {Boolean}\n */\nexport function intersectRectangle(topLeft, size, topLeft2, size2) {\n\treturn !(\n\t\ttopLeft[0] > topLeft2[0] + size2[0] ||\n\t\ttopLeft[0] + size[0] < topLeft2[0] ||\n\t\ttopLeft[1] > topLeft2[1] + size2[1] ||\n\t\ttopLeft[1] + size[1] < topLeft2[1]\n\t);\n}\n\n/**\n * Random point in rectangle\n */\nexport function randomPointInRectangle(point, pos, size) {\n\tVec2.set(point, random(0, size[0]), random(0, size[1]));\n\treturn Vec2.add(point, pos);\n}\n\n/*\ngetAabb() {\n\tif (!this.topLeft) {\n\t\tthis.topLeft = Vec2();\n\t\tthis.bottomRight = Vec2();\n\t}\n\tVec2.set(\n\t\tthis.topLeft,\n\t\tthis.position[0] + this._size[0] * 0.5 * (this.align[0] + 1),\n\t\tthis.position[1] + this._size[1] * 0.5 * (this.align[1] + 1)\n\t);\n\tVec2.set(\n\t\tthis.bottomRight,\n\t\tthis.position[0] + this._size[0] * 0.5 * (this.align[0] + 5),\n\t\tthis.position[1] + this._size[1] * 0.5 * (this.align[1] + 5)\n\t);\n\treturn this.topLeft;\n},\n*/\n\n\n/***\n * Intersection line/rectangle\n *\nexport function lineRect(point1, point2, topLeft, size) {\n\t// Calculate m and c for the equation for the line (y = mx+c)\n\tm = (a1[1] - y0) / (a1[0] - x0);\n\tc = y0 - (m * x0);\n\n\t// if the line is going up from right to left then the top intersect point is on the left\n\tif (m > 0) {\n\t\ttop_intersection = (m * l + c);\n\t\tbottom_intersection = (m * r + c);\n\t}\n\t// otherwise it's on the right\n\telse {\n\t\ttop_intersection = (m * r + c);\n\t\tbottom_intersection = (m * l + c);\n\t}\n\n\t// work out the top and bottom extents for the triangle\n\tif (y0 < a1[1]) {\n\t\ttoptrianglepoint = y0;\n\t\tbottomtrianglepoint = a1[1];\n\t} else {\n\t\ttoptrianglepoint = a1[1];\n\t\tbottomtrianglepoint = y0;\n\t}\n\n\tlet topoverlap: Number;\n\tlet botoverlap: Number;\n\n\t// and calculate the overlap between those two bounds\n\ttopoverlap = top_intersection > toptrianglepoint ? top_intersection : toptrianglepoint;\n\tbotoverlap = bottom_intersection < bottomtrianglepoint ? bottom_intersection : bottomtrianglepoint;\n\n\t// (topoverlap<botoverlap) :\n\t// if the intersection isn't the right way up then we have no overlap\n\n\t// (!((botoverlap<t) || (topoverlap>b)) :\n\t// If the bottom overlap is higher than the top of the rectangle or the top overlap is\n\t// lower than the bottom of the rectangle we don't have intersection. So return the negative\n\t// of that. Much faster than checking each of the points is within the bounds of the rectangle.\n\treturn (topoverlap < botoverlap) && (!((botoverlap < t) || (topoverlap > b)));\n};\n*/\n\n/*\nexport function lineCirc(point1, point2, center, radius) {\n\tlet a, b, bb4ac, c, dx, dy, ia1[0], ia2[0], ia1[1], ia2[1], mu, testX, testY;\n\tdx = a2[0] - a1[0];\n\tdy = a2[1] - a1[1];\n\ta = dx * dx + dy * dy;\n\tb = 2 * (dx * (a1[0] - cx) + dy * (a1[1] - cy));\n\tc = cx * cx + cy * cy;\n\tc += a1[0] * a1[0] + a1[1] * a1[1];\n\tc -= 2 * (cx * a1[0] + cy * a1[1]);\n\tc -= cr * cr;\n\tbb4ac = b * b - 4 * a * c;\n\tif (bb4ac < 0) {\n\t\treturn false;\n\t}\n\tmu = (-b + sqrt(b * b - 4 * a * c)) / (2 * a);\n\tia1[0] = a1[0] + mu * dx;\n\tia1[1] = a1[1] + mu * dy;\n\tmu = (-b - sqrt(b * b - 4 * a * c)) / (2 * a);\n\tia2[0] = a1[0] + mu * dx;\n\tia2[1] = a1[1] + mu * dy;\n\tif (dist(a1[0], a1[1], cx, cy) < dist(a2[0], a2[1], cx, cy)) {\n\t\ttestX = a2[0];\n\t\ttestY = a2[1];\n\t} else {\n\t\ttestX = a1[0];\n\t\ttestY = a1[1];\n\t}\n\tif (dist(testX, testY, ia1[0], ia1[1]) < dist(a1[0], a1[1], a2[0], a2[1]) || dist(testX, testY, ia2[0], ia2[1]) < dist(a1[0], a1[1], a2[0], a2[1])) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n*/\n\n/**\n * Intersection line/line\n *\n * http://stackoverflow.com/questions/3746274/line-intersection-with-aabb-rectangle\n * http://jsperf.com/line-intersection2/2\n *\n * @param {Number[]} a1 Line 1 P1\n * @param {Number[]} a2 Line 1 P2\n * @param {Number[]} b1 Line 2 P1\n * @param {Number[]} b2 Line 2 P2\n * @param {Number[]} result\n * @return {Number[]}\n *\nexport function intersectLine(a1, a2, b1, b2, result) {\n\tif (!result) {\n\t\t// http://www.bryceboe.com/2006/10/23/line-segment-intersection-algorithm/comment-page-1/\n\t\treturn ccw(a1, b1, b2) != ccw(a2, b1, b2) &&\n\t\t\tccw(a1, a2, b1) != ccw(a1, a2, b2);\n\t}\n\n\t// http://stackoverflow.com/questions/563198/how-do-you-detect-where-two-line-segments-intersect/1968345#1968345\n\tlet s1_x = a2[0] - a1[0];\n\tlet s1_y = a2[1] - a1[1];\n\tlet s2_x = b2[0] - b1[0];\n\tlet s2_y = b2[1] - b1[1];\n\n\tlet s = (-s1_y * (a1[0] - b1[0]) + s1_x * (a1[1] - b1[1])) / (-s2_x * s1_y + s1_x * s2_y);\n\tlet t = (s2_x * (a1[1] - b1[1]) - s2_y * (a1[0] - b1[0])) / (-s2_x * s1_y + s1_x * s2_y);\n\n\t// Collision detected\n\tif (s >= 0 && s <= 1 && t >= 0 && t <= 1) {\n\t\treturn Vec2.set(result, a1[0] + (t * s1_x), a1[1] + (t * s1_y));\n\t}\n\treturn null;\n};\n\nfunction ccw(a, b, c) {\n\tlet cw = ((c[1] - a[1]) * (b[0] - a[0])) - ((b[1] - a[1]) * (c[0] - a[0]));\n\treturn (cw > 0) ? true : cw < 0 ? false : true; // colinear\n}\n*/\n\n/**\n * @class  Debug\n * Outlines the boundaries and angle of an entity.\n * @extends Component\n */\nclass BoundsDebug extends Component {\n\tconstructor() {\n\t\tComponent.call(this);\n\t\tthis._color = Color();\n\t}\n\n\tget attributes() {\n\t\treturn {\n\t\t\tcolor: Color.gray,\n\t\t\topacity: 0.5,\n\t\t\tfill: false\n\t\t};\n\t}\n}\n\nColor.defineProperty(BoundsDebug, 'color');\n\n/*\nFIXME: Convert to sprite\nexport function ctx) {\n\tlet bounds = this.components.bounds;\n\tctx.save();\n\tif (this.fill) {\n\t\tctx.fillStyle = Color.rgba(this.color, this.opacity * 0.5);\n\t}\n\tctx.strokeStyle = Color.rgba(this.color, this.opacity);\n\tctx.lineWidth = 1;\n\tthis._position(ctx);\n\tif (bounds.shape == 'circle') {\n\t\tctx.beginPath();\n\t\tctx.lineTo(0, bounds.radius);\n\t\tctx.moveTo(0, 0);\n\t\tctx.arc(0, 0, bounds.radius | 0, 0, Mathf.TAU);\n\t\tif (this.fill) {\n\t\t\tctx.fill();\n\t\t}\n\t\tctx.stroke();\n\t} else {\n\t\tlet size = bounds._size;\n\t\tctx.strokeRect(-size[0] / 2 | 0, -size[1] / 2 | 0, size[0] | 0, size[1] | 0);\n\t\tif (this.fill) {\n\t\t\tctx.fillRect(-size[0] / 2 | 0, -size[1] / 2 | 0, size[0] | 0, size[1] | 0);\n\t\t}\n\t}\n\tctx.restore();\n};\n*/\n\nComponent.create(BoundsDebug, 'boundsDebug');\n","/** @flow */\n\nimport Registry from './registry';\nimport Event from './event';\nimport Entity, {ComponentMap} from './entity';\n\nlet emptyEntity = new Entity();\nlet emptyComponentMap = new ComponentMap();\n\n/**\n * @class Component\n * Encapsulated behaviours that can be attached to entities.\n *\n * @abstract\n * @property {Boolean} enabled False when disabled or not allocated. Never act on disabled components!\n * @property {Entity} parent Container entity\n * @property {Entity} root Scene entity\n */\nexport default class Component {\n\tconstructor() {\n\t\tthis.uid = 0;\n\t\tthis.enabled = false;\n\t\tthis.allocated = false;\n\t\tthis.destroyed = false;\n\t\tthis.entity = emptyEntity;\n\t\tthis.parent = emptyEntity;\n\t\tthis.root = emptyEntity;\n\t\tthis.components = emptyComponentMap;\n\t\tthis.listenersRef = new Set();\n\t}\n\n\t/**\n\t * Brief summary.\n\t * @private\n\t * @return {String}\n\t */\n\ttoString() {\n\t\treturn `${this.type} #${this.uid} [^ ${this.entity}]`;\n\t}\n\n\t/**\n\t * Allocate Component.\n\t * @private\n\t */\n\tallocate() {\n\t\tlet entity = this.parent;\n\t\tlet components = entity.components;\n\t\tif (components.types.has(this.type)) {\n\t\t\tthrow new Error(`Component ${this.type} already allocated for ${entity}`);\n\t\t}\n\t\tcomponents[this.type] = this;\n\t\tcomponents.types.add(this.type);\n\t\tthis.components = components;\n\t\tthis.entity = entity;\n\t\tthis.create();\n\t\tlet event = Event.create(this.type + 'Create');\n\t\tevent.aggregate = true;\n\t\tevent.cancelable = true;\n\t\tthis.emit(event);\n\t}\n\n\t/**\n\t * Destroy Component, removes it from {@link Entity}.\n\t */\n\tdestroy() {\n\t\tif (this.destroyed) {\n\t\t\treturn;\n\t\t}\n\t\tthis.destroyed = true;\n\t\tlet event = Event.create(this.type + 'Destroy');\n\t\tevent.aggregate = true;\n\t\tevent.cancelable = false;\n\t\tthis.emit(event);\n\t\tthis.enabled = false;\n\t\tthis.registry.destroy(this);\n\t}\n\n\t/**\n\t * Free destroyed Component.\n\t * @private\n\t */\n\tdeallocate() {\n\t\tif (!this.allocated) {\n\t\t\tthrow new Error('Component already deallocated');\n\t\t}\n\t\tthis.allocated = false;\n\t\tthis.destroyed = false;\n\t\tthis.free();\n\t\tlet refs = this.listenersRef;\n\t\tfor (let ref of refs) {\n\t\t\tif (ref.allocated) {\n\t\t\t\tref.off(this);\n\t\t\t}\n\t\t}\n\t\trefs.clear();\n\t\tthis.components[this.type] = null;\n\t\tthis.components.types.delete(this.type);\n\t\t// Clear reference to entity.components\n\t\tthis.components = emptyComponentMap;\n\t\tthis.entity = emptyEntity;\n\t\tthis.root = emptyEntity;\n\t\tthis.parent = emptyEntity;\n\t}\n\n\tfree() {\n\t\t// override me\n\t}\n\n\tcreate() {\n\t\t// override me\n\t}\n\n\tenable(state) {\n\t\tif (state == null) {\n\t\t\tstate = !this.enabled;\n\t\t}\n\t\tthis.emit(Event.create('component' + (state ? 'Enable' : 'Disable')));\n\t\tthis.enabled = state;\n\t}\n\n\temit(event, detail) {\n\t\treturn this.entity.emit(event, this, detail);\n\t}\n\n\tstatic create(cls, type) {\n\t\tlet proto = cls.prototype;\n\t\tif (!Component.prototype.isPrototypeOf(proto)) {\n\t\t\tlet descriptors = {};\n\t\t\tObject.getOwnPropertyNames(proto).forEach(function(name) {\n\t\t\t\tdescriptors[name] = Object.getOwnPropertyDescriptor(proto, name);\n\t\t\t});\n\t\t\tif (type != null) {\n\t\t\t\tdescriptors.type = {\n\t\t\t\t\tvalue: type\n\t\t\t\t};\n\t\t\t}\n\t\t\tcls.prototype = Object.create(Component.prototype, descriptors);\n\t\t\tcls.prototype.constructor = cls;\n\t\t} else if (type) {\n\t\t\tproto.type = type;\n\t\t} else {\n\t\t\ttype = proto.type;\n\t\t}\n\t\tComponentMap.types.add(proto.type);\n\t\tRegistry.create(cls);\n\t}\n}\n\nComponent.prototype.type = 'component';\n","'use strict';\n\nimport Entity from './entity';\nimport Registry from './registry';\nimport Event from './event';\nimport {performance as perf, requestAnimationFrame as raFrame} from './shims';\n\n/**\n * @class Context\n * Managing renderer, scene and loop\n * @extends Entity\n */\nclass Context extends Entity {\n\tconstructor() {\n\t\tEntity.call(this);\n\t\tthis.running = false;\n\t\tthis.time = 0.0;\n\t\tthis.lastTime = 0.0;\n\t\tthis.frame = 0;\n\t\tthis.tail = 0.0;\n\t\tthis.fdtEnabled = false;\n\t\tthis.fdt = 1 / 30;\n\t\tthis.dt = 1 / 60;\n\t\tthis.maxDt = 0.5;\n\t\tthis.maxFdt = this.fdt * 5;\n\t\tthis.scale = 1;\n\t\tthis.rfa = true;\n\t\tthis.enabled = true;\n\n\t\tthis.debug = {\n\t\t\tprofile: 0,\n\t\t\tstep: false,\n\t\t\ttime: true,\n\t\t\tprofileFrom: 0\n\t\t};\n\t\tthis.samples = {\n\t\t\tdt: 0,\n\t\t\tlag: 0,\n\t\t\ttick: 0,\n\t\t\tfixedUpdate: 0,\n\t\t\tupdate: 0,\n\t\t\trender: 0\n\t\t};\n\n\t\tthis.tickBound = this.tick.bind(this);\n\n\t\tthis.element = null;\n\t\tthis.scene = null;\n\t}\n\n\tinit(element) {\n\t\tthis.element = element;\n\t\tthis.createComponent('input');\n\t\tthis.createComponent('console');\n\t}\n\n\t/**\n\t * Set scene and start game loop\n\t * @param {Entity} scene\n\t * @param {Boolean} soft\n\t */\n\tplay(scene, soft) {\n\t\tlet prev = this.scene;\n\t\tif (prev) {\n\t\t\tprev.emit(Event.create('sceneEnd', scene));\n\t\t\tprev.root = null;\n\t\t\tif (soft) {\n\t\t\t\tprev.enable(false, true);\n\t\t\t} else {\n\t\t\t\tprev.destroy();\n\t\t\t}\n\t\t}\n\t\tscene.root = this;\n\t\tthis.scene = scene;\n\t\tthis.scene.emit(Event.create('sceneStart', prev));\n\t\tthis.start();\n\t}\n\n\t/**\n\t * Start loop\n\t */\n\tstart() {\n\t\tif (this.running) {\n\t\t\treturn;\n\t\t}\n\t\tthis.running = true;\n\t\tthis.emit(Event.create('contextStart'));\n\t\traFrame(this.tickBound);\n\t}\n\n\tpause() {\n\t\tif (!this.running) {\n\t\t\treturn;\n\t\t}\n\t\tthis.emit(Event.create('contextPause'));\n\t\tthis.running = false;\n\t}\n\n\t/**\n\t * Game loop tick, called by requestAnimationFrame\n\t *\n\t * @param {Number} time Delta time\n\t */\n\ttick(time) {\n\t\t// Time value in seconds\n\t\ttime = (time != null && time < 1e12 ? time : perf.now()) / 1000;\n\t\tthis.time = time;\n\t\t// rfa here to be less error prone\n\n\t\tlet i = 0;\n\t\tlet l = 0;\n\t\tlet methods = [];\n\t\tlet debug = this.debug;\n\t\tlet samples = this.hasEvent('onTimeEnd') ? this.samples : null;\n\t\tlet pong = 0.0;\n\n\t\tif (this.lastTime) {\n\t\t\tlet dt = time - this.lastTime;\n\t\t\tif (dt > this.maxDt || dt <= 0) {\n\t\t\t\tdt = this.dt;\n\t\t\t} else if (dt > 0.01 && samples != null) {\n\t\t\t\tsamples.dt = dt;\n\t\t\t\tlet lag = time - samples.next;\n\t\t\t\tif (lag > 0) {\n\t\t\t\t\tsamples.lag = lag * 1000;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.dt = (dt *= this.scale);\n\t\t\tthis.frame++;\n\n\t\t\tif (debug.profile && !debug.profileFrom) {\n\t\t\t\tdebug.profileFrom = debug.profile;\n\t\t\t\tconsole.profile('Frame ' + debug.profileFrom);\n\t\t\t}\n\n\t\t\tlet ping = (samples != null) ? perf.now() : 0.0;\n\t\t\tlet pingTick = ping;\n\n\t\t\t// Invoke fixed updates\n\t\t\tlet fdt = (this.fdtEnabled) ? this.fdt : dt;\n\t\t\tlet tail = Math.min(this.tail + dt, this.maxFdt * this.scale);\n\t\t\twhile (tail >= fdt) {\n\t\t\t\ttail -= fdt;\n\t\t\t\tlet fixedUpdates = Registry.methods.fixedUpdate;\n\t\t\t\tfor (i = 0, l = fixedUpdates.length; i < l; i++) {\n\t\t\t\t\tif (fixedUpdates[i].enabled) {\n\t\t\t\t\t\tfixedUpdates[i].fixedUpdate(fdt);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet simulates = Registry.methods.simulate;\n\t\t\t\tfor (i = 0, l = simulates.length; i < l; i++) {\n\t\t\t\t\tif (simulates[i].enabled) {\n\t\t\t\t\t\tsimulates[i].simulate(fdt);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.tail = tail;\n\n\t\t\tif (samples != null) {\n\t\t\t\tpong = perf.now();\n\t\t\t\tsamples.fixedUpdate = pong - ping;\n\t\t\t\tping = pong;\n\t\t\t}\n\n\t\t\t// Invoke update\n\t\t\tlet updates = Registry.methods.update;\n\t\t\tfor (i = 0, l = updates.length; i < l; i++) {\n\t\t\t\tif (updates[i].enabled) {\n\t\t\t\t\tupdates[i].update(dt);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tRegistry.free();\n\t\t\tVec2.sweep();\n\n\t\t\t// Invoke postUpdate\n\t\t\tlet postUpdates = Registry.methods.postUpdate;\n\t\t\tfor (i = 0, l = postUpdates.length; i < l; i++) {\n\t\t\t\tif (postUpdates[i].enabled) {\n\t\t\t\t\tpostUpdates[i].postUpdate(dt);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (samples != null) {\n\t\t\t\tpong = perf.now();\n\t\t\t\tsamples.update = pong - ping;\n\t\t\t\tping = pong;\n\t\t\t}\n\n\t\t\t// Invoke preRender\n\t\t\tlet preRenders = Registry.methods.preRender;\n\t\t\tfor (i = 0, l = preRenders.length; i < l; i++) {\n\t\t\t\tif (preRenders[i].enabled) {\n\t\t\t\t\tpreRenders[i].preRender(dt);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet ctx = this.renderer.save();\n\t\t\t// Invoke render\n\t\t\tlet renders = Registry.methods.render;\n\t\t\tfor (i = 0, l = renders.length; i < l; i++) {\n\t\t\t\tif (renders[i].enabled) {\n\t\t\t\t\trenders[i].render(ctx);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.renderer.restore();\n\n\t\t\tif (samples != null) {\n\t\t\t\tpong = perf.now();\n\t\t\t\tsamples.render = pong - ping;\n\t\t\t\tsamples.tick = pong - pingTick;\n\t\t\t}\n\n\t\t\tif (debug.step) {\n\t\t\t\t// debugger; // jshint ignore:line\n\t\t\t}\n\n\t\t\tif (debug.profileFrom) {\n\t\t\t\tif (!--debug.profile) {\n\t\t\t\t\tconsole.profileEnd('Frame ' + debug.profileFrom);\n\t\t\t\t\tdebug.profileFrom = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.lastTime = time;\n\n\t\tif (samples != null) {\n\t\t\tsamples.next = Math.max(time + 1 / 60, perf.now() / 1000);\n\t\t\tvar event = Event.create('timeEnd', samples);\n\t\t\tthis.emit(event, samples);\n\t\t}\n\n\t\tif (this.running) {\n\t\t\tif (this.rfa) {\n\t\t\t\traFrame(this.tickBound);\n\t\t\t} else {\n\t\t\t\tperf.nextTick(this.tickBound);\n\t\t\t}\n\t\t}\n\t}\n};\n\nContext.prototype.type = 'context';\n\n// Singleton\nlet context = new Context();\n\nexport default context;\n\n// Debugging hooks\nif (typeof window != 'undefined' && window.console) {\n\tconsole.acme = console.acme || (console.acme = {});\n\tconsole.acme.context = context;\n\tconsole.acme.profile = function(frames) {\n\t\tif (frames == null) {\n\t\t\tframes = 60;\n\t\t}\n\t\tcontext.debug.profile = frames;\n\t\treturn null;\n\t};\n\tconsole.acme.step = function() {\n\t\tcontext.debug.step = !context.debug.step;\n\t\treturn null;\n\t};\n}\n","/** @flow */\n\nimport Registry from './registry';\nimport Event from './event';\n\nEvent.registerTypeOnly('enable');\nEvent.registerTypeOnly('disable');\n\n/**\n * @class Entity\n * Entities are containers that have components attached and act as event hub.\n * With parent and children, they can be organized into a hierachy\n *\n * @abstract\n * @property {Boolean} enabled False when disabled or not allocated. Never act on disabled components!\n * @property {Entity|null} parent Parent entity\n * @property {Entity|null} root Scene entity\n */\nexport default class Entity {\n\tconstructor() {\n\t\tthis.type = 'entity';\n\t\tthis.uid = 0;\n\t\tthis.enabled = false;\n\t\tthis.allocated = false;\n\t\tthis.parent = null;\n\t\tthis.root = null;\n\t\tthis.components = new ComponentMap();\n\t\tthis.listeners = new Map();\n\t\tthis.listenersRef = new Set();\n\t\tthis.prefab = '';\n\t\tthis.next = null;\n\t\tthis.firstChild = null;\n\t}\n\n\t/**\n\t * Brief summary\n\t * @private\n\t * @return {String}\n\t */\n\ttoString() {\n\t\tlet comps = this.componentKeys.join(', ');\n\t\tlet parent = this.parent ? ` [^ ${this.parent}]` : '';\n\t\treturn `Entity ${this.prefab} #${this.uid} (${comps})${parent}`;\n\t}\n\n\t/**\n\t * Allocates entity from component/attribute hash\n\t * @private\n\t * @param {Object} attributes List of components and their attributes\n\t * @return {Entity}\n\t */\n\tallocate(attributes) {\n\t\tlet parent = this.parent\n\t\tif (parent != null) {\n\t\t\tlet last = parent.lastChild;\n\t\t\tif (last != null) {\n\t\t\t\tlast.next = this;\n\t\t\t} else {\n\t\t\t\tparent.firstChild = this;\n\t\t\t}\n\t\t}\n\t\tthis.prefab = '';\n\t\tif (attributes != null) {\n\t\t\tfor (let type in attributes) {\n\t\t\t\tthis.createComponent(type, attributes[type]);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Add {@link Component} to Entity\n\t * @param {String} type Component type\n\t * @param  {Object} attributes (optional) Override component attributes\n\t * @return {Component}\n\t */\n\tcreateComponent(type, attributes) {\n\t\tlet registry = Registry.types[type];\n\t\tif (registry == null) {\n\t\t\tthrow new Error(`Unknown component \"${type}\" for ${this}`);\n\t\t}\n\t\treturn registry.allocate(this, attributes);\n\t}\n\n\t/**\n\t * Add new Entity as child\n\t * @param {String|Object} prefabId {@link Prefab} ID or prefab attribute object\n\t * @param {Object} attributes (optional) Override {@link Prefab} attributes\n\t * @return {Entity}\n\t */\n\tcreateChild(prefabId, attributes) {\n\t\tif (typeof prefabId == 'string') {\n\t\t\treturn Prefab.create(prefabId, this, attributes);\n\t\t}\n\t\treturn Entity.create(this, prefabId);\n\t}\n\n\t/**\n\t * Match Entity against a list of {@link Component} types.\n\t * @param {Array|String} selector {@link Component} type(s)\n\t * @return {Boolean}\n\t */\n\thasComponent(selector) {\n\t\treturn this.components.types.has(selector);\n\t}\n\n\thasComponents(selectors) {\n\t\tfor (let selector of selectors) {\n\t\t\tif (!this.components.types.has(selector[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tget lastChild() {\n\t\tlet previous = this.firstChild;\n\t\tif (previous != null) {\n\t\t\twhile (previous.next != null) {\n\t\t\t\tprevious = previous.next;\n\t\t\t}\n\t\t}\n\t\treturn previous;\n\t}\n\n\t/**\n\t * Destroy Entity, including children and components.\n\t */\n\tdestroy() {\n\t\tif (this.destroyed) {\n\t\t\treturn;\n\t\t}\n\t\tthis.destroyed = true;\n\t\tthis.enabled = false;\n\t\tthis.registry.destroy(this);\n\t\tlet types = this.components.types;\n\t\tfor (let type of types) {\n\t\t\tthis.components[type].destroy();\n\t\t}\n\t\tlet child = this.firstChild;\n\t\twhile (child) {\n\t\t\tchild.destroy();\n\t\t\tchild = child.next;\n\t\t}\n\t}\n\n\tremoveChild(entity) {\n\t\tlet child = this.firstChild;\n\t\tlet prev = null;\n\t\twhile (child) {\n\t\t\tif (child == entity) {\n\t\t\t\tif (prev == null) {\n\t\t\t\t\tthis.firstChild = child.next;\n\t\t\t\t} else {\n\t\t\t\t\tprev.next = child.next;\n\t\t\t\t}\n\t\t\t\tchild.next = null;\n\t\t\t\tchild.parent = null;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tprev = child;\n\t\t\tchild = child.next;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Free destroyed Entity.\n\t * @private\n\t */\n\tdeallocate() {\n\t\t// Remove referenced subscribers\n\t\tlet refs = this.listenersRef;\n\t\tfor (let ref of refs) {\n\t\t\tif (ref.allocated) {\n\t\t\t\tref.off(this);\n\t\t\t}\n\t\t}\n\t\trefs.clear();\n\n\t\t// Remove own subscribers\n\t\tthis.listeners.clear();\n\n\t\t// Eager deallocate\n\t\tlet child = this.firstChild;\n\t\tthis.firstChild = null;\n\t\tlet next = null;\n\t\twhile (child != null) {\n\t\t\tnext = child.next;\n\t\t\tchild.next = null;\n\t\t\tchild = next;\n\t\t}\n\n\t\tlet parent = this.parent;\n\t\tif (parent != null) {\n\t\t\tparent.removeChild(this);\n\t\t}\n\t\tthis.allocated = false;\n\t\tthis.destroyed = false;\n\t\tthis.root = null;\n\t\tthis.parent = null;\n\t}\n\n\tenable(state, deep) {\n\t\tif (state == null) {\n\t\t\tstate = !this.enabled;\n\t\t}\n\t\tthis.emit(Event.create(state ? 'enable' : 'disable'));\n\t\tthis.enabled = state;\n\t\tfor (let type of this.components.types) {\n\t\t\tthis.components[type].enable(state, true);\n\t\t}\n\t\tif (deep) {\n\t\t\tlet child = this.firstChild;\n\t\t\twhile (child != null) {\n\t\t\t\tchild.enable(state, true);\n\t\t\t\tchild = child.next;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Has subscriber\n\t * @param {String} event Event name to listenerscribe to 'on*'\n\t */\n\thasEvent(name) {\n\t\treturn this.listeners.has(name);\n\t}\n\n\t/**\n\t * Subscribe to event messages\n\t * @param {Entity|null} scope Target Entity for listenerscription\n\t * @param {String} name Event name to listenerscribe to 'on*'\n\t * @param {String} method (optional) Local method name to call, defaults to event name\n\t */\n\ton(scope, name, method?) {\n\t\tif (scope == null) {\n\t\t\tscope = this;\n\t\t}\n\t\tif (!this.listeners.has(name)) {\n\t\t\tthis.listeners.set(name, []);\n\t\t}\n\t\tthis.listeners.get(name).push(scope, method);\n\t\tif (scope != this) {\n\t\t\tscope.listenersRef.add(this);\n\t\t}\n\t}\n\n\t/**\n\t * Publish a event message for this entity and it's parents\n\t * @param {String} event\n\t */\n\temit(type, component, detail) {\n\t\tlet event = (typeof type == 'string') ? Event.create(type) : type;\n\t\tlet entity = this;\n\t\tevent.entity = entity;\n\t\tif (component != null) {\n\t\t\tevent.component = component;\n\t\t}\n\t\tif (detail != null) {\n\t\t\tevent.detail = detail;\n\t\t}\n\t\tlet handler = event.handler;\n\t\tif (event.aggregate) {\n\t\t\tRegistry.call(handler, event);\n\t\t} else {\n\t\t\tdo {\n\t\t\t\tif (entity.enabled && entity.listeners.has(handler)) {\n\t\t\t\t\t// Invoke\n\t\t\t\t\tlet listeners = entity.listeners.get(handler);\n\t\t\t\t\tlet i = listeners.length;\n\t\t\t\t\twhile ((i -= 2) >= 0) {\n\t\t\t\t\t\tlet listener = listeners[i];\n\t\t\t\t\t\tif (listener != null && listener.enabled) {\n\t\t\t\t\t\t\tlistener[listeners[i + 1] || handler](event);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (event.stopped) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!event.bubbles) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tentity = entity.parent || entity.root; // Context.scene has .root\n\t\t\t} while (entity);\n\t\t}\n\t\tlet canceled = event.canceled;\n\t\tevent.destroy();\n\t\treturn !canceled;\n\t}\n\n\t/**\n\t * Unsubscribe scope from event\n\t * @param {Entity|Component} unscope (optional) Subscriber scope to remove\n\t */\n\toff(unscope) {\n\t\tlet listeners = this.listeners;\n\t\tfor (let items of listeners) {\n\t\t\tlet i = items.length;\n\t\t\tlet length = i / 2;\n\t\t\twhile ((i -= 2) >= 0) {\n\t\t\t\tif (items[i] != null && (!unscope || unscope === items[i])) {\n\t\t\t\t\titems[i] = null;\n\t\t\t\t\tlength--;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (length === 0) {\n\t\t\t\tlisteners.delete(name);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic create(parent, attributes) {\n\t\treturn Entity.registry.allocate(parent, attributes);\n\t}\n\n\tstatic createPrefab(id, components) {\n\t\treturn new Prefab(id, components);\n\t}\n\n\tstatic reset() {\n\t\tPrefab.byId = {};\n\t}\n}\n\nEntity.prototype.type = 'entity';\nRegistry.create(Entity);\n\n/**\n * @class\n * @constructor\n * @param {String} id Prefab Id\n * @param {Object} components Default attributes\n */\nexport class Prefab {\n\tconstructor(id, components) {\n\t\tthis.id = id;\n\t\tPrefab.byId[this.id] = this;\n\t\tthis.components = components;\n\t\tthis.types = new Set();\n\t\tthis.subKeys = {};\n\t\tfor (let type in components) {\n\t\t\tthis.types.add(type);\n\t\t\tif (components[type] == null) {\n\t\t\t\tcomponents[type] = {};\n\t\t\t}\n\t\t\tthis.subKeys[type] = Object.keys(components[type]);\n\t\t}\n\t}\n\n\t/**\n\t * Allocate {@link Entity} from Prefab\n\t * @param {Entity} parent Parent entity\n\t * @param {Object} components Override prefab components\n\t * @return {Entity}\n\t */\n\tcreate(parent, components) {\n\t\tlet entity = Entity.create(parent,\n\t\t\t(components == null) ? this.components : null\n\t\t);\n\t\tentity.prefab = this.id;\n\t\tif (components != null) {\n\t\t\tvar keys = Object.getOwnPropertyNames(components);\n\t\t\tlet types = this.types;\n\t\t\tfor (let type of types) {\n\t\t\t\tlet defaults = this.components[type];\n\t\t\t\tlet overrides = defaults;\n\t\t\t\tvar idx = keys.indexOf(type);\n\t\t\t\tif (idx != -1) {\n\t\t\t\t\tkeys[idx] = null;\n\t\t\t\t\toverrides = components[type];\n\t\t\t\t\tlet subKeys = this.subKeys[type];\n\t\t\t\t\tlet k = subKeys.length;\n\t\t\t\t\tif (k > 0) {\n\t\t\t\t\t\tfor (let j = 0; j < k; j++) {\n\t\t\t\t\t\t\tlet subKey = subKeys[j];\n\t\t\t\t\t\t\tif (overrides[subKey] === undefined) {\n\t\t\t\t\t\t\t\toverrides[subKey] = defaults[subKey];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tentity.createComponent(type, overrides);\n\t\t\t}\n\t\t\tfor (let key of keys) {\n\t\t\t\tif (key != null) {\n\t\t\t\t\tentity.createComponent(key, components[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn entity;\n\t}\n\n\t/**\n\t * Brief summary\n\t * @private\n\t * @return {String}\n\t */\n\ttoString() {\n\t\tlet comps = Object.keys(this.components).join(', ');\n\t\treturn `Prefab #${this.id}`;\n\t}\n\n\t/**\n\t * Allocate Prefab by Id\n\t * @static\n\t * @param {String} id Prefab Id\n\t * @param {Entity} parent Parent entity\n\t * @param {Object} components Override components\n\t * @return {Entity}\n\t */\n\tstatic create(id, parent, components) {\n\t\tlet prefab = Prefab.byId[id];\n\t\tif (prefab == null) {\n\t\t\tthrow new Error(`Prefab \"${id}\" not found`);\n\t\t}\n\t\treturn prefab.create(parent, components);\n\t}\n};\n\nEntity.reset();\n\nexport class ComponentMap {\n\tconstructor() {\n\t\tthis.types = new Set();\n\t\tfor (let type of ComponentMap.types) {\n\t\t\tthis[type] = null;\n\t\t}\n\t}\n\n\tget(type) {\n\t\treturn this[type];\n\t}\n}\n\nComponentMap.types = new Set();\n","\nimport {uid} from '../math/mathf';\n\nexport default class Event {\n\tconstructor(cancelable, aggregate) {\n\t\tthis.entity = null;\n\t\tthis.component = null;\n\t\tthis.uid = uid();\n\t\tthis.bubbles = true;\n\t\tthis.aggregate = (aggregate) ? true : false;\n\t\tthis.cancelable = (cancelable) ? true : false;\n\t\tthis.timeStamp = Date.now();\n\t\tthis.canceled = false;\n\t\tthis.stopped = false;\n\t\tthis.detail = null;\n\t}\n\n\ttoString() {\n\t\treturn `Event ${this.type} [${this.component} on ${this.entity}]`;\n\t}\n\n\tdestroy() {\n\t\tthis.entity = null;\n\t\tthis.component = null;\n\t\tthis.detail = null;\n\t\tthis.registry.destroy(this);\n\t}\n\n\tcancel() {\n\t\tif (this.cancelable) {\n\t\t\tthis.cancel = true;\n\t\t}\n\t}\n\n\tstop() {\n\t\tthis.stopped = true;\n\t}\n\n\tstatic create(type, detail) {\n\t\tlet event = Registry.create(Event.toType(type));\n\t\tif (detail != null) {\n\t\t\tevent.detail = detail;\n\t\t}\n\t\treturn event;\n\t}\n\n\tstatic register(cls, type) {\n\t\ttype = Event.toType(type);\n\t\tcls.type = type;\n\t\tcls.prototype.type = type;\n\t\tcls.prototype.handler = Event.toHandler(type);\n\t\treturn new Registry(cls);\n\t}\n\n\tstatic registerTypeOnly(type) {\n\t\tclass CustomEvent extends Event {\n\t\t\tconstructor() {\n\t\t\t\tEvent.call(this);\n\t\t\t}\n\t\t}\n\t\treturn Event.register(CustomEvent, type);\n\t}\n\n\tstatic toHandler(str) {\n\t\tif ((/^on/).test(str)) {\n\t\t\treturn str;\n\t\t}\n\t\treturn 'on' + str.charAt(0).toUpperCase() + str.slice(1);\n\t}\n\n\tstatic toType(str) {\n\t\tif (!(/^on/).test(str)) {\n\t\t\treturn str;\n\t\t}\n\t\treturn str.charAt(2).toLowerCase() + str.slice(3);\n\t}\n}\n\nexport class Registry {\n\tconstructor(cls) {\n\t\tthis.cls = cls;\n\t\tlet proto = cls.prototype;\n\t\tlet type = proto.type;\n\t\tif (Registry.types[type] != null) {\n\t\t\tthrow new Error(`Event '${type}' is already registered`);\n\t\t}\n\t\tthis.type = type;\n\t\tRegistry.types[type] = this;\n\t\tcls.registry = this;\n\t\tproto.registry = this;\n\t\tthis.pool = [];\n\t\tthis.allocated = 0;\n\t\tthis.length = 0;\n\t}\n\n\tstatic create(type) {\n\t\tlet registry = Registry.types[type];\n\t\tif (registry == null) {\n\t\t\t// console.warn(`Event '${type}' created on demand`);\n\t\t\tregistry = Event.registerTypeOnly(type);\n\t\t}\n\t\treturn registry.create();\n\t}\n\n\tcreate() {\n\t\tif (this.allocated == 0) {\n\t\t\tthis.length++;\n\t\t\treturn new this.cls();\n\t\t}\n\t\tthis.allocated--;\n\t\tlet instance = this.pool.pop();\n\t\tthis.cls.call(instance);\n\t\treturn instance;\n\t}\n\n\tdestroy(instance) {\n\t\tthis.allocated++;\n\t\tthis.pool.push(instance);\n\t}\n\n\tstatic dump() {\n\t\tlet types = Registry.types;\n\t\tconsole.group('Events.dump');\n\t\tfor (let type in types) {\n\t\t\tlet registry = types[type];\n\t\t\tconsole.log('%s: %d/%d allocated', type, registry.length - registry.allocated, registry.length);\n\t\t}\n\t\tconsole.groupEnd('Events.dump');\n\t}\n}\n\nRegistry.types = {};\n\nEvent.register(Event, 'event');\n\nif (typeof window != 'undefined' && window.console) {\n\tconsole.acme = console.acme || (console.acme = {});\n\tconsole.acme.dumpEvents = function() {\n\t\tRegistry.dump();\n\t\treturn null;\n\t};\n}\n","import Component from './component';\nimport Vec2 from '../math/vec2';\nimport Context from './context';\nimport Event from './event';\n\nclass onKeyBegan extends Event {\n\tconstructor() {\n\t\tEvent.call(this, true, true);\n\t\tthis.key = '';\n\t}\n}\nEvent.register(onKeyBegan, 'keyBegan');\n\nclass onKeyEnded extends Event {\n\tconstructor() {\n\t\tEvent.call(this, true, true);\n\t\tthis.key = '';\n\t}\n}\nEvent.register(onKeyEnded, 'keyEnded');\n\nclass onTouchBegan extends Event {\n\tconstructor() {\n\t\tEvent.call(this, true, true);\n\t\tthis.index = 0;\n\t}\n}\nEvent.register(onTouchBegan, 'touchBegan');\n\nclass onTouchEnded extends Event {\n\tconstructor() {\n\t\tEvent.call(this, true, true);\n\t\tthis.index = 0;\n\t}\n}\nEvent.register(onTouchEnded, 'touchEnded');\n\n/**\n * @class Input\n * Input handling for mouse, touch, keyboard and hardware sensors\n *\n * @extends Component\n */\nclass Input extends Component {\n\tconstructor() {\n\t\tComponent.call(this);\n\t\tthis.queue = [];\n\t\tthis.locks = {};\n\t\tthis.position = Vec2();\n\t\tthis.lastPos = Vec2();\n\t\tthis.touchState = '';\n\t\tthis.axis = Vec2();\n\t\tthis.mouseAxis = Vec2();\n\t\tthis.orientation = Vec2();\n\t\tthis.lastOrientation = Vec2();\n\t\tthis.baseOrientation = Vec2();\n\n\t\tthis.map = {\n\t\t\t32: 'space',\n\t\t\t192: 'debug',\n\t\t\t38: 'up',\n\t\t\t87: 'up',\n\t\t\t39: 'right',\n\t\t\t68: 'right',\n\t\t\t40: 'bottom',\n\t\t\t83: 'bottom',\n\t\t\t37: 'left',\n\t\t\t65: 'left',\n\t\t\t219: 'squareLeft',\n\t\t\t221: 'squareRight'\n\t\t};\n\t\tthis.axisMap = {\n\t\t\tleft: Vec2(0, -1),\n\t\t\tright: Vec2(0, 1),\n\t\t\tup: Vec2(1, -1),\n\t\t\tbottom: Vec2(1, 1)\n\t\t};\n\n\t\tthis.keyNames = [];\n\t\tthis.keys = {};\n\n\t\tlet map = this.map;\n\t\tfor (let code in map) {\n\t\t\tlet key = map[code];\n\t\t\tif (!~this.keyNames.indexOf(key)) {\n\t\t\t\tthis.keyNames.push(key);\n\t\t\t\tthis.keys[key] = null;\n\t\t\t}\n\t\t}\n\n\t\tthis.throttled = {\n\t\t\tmousemove: true,\n\t\t\tdeviceorientation: true\n\t\t};\n\n\t\tthis.lastEvent = '';\n\t\tthis.attached = false;\n\n\t\tthis.events = SUPPORT.touch ? {\n\t\t\ttouchstart: 'startTouch',\n\t\t\ttouchmove: 'moveTouch',\n\t\t\ttouchend: 'endTouch',\n\t\t\ttouchcancel: 'endTouch'\n\t\t} : {\n\t\t\tmousedown: 'startTouch',\n\t\t\tmousemove: 'moveTouch',\n\t\t\tmouseup: 'endTouch',\n\t\t\tkeydown: 'keyStart',\n\t\t\tkeyup: 'keyEnd'\n\t\t};\n\n\t\tthis.events.blur = 'blur';\n\t\tthis.events.deviceorientation = 'deviceOrientation';\n\t}\n\n\tattach() {\n\t\tif (this.attached) {\n\t\t\treturn;\n\t\t}\n\t\tif (typeof window == 'undefined') {\n\t\t\treturn;\n\t\t}\n\t\tthis.attached = true;\n\t\tfor (let type in this.events) {\n\t\t\twindow.addEventListener(type, this, false);\n\t\t}\n\t\tthis.queue.length = 0;\n\t}\n\n\tdetach() {\n\t\tif (!this.attached) {\n\t\t\treturn;\n\t\t}\n\t\tthis.attached = false;\n\t\tfor (let type in this.events) {\n\t\t\twindow.removeEventListener(type, this, false);\n\t\t}\n\t}\n\n\thandleEvent(event) {\n\t\tif (event.metaKey) {\n\t\t\treturn;\n\t\t}\n\t\t// event.preventDefault();\n\t\tlet type = event.type;\n\t\tif (this.throttled[type] && this.lastEvent == type) {\n\t\t\tthis.queue[this.queue.length - 1] = event;\n\t\t\treturn;\n\t\t}\n\t\tthis.lastEvent = type;\n\t\tthis.queue.push(event);\n\t}\n\n\tkeyStart(keyEvent) {\n\t\tlet key = this.map[keyEvent.keyCode];\n\t\tif (key && !this.keys[key]) {\n\t\t\tif (!this.lock('key-' + key)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet event = Event.create('keyBegan');\n\t\t\tevent.key = key;\n\t\t\tthis.emit(event);\n\t\t\tthis.keys[key] = 'began';\n\t\t\tthis.updateAxis(key);\n\t\t}\n\t}\n\n\tkeyEnd(keyEvent) {\n\t\tlet key = this.map[keyEvent.keyCode];\n\t\tif (key) {\n\t\t\tif (!this.lock('key-' + key)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tlet event = Event.create('keyEnded');\n\t\t\tevent.key = key;\n\t\t\tthis.emit(event);\n\t\t\tthis.keys[key] = 'ended';\n\t\t\tthis.updateAxis(key, true);\n\t\t}\n\t}\n\n\tstartTouch(touchEvent) {\n\t\tif (!this.lock('touch')) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.resolve(touchEvent);\n\t\tif (!this.touchState && !touchEvent.metaKey) {\n\t\t\tthis.touchState = 'began';\n\t\t\tlet event = Event.create('touchBegan');\n\t\t\tthis.emit(event);\n\t\t}\n\t}\n\n\tmoveTouch(touchEvent) {\n\t\tlet state = this.touchState;\n\t\tif ((state === 'began' || state === 'ended') && !this.lock('touch')) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.resolve(touchEvent);\n\t\tif (state && state !== 'ended' && state !== 'moved') {\n\t\t\tthis.touchState = 'moved';\n\t\t}\n\t}\n\n\tendTouch(touchEvent) {\n\t\tif (!this.lock('touch')) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.resolve(touchEvent);\n\t\tif (this.touchState && (!SUPPORT.touch || !touchEvent.targetTouches.length)) {\n\t\t\tthis.touchState = 'ended';\n\t\t\tlet event = Event.create('touchEnded');\n\t\t\tthis.emit(event)\n\t\t}\n\t}\n\n\tupdateAxis(key, ended) {\n\t\tlet axis = this.axisMap[key];\n\t\tif (axis) {\n\t\t\tif (ended) {\n\t\t\t\tthis.axis[axis[0]] -= axis[1];\n\t\t\t} else {\n\t\t\t\tthis.axis[axis[0]] += axis[1];\n\t\t\t}\n\t\t}\n\t}\n\n\tblur() {\n\t\tif (this.touchState && this.touchState !== 'ended') {\n\t\t\tthis.touchState = 'ended';\n\t\t}\n\t\tlet keys = this.keys;\n\t\tlet names = this.keyNames;\n\t\tfor (let i = 0, l = names.length; i < l; i++) {\n\t\t\tlet key = names[i];\n\t\t\tif (keys[key] && keys[key] !== 'ended') {\n\t\t\t\tkeys[key] = 'ended';\n\t\t\t\tthis.updateAxis(key, true);\n\t\t\t}\n\t\t}\n\t}\n\n\tcalibrateOrientation() {\n\t\tthis.baseOrientationTime = this.orientationTime;\n\t\tVec2.copy(this.baseOrientation, this.orientation);\n\t\tVec2.set(this.orientation);\n\t}\n\n\tdeviceOrientation(event) {\n\t\tVec2.copy(this.lastOrientation, this.orientation);\n\t\tVec2.sub(Vec2.set(this.orientation, event.gamma | 0, event.beta | 0), this.baseOrientation);\n\t\tthis.orientationTime = event.timeStamp / 1000;\n\t\tif (!this.baseOrientationTime) {\n\t\t\tthis.calibrateOrientation();\n\t\t}\n\t}\n\n\tresolve(event) {\n\t\tlet coords = SUPPORT.touch ? event.targetTouches[0] : event;\n\t\tif (coords) {\n\t\t\tthis.lastTime = this.time;\n\t\t\tthis.time = event.timeStamp / 1000;\n\t\t\tVec2.copy(this.lastPos, this.position);\n\t\t\tlet renderer = Context.renderer;\n\t\t\tVec2.set(this.position, (coords.pageX - renderer.margin[0]) / renderer.scale | 0, (coords.pageY - renderer.margin[1]) / renderer.scale | 0);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tlock(key) {\n\t\tif (this.locks[key] === this.frame) {\n\t\t\treturn false;\n\t\t}\n\t\tthis.locks[key] = this.frame;\n\t\treturn true;\n\t}\n\n\tpostUpdate() {\n\t\tswitch (this.touchState) {\n\t\t\tcase 'began':\n\t\t\t\tthis.touchState = 'stationary';\n\t\t\t\tbreak;\n\t\t\tcase 'ended':\n\t\t\t\tthis.touchState = '';\n\t\t\t\tbreak;\n\t\t}\n\n\t\tlet keys = this.keys;\n\t\tlet names = this.keyNames;\n\t\tfor (let i = 0, l = names.length; i < l; i++) {\n\t\t\tlet key = names[i];\n\t\t\tswitch (keys[key]) {\n\t\t\t\tcase 'began':\n\t\t\t\t\tkeys[key] = 'pressed';\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ended':\n\t\t\t\t\tkeys[key] = null;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis.frame = Context.frame;\n\n\t\tlet event = null;\n\t\tlet queue = this.queue;\n\t\twhile ((event = queue[0])) {\n\t\t\tlet type = event.type;\n\t\t\tif (this[this.events[type] || type](event) != null) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tqueue.shift();\n\t\t}\n\t\tif (!queue.length) {\n\t\t\tthis.lastEvent = '';\n\t\t}\n\t}\n\n\tonContextPause() {\n\t\tthis.detach();\n\t}\n\n\tonContextStart() {\n\t\tthis.attach();\n\t}\n};\n\nconst SUPPORT = {};\nif (typeof window != 'undefined') {\n\tSUPPORT.touch = 'ontouchstart' in window;\n\tSUPPORT.orientation = 'ondeviceorientation' in window;\n}\n\nComponent.create(Input, 'input');\n","/* @flow weak */\n\n/**\n * @todo [description]\n */\n\nimport {uid} from '../math/mathf';\n\ntype BaseRegisterable = {\n\tregistry: Registry;\n\tenabled: boolean;\n\tuid: number;\n\tallocated: boolean;\n\tallocate: (attributes:?Object) => void;\n\tdeallocate: () => void;\n\tparent: any;\n\troot: any;\n\ttype: string;\n};\n\ntype ComponentLike = any; // BaseRegisterable & {\n// \tattributes: ?Object;\n// } & {[key:string]: (payload:any) => void};\n\ntype EntityLike = any; // BaseRegisterable & {\n// \ton: (scope:?Entity, name:string, method:?string) => void;\n// }\n\ntype Registerable = BaseRegisterable; // EntityLike | ComponentLike;\n\n/**\n * Registry\n * @class\n * @param {Object} cls Class to registry\n */\nexport default class Registry {\n\tcls: any;\n\tinstances: Array<any>;\n\tenabled: boolean;\n\tallocated: number;\n\ttype: string;\n\tevents: Array<string>;\n\tmethods: Array<string>;\n\tattributes: Object;\n\tattributeKeys: Array<string>;\n\tisComponent: boolean;\n\n\tconstructor(cls:any) {\n\t\tthis.cls = cls;\n\t\tlet proto = cls.prototype;\n\t\tthis.instances = [];\n\t\tthis.enabled = false;\n\t\tthis.allocated = 0;\n\t\tthis.instantiated = 0;\n\t\tlet type = proto.type;\n\t\tthis.type = type;\n\t\tif (Registry.types[type] != null) {\n\t\t\tconsole.warn('Registry \"%s\" was overridden with ', type, cls);\n\t\t}\n\t\tRegistry.types[type] = this;\n\t\ttypeIndex.add(type);\n\n\t\tthis.events = [];\n\t\tthis.methods = [];\n\t\tthis.attributes = {};\n\t\tthis.attributeKeys = [];\n\n\t\tthis.isComponent = (type != 'entity');\n\t\tif (this.isComponent) {\n\t\t\tlet attributes = proto.attributes || cls.attributes;\n\t\t\tif (attributes != null) {\n\t\t\t\tthis.attributes = attributes;\n\t\t\t\tthis.attributeKeys = Object.keys(attributes);\n\t\t\t}\n\t\t\tlet keys = Object.getOwnPropertyNames(proto).concat(Object.keys(cls));\n\t\t\tlet fn = '';\n\t\t\tlet i = 0;\n\t\t\tlet l = 0;\n\t\t\tfor (l = keys.length; i < l; i++) {\n\t\t\t\tfn = keys[i];\n\t\t\t\tif (/^on[A-Z]/.test(fn)) {\n\t\t\t\t\tif (methodsIndex.indexOf(fn) === -1) {\n\t\t\t\t\t\tmethodsIndex.push(fn);\n\t\t\t\t\t\tRegistry.methods[fn] = [];\n\t\t\t\t\t}\n\t\t\t\t\tthis.events.push(fn);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (i = 0, l = methodsIndex.length; i < l; i++) {\n\t\t\t\tfn = methodsIndex[i];\n\t\t\t\tif (cls[fn] != null) {\n\t\t\t\t\tRegistry.methods[fn].push(cls);\n\t\t\t\t} else if (proto[fn] != null) {\n\t\t\t\t\tthis.methods.push(fn);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcls.enabled = false;\n\t\tcls.registry = this;\n\t\tproto.registry = this;\n\t}\n\n\t/**\n\t * Brief summary.\n\t *\n\t * @return {String}\n\t */\n\ttoString():string {\n\t\treturn `Registry ${this.type} [${this.allocated}/${this.instantiated}]`;\n\t}\n\n\tpush():any {\n\t\tthis.instantiated++;\n\t\tinstantiated++;\n\t\tlet instance = new this.cls();\n\t\tthis.instances.push(instance);\n\t\t// Register instance callbacks\n\t\tlet methods = this.methods;\n\t\tfor (let i = 0, l = methods.length; i < l; i++) {\n\t\t\tRegistry.methods[methods[i]].push(instance);\n\t\t}\n\t\treturn instance;\n\t}\n\n\tdeinstantiate(instance) {\n\t\tlet methods = this.methods;\n\t\tfor (let i = 0, l = methods.length; i < l; i++) {\n\t\t\tlet list = Registry.methods[methods[i]];\n\t\t\tlist.splice(list.indexOf(instance), 1);\n\t\t}\n\t}\n\n\tpop():any {\n\t\tlet l = this.instantiated;\n\t\tif (this.allocated == l) {\n\t\t\treturn this.push();\n\t\t}\n\t\tlet instances = this.instances;\n\t\tfor (let i = 0; i < l; i++) {\n\t\t\tif (!instances[i].allocated) {\n\t\t\t\treturn instances[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Allocate a new instance from free registry or by creating. The provided attributes are merged with the default attributes.\n\t * @param {Entity} parent (optional) Parent class\n\t * @param {Object} attributes (optional) Attributes object\n\t * @return {Object}\n\t */\n\tallocate(parent:EntityLike, attributes:?Object):any {\n\t\t// Get free or create new instance\n\t\tlet instance = this.pop();\n\t\tthis.allocated++;\n\t\tallocated++;\n\t\tthis.enabled = true;\n\t\tthis.cls.enabled = true;\n\t\tlet id = uid();\n\t\tinstance.uid = id;\n\t\tinstance.enabled = true;\n\t\tinstance.allocated = true;\n\t\tinstance.parent = parent;\n\t\tinstance.root = (parent != null) ? (parent.root || parent) : null;\n\t\t// Set layer, combined from parent layer, registry layer and uid\n\t\t// instance.layer = ((parent != null) ? parent.layer : 0) + this.layer + 2 - 1 / id;\n\n\t\tif (this.isComponent) {\n\t\t\tlet i = 0;\n\t\t\tlet defaults = this.attributes;\n\t\t\tlet keys = this.attributeKeys;\n\t\t\tlet l = keys.length;\n\t\t\tif (l > 0) {\n\t\t\t\tif (attributes == null) {\n\t\t\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\t\t\tinstance[keys[i]] = defaults[keys[i]];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\t\t\tlet key = keys[i];\n\t\t\t\t\t\tif (Registry.verbose) {\n\t\t\t\t\t\t\tif (this.allocated == 1 && !(key in instance)) {\n\t\t\t\t\t\t\t\tconsole.warn('Component \"%s\" does not have attribute \"%s\"', this.type, key);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tinstance[key] = (attributes[key] !== undefined) ?\n\t\t\t\t\t\t\tattributes[key] : defaults[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add events\n\t\t\tlet events = this.events;\n\t\t\tfor (i = 0, l = events.length; i < l; i++) {\n\t\t\t\tparent.on(instance, events[i], events[i]);\n\t\t\t}\n\t\t}\n\t\tif (instance.allocate != null) {\n\t\t\tinstance.allocate(attributes);\n\t\t}\n\t\treturn instance;\n\t}\n\n\t/**\n\t * Destroy given instance.\n\t * @param {Object} instance Registryed object\n\t */\n\tdestroy(instance:Registerable) {\n\t\tdeallocateQueue.add(instance);\n\t}\n\n\t/**\n\t * Notify registry of deallocated object.\n\t */\n\tdeallocate() {\n\t\tallocated--;\n\t\tif (this.allocated-- === 0) {\n\t\t\tthis.enabled = false;\n\t\t\tthis.cls.enabled = false;\n\t\t}\n\t}\n\n\t/**\n\t * Invoke method on all enabled registryed object instances.\n\t * @param {String} fn Method name\n\t * @param {Mixed} payload (optional) Argument(s)\n\t */\n\tcall(fn:string, payload?:any) {\n\t\tlet instances = this.instances;\n\t\tlet i = this.instances.length;\n\t\twhile (i--) {\n\t\t\tif (instances[i].enabled) {\n\t\t\t\tinstances[i][fn](payload);\n\t\t\t}\n\t\t}\n\t}\n\n\t// Create call array\n\tstatic reset() {\n\t\tRegistry.methods = {};\n\t\tfor (let i = 0, l = methodsIndex.length; i < l; i++) {\n\t\t\tRegistry.methods[methodsIndex[i]] = [];\n\t\t}\n\t\tRegistry.types = {};\n\t}\n\n\t/**\n\t * Dump debugging details and optionally flush freed objects.\n\t *\n\t * @param {Boolean} flush (optional) Flush after debug.\n\t */\n\tstatic dump(flush) {\n\t\tlet types = Registry.types;\n\t\tconsole.group('Registry.dump');\n\t\tfor (let type of typeIndex) {\n\t\t\tlet registry = types[type];\n\t\t\tconsole.log('%s: %d/%d allocated', type, registry.allocated, registry.instantiated);\n\t\t}\n\t\tconsole.groupEnd('Registry.dump');\n\t\tif (flush) {\n\t\t\tRegistry.flush();\n\t\t}\n\t}\n\n\tstatic free() {\n\t\tfor (let instance of deallocateQueue) {\n\t\t\tinstance.deallocate();\n\t\t\tinstance.registry.deallocate();\n\t\t}\n\t\tdeallocateQueue.clear();\n\t\tif (instantiated > Registry.flushMin && allocated / instantiated < Registry.flushRatio) {\n\t\t\tRegistry.flush();\n\t\t}\n\t}\n\n\tstatic flush() {\n\t\t// console.group('Registry.flush');\n\t\tlet collectedSum = 0;\n\t\tfor (let type of typeIndex) {\n\t\t\tlet registry = Registry.types[type];\n\t\t\tif (registry.instantiated == registry.allocated) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet collected = 0;\n\t\t\tlet instances = registry.instances;\n\t\t\tlet j = instances.length;\n\t\t\twhile (j--) {\n\t\t\t\tlet instance = instances[j];\n\t\t\t\tif (instance.allocated) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tregistry.deinstantiate(instance);\n\t\t\t\tinstances.splice(j, 1);\n\t\t\t\tcollected++;\n\t\t\t}\n\t\t\tcollectedSum += collected;\n\t\t\tregistry.instantiated -= collected;\n\t\t\t// console.log('%s: %d flushed/%d remaining', type, collected, registry.instantiated);\n\t\t}\n\t\tinstantiated -= collectedSum;\n\t\tconsole.log('%d flushed/%d remaining', collectedSum, instantiated);\n\t\t// console.groupEnd('Registry.flush');\n\t}\n\n\tstatic call(fn, arg) {\n\t\tlet methods = this.methods[fn];\n\t\tif (methods == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet i = methods.length;\n\t\tif (i === 0) {\n\t\t\treturn;\n\t\t}\n\t\twhile (i--) {\n\t\t\tif (methods[i].enabled) {\n\t\t\t\tmethods[i][fn](arg);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic create(cls):void {\n\t\tnew Registry(cls);\n\t}\n}\n\nlet methodsIndex = [\n\t'fixedUpdate',\n\t'simulate',\n\t'update',\n\t'postUpdate',\n\t'preRender',\n\t'render'\n];\nlet deallocateQueue = new Set();\nlet typeIndex = new Set();\nlet allocated = 0;\nlet instantiated = 0;\n\nRegistry.flushMin = 50;\nRegistry.flushRatio = 0.1;\n\nRegistry.verbose = false;\nRegistry.types = {};\nRegistry.methods = {};\nRegistry.reset();\n\nif (typeof window != 'undefined' && window.console) {\n\tconsole.acme = console.acme || (console.acme = {});\n\tconsole.acme.registry = Registry;\n\tconsole.acme.dump = function(flush) {\n\t\tRegistry.dump(flush);\n\t\treturn null;\n\t};\n}\n","\nimport Entity from './entity';\nimport Bounds from './bounds';\nimport Vec2 from '../math/vec2';\nimport Color from '../math/color';\n\nexport default class Renderer {\n\tconstructor(element, size) {\n\t\tthis.element = element || document.body;\n\t\tthis.size = Vec2(size);\n\t\tthis.color = Color.white;\n\t\tthis.content = Vec2(size);\n\t\tthis.browser = Vec2();\n\t\tthis.margin = Vec2();\n\t\tthis.projection = Vec2.scale(this.content, 0.5, Vec2());\n\t\tthis.scale = 0;\n\t\tthis.noContext = false;\n\t\tthis.orientation = 'landscape';\n\n\t\tthis.canvas = document.createElement('canvas');\n\t\t// if (this.color != null) {\n\t\t// \tthis.canvas.mozOpaque = true;\n\t\t// }\n\t\tthis.ctx = null;\n\n\t\t// var deviceRatio = window.devicePixelRatio || 1;\n\t\t// var backingStoreRatio = this.ctx.backingStorePixelRatio ||\n\t\t// \tthis.ctx.webkitBackingStorePixelRatio ||\n\t\t// \tthis.ctx.mozBackingStorePixelRatio || 1;\n\t\t// this.ratio = deviceRatio / backingStoreRatio;\n\t\tthis.ratio = window.devicePixelRatio || 1;\n\n\t\t// var oldSave = this.ctx.save;\n\t\t// var oldRestore = this.ctx.restore;\n\t\t// this.ctx.save = function() {\n\t\t// \tthis.saved++;\n\t\t// \t// console.log('SAVE');\n\t\t// \t// debugger;\n\t\t// \toldSave.call(this);\n\t\t// };\n\t\t// this.ctx.restore = function() {\n\t\t// \tthis.saved--;\n\t\t// \t// console.log('RESTORE');\n\t\t// \t// debugger;\n\t\t// \toldRestore.call(this);\n\t\t// }\n\t\t// this.ctx.saved = 0;\n\n\t\tthis.canvas.width = this.content[0] * this.ratio;\n\t\tthis.canvas.height = this.content[1] * this.ratio;\n\t\tthis.element.style.width = this.content[0] + 'px';\n\t\tthis.element.style.height = this.content[1] + 'px';\n\t\tthis.element.appendChild(this.canvas);\n\n\t\tvar style = this.element.style;\n\t\tthis.transformProp = ['transform', 'webkitTransform'].filter(function(key) {\n\t\t\treturn style[key] != null;\n\t\t})[0];\n\n\t\twindow.addEventListener('resize', this, false);\n\t\tthis.reflow();\n\t}\n\n\thandleEvent(evt) {\n\t\tthis.reflow();\n\t}\n\n\treflow() {\n\t\tvar browser = this.browser;\n\t\tVec2.set(browser, window.innerWidth, window.innerHeight);\n\t\tvar scale = Math.min(browser[0] / this.content[0],\n\t\t\tbrowser[1] / this.content[1]);\n\t\tif (scale !== this.scale) {\n\t\t\tthis.scale = scale;\n\t\t\tVec2.scale(this.content, this.scale, this.size);\n\t\t}\n\t\tvar offset = Vec2.scale(Vec2.sub(browser, this.size, this.margin), 0.5);\n\t\tthis.element.style[this.transformProp] = 'translate(' + (offset[0] | 0) +\n\t\t\t'px, ' + (offset[1] | 0) + 'px) scale(' + scale + ')';\n\t}\n\n\tsave() {\n\t\tif (this.noContext) {\n\t\t\treturn null;\n\t\t}\n\t\tif (this.ctx == null) {\n\t\t\tthis.ctx = this.canvas.getContext('2d');\n\t\t}\n\t\tvar ctx = this.ctx;\n\t\tthis.ctx.save();\n\t\tif (this.color != null) {\n\t\t\tctx.fillStyle = Color.rgba(this.color);\n\t\t\tctx.fillRect(0, 0, this.content[0], this.content[1]);\n\t\t} else {\n\t\t\tctx.clearRect(0, 0, this.content[0], this.content[1]);\n\t\t}\n\t\tctx.scale(this.ratio, this.ratio);\n\t\treturn ctx;\n\t}\n\n\trestore() {\n\t\tif (this.noContext) {\n\t\t\treturn null;\n\t\t}\n\t\tthis.ctx.restore();\n\t}\n\n\trequestFullscreen() {\n\t\tvar target = this.element.parentNode;\n\t\tif (target.requestFullScreen != null) {\n\t\t\ttarget.requestFullScreen();\n\t\t} else if (target.webkitRequestFullScreen != null) {\n\t\t\ttarget.webkitRequestFullScreen();\n\t\t} else if (target.mozRequestFullScreen != null) {\n\t\t\ttarget.mozRequestFullScreen();\n\t\t}\n\t}\n\n\tget topLeft() {\n\t\treturn Vec2.sub(\n\t\t\tVec2.scale(this.content, 0.5, topLeft),\n\t\t\tthis.projection\n\t\t);\n\t}\n\n\tget bottomRight() {\n\t\treturn Vec2.add(\n\t\t\tVec2.scale(this.content, 0.5, bottomRight),\n\t\t\tthis.projection\n\t\t);\n\t}\n};\n\nlet topLeft = Vec2();\nlet bottomRight = Vec2();\n","/* @flow */\n\nexport let performance = null;\nexport let requestAnimationFrame = null;\n\nif (typeof window != 'undefined') {\n\t// performance.now\n\tperformance = window.performance || (window.performance = {});\n\tperformance.now = performance.now || performance.webkitNow ||\n\t\tperformance.msNow || performance.mozNow || Date.now;\n\n\tperformance.nextTick = (function() {\n\t\tlet queue = [];\n\t\tfunction nextTick(fn) {\n\t\t\tqueue.push(fn);\n\t\t\twindow.postMessage('nexttick', '*');\n\t\t}\n\t\tfunction handleMessage(event) {\n\t\t\tif (event.source != window || event.data != 'nexttick') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tevent.stopPropagation();\n\t\t\tif (queue.length > 0) {\n\t\t\t\tqueue.shift()();\n\t\t\t}\n\t\t}\n\n\t\twindow.addEventListener('message', handleMessage, true);\n\t\treturn nextTick;\n\t})();\n\n\trequestAnimationFrame = window.requestAnimationFrame ||\n\t\twindow.mozRequestAnimationFrame || window.webkitRequestAnimationFrame;\n}\n\n/* Unused\n// Object.setPrototypeOf\n// http://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.setprototypeof\nObject.setPrototypeOf = Object.setPrototypeOf || function(obj, proto) {\n\tobj.__proto__ = proto;\n\treturn obj;\n};\n\n// Object.mixin\nObject.mixin = Object.mixin || function(obj, properties) {\n\tfor (let key in properties) {\n\t\tobj[key] = properties[key];\n\t}\n\treturn obj;\n};\n*/","'use strict';\n/**\n * @module core/sprite\n */\n\nimport Vec2 from '../math/vec2'\nimport Component from './component'\nimport Context from './context'\nimport Event from './event'\n\n/**\n * Loads and paints a single image file. Either loaded from source or drawn via callback, created from given width/height.\n * @class\n * @param {String|Function} srcOrRepaint URL or callback to draw image on demand\n * @param {Number[]} size (optional) Override size for drawing canvas\n * @param {Number} baseScale (optional) Base scale applied to all draws, defaults to 1\n */\nexport class SpriteAsset {\n\tconstructor(srcOrRepaint, size, baseScale) {\n\t \tthis.baseScale = (baseScale != null) ? baseScale : 1;\n\t\tthis.size = Vec2(size);\n\t\tthis.bufferSize = Vec2(size);\n\t\tthis.defaultAnchor = Vec2.center;\n\t\tthis.defaultOffset = Vec2();\n\t\tthis.defaultScale = Vec2(1, 1);\n\t\tthis.buffer = document.createElement('canvas');\n\t\tthis.bufferCtx = this.buffer.getContext('2d');\n\t\tthis.scale = 1;\n\t\tthis.ready = false;\n\t\tthis.repaintSrc = null;\n\t\tthis.customRepaint = null;\n\t\tthis.src = '';\n\t\tthis.loading = false;\n\n\t\t// console.log(typeof srcOrRepaint);\n\n\t\tswitch (typeof srcOrRepaint) {\n\t\t\tcase 'string':\n\t\t\t\tthis.src = srcOrRepaint;\n\t\t\t\tlet img = new Image();\n\t\t\t\tthis.img = img;\n\t\t\t\timg.addEventListener('load', this);\n\t\t\t\tthis.loading = true;\n\t\t\t\timg.src = srcOrRepaint;\n\t\t\t\tContext.emit(Event.create('spriteAssetWillLoad', this));\n\t\t\t\tif (this.loading && img.width && img.height) {\n\t\t\t\t\tthis.handleEvent();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'function':\n\t\t\t\tthis.customRepaint = srcOrRepaint;\n\t\t\t\tthis.refresh();\n\t\t\t\tbreak;\n\t\t\tcase 'object':\n\t\t\t\tthis.repaintSrc = srcOrRepaint;\n\t\t\t\tthis.refresh();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\ttoString() {\n\t\tlet url = (this.buffer) ? this.buffer.toDataURL() : 'Pending';\n\t\tvar size = Vec2.toString(this.size);\n\t\tvar bufferSize = Vec2.toString(this.bufferSize);\n\t\tvar src = this.src || this.repaint;\n\t\treturn `SpriteAsset ${size} ${bufferSize}\\n${src}\\n${url}`;\n\t}\n\n\trepaintOnComponent() {\n\t\tthis.repaintSrc.onRepaint(this.bufferCtx, this);\n\t}\n\n\thandleEvent() {\n\t\tthis.img.removeEventListener('load', this);\n\t\tif (!this.loading) {\n\t\t\treturn;\n\t\t}\n\t\tthis.loading = false;\n\t\tVec2.set(this.size, this.img.width, this.img.height);\n\t\tContext.emit(Event.create('assetDidLoad', this));\n\t\tthis.refresh();\n\t}\n\n\t/**\n\t * Draw whole or sprite of image to canvas. Draws only if image is loaded.\n\t * @param {Object} ctx 2d-canvas context\n\t * @param {Number[]} toPos (optional) Position to draw to.\n\t * @param {Number[]} anchor (optional) anchor draw position, between\n\t *   lower-left [-1, -1] and upper-right [1, 1]\n\t * @param {Number[]} size (optional) Target size\n\t * @param {Number[]} fromPos (optional) Source position (for sprites)\n\t * @param {Number[]} scale (optional) Target scaling, applied to size\n\t */\n\tdraw(ctx, toPos, anchor, size, fromPos, scale) {\n\t\tif (!this.ready) {\n\t\t\treturn;\n\t\t}\n\t\tif (toPos == null) {\n\t\t\ttoPos = Vec2.zero;\n\t\t}\n\t\tif (anchor == null) {\n\t\t\tanchor = this.defaultAnchor;\n\t\t}\n\t\tif (size == null) {\n\t\t\tsize = this.bufferSize;\n\t\t}\n\t\tif (fromPos == null) {\n\t\t\tfromPos = this.defaultOffset;\n\t\t}\n\t\tif (scale == null) {\n\t\t\tscale = this.defaultScale;\n\t\t}\n\t\tctx.drawImage(this.buffer,\n\t\t\tfromPos[0] | 0, fromPos[1] | 0,\n\t\t\tsize[0], size[1],\n\t\t\ttoPos[0] - size[0] * anchor[0] + 0.5 | 0,\n\t\t\ttoPos[1] - size[1] * anchor[1] + 0.5 | 0,\n\t\t\tsize[0] * scale[0], size[1] * scale[1]\n\t\t);\n\t}\n\n\trepaint() {\n\t\tlet size = this.size;\n\t\tthis.buffer.width = size[0];\n\t\tthis.buffer.height = size[1];\n\t\tthis.bufferCtx.drawImage(this.img, 0, 0, size[0], size[1]);\n\t\tthis.sample();\n\t}\n\n\tsample() {\n\t\tlet scale = this.scale;\n\t\tlet size = this.size;\n\t\tlet bufferCtx = this.bufferCtx;\n\t\tlet data = bufferCtx.getImageData(0, 0, size[0], size[1]).data;\n\t\tthis.buffer.width = this.bufferSize[0];\n\t\tthis.buffer.height = this.bufferSize[1];\n\t\tfor (let x = 0, w = size[0], h = size[1]; x <= w; x += 1) {\n\t\t\tfor (let y = 0; y <= h; y += 1) {\n\t\t\t\tlet i = (y * size[0] + x) * 4;\n\t\t\t\tbufferCtx.fillStyle = 'rgba(' + data[i] + ', ' + data[i + 1] + ', ' +\n\t\t\t\t\tdata[i + 2] + ', ' + (data[i + 3] / 255) + ')';\n\t\t\t\tbufferCtx.fillRect(x * scale, y * scale, scale, scale);\n\t\t\t}\n\t\t}\n\t}\n\n\trefresh(scale) {\n\t\t// console.log('Refresh');\n\t\tscale = (scale || 1) * this.baseScale;\n\t\tif (this.ready && this.scale == scale) {\n\t\t\treturn;\n\t\t}\n\t\tthis.scale = scale;\n\t\tthis.buffer.width = this.bufferSize[0] = this.size[0] * scale | 0;\n\t\tthis.buffer.height = this.bufferSize[1] = this.size[1] * scale | 0;\n\t\t// Vec2.scale(this.bufferSize, -0.5, this.defaultOffset);\n\t\tif (this.repaintSrc) {\n\t\t\tthis.repaintOnComponent();\n\t\t} else if (this.customRepaint) {\n\t\t\tthis.customRepaint(this.bufferCtx, this);\n\t\t} else {\n\t\t\tthis.repaint();\n\t\t}\n\t\tthis.ready = true;\n\t\tContext.emit(Event.create('spriteAssetRefresh', this));\n\t}\n};\n\n/**\n * Sprite-sheet for animations.\n * @class\n * @param {Object} attributes sprites, frames, speed, size, anchor, sequences\n */\nexport class SpriteSheet {\n\tconstructor(attributes) {\n\t\tlet sprites = attributes.sprites || [];\n\t\tthis.sprites = Array.isArray(sprites) ? sprites : [sprites];\n\t\tthis.frames = [];\n\t\tif (Array.isArray(attributes.frames)) {\n\t\t\tlet frames = attributes.frames;\n\t\t\tfor (let i = 0, l = frames.length; i < l; i++) {\n\t\t\t\tthis.frames.push(frames[i]);\n\t\t\t}\n\t\t}\n\t\tthis.defaults = {\n\t\t\tspeed: (attributes.speed != null) ? attributes.speed : 0,\n\t\t\tsize: attributes.size || Vec2(1, 1),\n\t\t\tanchor: attributes.anchor || Vec2.center\n\t\t};\n\t\tthis.sequences = {};\n\t\tlet sequences = attributes.sequences || {};\n\t\tContext.emit(Event.create('spriteSheetCreate', this));\n\t\tfor (let id in sequences) {\n\t\t\tthis.addSequence(id, sequences[id]);\n\t\t}\n\t}\n\n\t/**\n\t * Add sequence to spritesheet.\n\t * Sequences are defined as short-form by Array:\n\t *   [frameIndexes, next || null, speed || defaultSpeed || sprite || 0]\n\t * or Object:\n\t *   {frames: [], next: 'id', speed: seconds, sprite: 0}\n\t * @param {String} id       Sequence name (walk, jump, etc)\n\t * @param {Array|Object} sequence Array or object\n\t */\n\taddSequence(id, sequence) {\n\t\tif (Array.isArray(sequence)) {\n\t\t\t// Convert short form Array to Object\n\t\t\tlet frames = [];\n\t\t\tfor (let frame = sequence[0], l = sequence[1]; frame <= l; frame++) {\n\t\t\t\tframes.push(frame);\n\t\t\t}\n\t\t\tsequence = {\n\t\t\t\tframes: frames,\n\t\t\t\tnext: sequence[2] || null,\n\t\t\t\tspeed: sequence[3] || this.defaults.speed,\n\t\t\t\tname: id,\n\t\t\t\tsprite: sequence[4] || 0\n\t\t\t};\n\t\t}\n\t\tif (sequence.next === true) {\n\t\t\tsequence.next = id;\n\t\t}\n\t\tif (!sequence.speed) {\n\t\t\tsequence.speed = this.defaults.speed;\n\t\t}\n\n\t\tthis.sequences[id] = sequence;\n\t\tContext.emit(Event.create('spriteSheetSequence', this));\n\t\tif (!this.defaultSequence) {\n\t\t\tthis.defaultSequence = id;\n\t\t}\n\t}\n\n\tprepare() {\n\t\tlet sprites = this.sprites;\n\t\tlet i = 0;\n\t\tlet l = 0;\n\t\tfor (i = 0, l = sprites.length; i < l; i++) {\n\t\t\tif (!sprites[i].ready) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif (!this.frames.length) {\n\t\t\tlet defaults = this.defaults;\n\t\t\tlet size = defaults.size;\n\t\t\tlet anchor = defaults.anchor || Vec2.center;\n\t\t\tfor (i = 0, l = sprites.length; i < l; i++) {\n\t\t\t\tlet sprite = sprites[i];\n\t\t\t\tlet cols = sprite.size[0] / size[0] | 0;\n\t\t\t\tlet rows = sprite.size[1] / size[1] | 0;\n\t\t\t\t// debugger;\n\t\t\t\tfor (let y = 0; y < rows; y++) {\n\t\t\t\t\tfor (let x = 0; x < cols; x++) {\n\t\t\t\t\t\tthis.frames.push({\n\t\t\t\t\t\t\tsprite: sprite,\n\t\t\t\t\t\t\tposition: Vec2(x * size[0], y * size[1]),\n\t\t\t\t\t\t\tsize: size,\n\t\t\t\t\t\t\tanchor: anchor\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.ready = true;\n\t\tContext.emit(Event.create('spriteSheetReady', this));\n\t\treturn true;\n\t}\n\n\tdraw(ctx, idx) {\n\t\tif (!this.ready && !this.prepare()) {\n\t\t\treturn;\n\t\t}\n\t\tlet frame = this.frames[idx || 0];\n\t\tframe.sprite.draw(ctx, null, frame.anchor, frame.size, frame.position);\n\t}\n};\n\n/**\n * Sprite SpriteTween lets components draw animation sequences from SpriteSheets.\n * @class\n * @extends Component\n */\nexport class SpriteTween extends Component {\n\tconstructor() {\n\t\tComponent.call(this);\n\t\tthis.asset = null;\n\t\tthis.sequence = null;\n\t\tthis.speed = 0.0;\n\t\tthis.offset = 0.0;\n\t\tthis.isSpriteSheet = false;\n\t\tthis.paused = false;\n\t\tthis.dtime = 0.0;\n\t\tthis.frame = 0;\n\t}\n\n\tget attributes() {\n\t\treturn {\n\t\t\tasset: null,\n\t\t\tspeed: 0,\n\t\t\tsequence: null,\n\t\t\toffset: 0,\n\t\t\tframe: 0\n\t\t}\n\t}\n\n\tcreate() {\n\t\t// this.asset = attributes.asset;\n\t\t// this.sequence = attributes.sequence;\n\t\t// this.speed = attributes.speed;\n\t\tthis.isSpriteSheet = this.asset instanceof SpriteSheet;\n\t\tif (this.isSpriteSheet) {\n\t\t\tif (!this.speed) {\n\t\t\t\tthis.speed = this.asset.defaults.speed;\n\t\t\t}\n\t\t\tthis.dtime = this.offset;\n\t\t\tif (!this.sequence) {\n\t\t\t\tthis.sequence = this.asset.defaultSequence;\n\t\t\t}\n\t\t}\n\t\tthis.paused = !this.speed;\n\t}\n\n\tpreRender(dt) {\n\t\tif (!this.isSpriteSheet || this.paused) {\n\t\t\treturn;\n\t\t}\n\t\tlet frames = null;\n\t\tlet speed = 0.0;\n\t\tlet frameCount = 0;\n\t\tlet dtime = (this.dtime += dt);\n\t\tlet nextFrame = this.frame;\n\t\tif (this.sequence) {\n\t\t\tlet sequence = this.asset.sequences[this.sequence];\n\t\t\tspeed = sequence.speed;\n\t\t\tframes = sequence.frames;\n\t\t\tframeCount = frames.length;\n\t\t\tif (dtime >= frameCount * speed) {\n\t\t\t\tthis.emit(Event.create('sequenceEnd', sequence));\n\t\t\t\tif (sequence.next) {\n\t\t\t\t\tif (sequence.next !== this.sequence) {\n\t\t\t\t\t\tthis.goto(sequence.next);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.pause();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tdtime = dtime % (frameCount * speed);\n\t\t\t}\n\t\t\tnextFrame = frames[dtime / speed | 0];\n\t\t} else {\n\t\t\tframes = this.asset.frames;\n\t\t\tframeCount = frames.length;\n\t\t\tspeed = this.speed;\n\t\t\tdtime = dtime % (frameCount * speed);\n\t\t\tlet frame = dtime / speed | 0;\n\t\t\tif (frame < this.frame) {\n\t\t\t\tthis.emit(Event.create('frameEnd', this.frame));\n\t\t\t}\n\t\t\tnextFrame = dtime / speed | 0;\n\t\t}\n\t\tif (nextFrame != this.frame) {\n\t\t\tthis.frame = nextFrame;\n\t\t\tthis.emit(Event.create('frameNext', nextFrame));\n\t\t}\n\t}\n\n\tpause() {\n\t\tthis.paused = true;\n\t\treturn this;\n\t}\n\n\tplay() {\n\t\tthis.paused = false;\n\t\treturn this;\n\t}\n\n\tgoto(id) {\n\t\tif (isNaN(id)) {\n\t\t\tif (this.sequence != id) {\n\t\t\t\tthis.dtime = 0;\n\t\t\t\tthis.sequence = id;\n\t\t\t\tif (this.paused) {\n\t\t\t\t\tthis.paused = false;\n\t\t\t\t\tthis.preRender(0);\n\t\t\t\t\tthis.paused = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.sequence = null;\n\t\t\tif (this.frame != id) {\n\t\t\t\tthis.emit(Event.create('frameNext', id));\n\t\t\t\tthis.frame = id;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n};\n\nComponent.create(SpriteTween, 'spriteTween');\n\n/**\n * @class\n * @extends Component\n */\n\nlet compositeLevels = {};\ncompositeLevels[0] = 'source-over';\nlet alphaLevels = {};\nalphaLevels[0] = 1.0;\n\nexport class SpriteCanvasRenderer extends Component {\n\trender(ctx) {\n\t\tlet scene = this.entity.scene;\n\t\tlet child = scene.firstChild;\n\t\tif (child == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet composite = 'source-over';\n\t\tlet alpha = 1.0;\n\t\tlet level = 0;\n\t\tctx.save();\n\t\twhile (child) {\n\t\t\tlet tween = child.components.spriteTween;\n\t\t\tif (tween != null && tween.enabled) {\n\t\t\t\tlet transform = child.components.transform;\n\t\t\t\ttransform.applyMatrixWorld(ctx);\n\t\t\t\tif (transform.composite != composite) {\n\t\t\t\t\tcomposite = transform.composite;\n\t\t\t\t\tctx.globalCompositeOperation = composite;\n\t\t\t\t}\n\t\t\t\tif (transform.alpha != alpha) {\n\t\t\t\t\talpha = transform.alpha;\n\t\t\t\t\tctx.globalAlpha = alpha;\n\t\t\t\t}\n\t\t\t\ttween.asset.draw(ctx, tween.frame);\n\t\t\t}\n\t\t\tif (child.firstChild != null) {\n\t\t\t\tlevel++;\n\t\t\t\tchild = child.firstChild;\n\t\t\t} else {\n\t\t\t\twhile (child.next == null) {\n\t\t\t\t\tlevel--;\n\t\t\t\t\tchild = child.parent;\n\t\t\t\t\tif (child == scene) {\n\t\t\t\t\t\tctx.restore();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tchild = child.next;\n\t\t\t}\n\t\t}\n\t\tctx.restore();\n\t}\n};\n\nComponent.create(SpriteCanvasRenderer, 'spriteCanvasRenderer');\n","'use strict';\n\nimport Component from './component';\nimport Registry from './registry';\nimport Vec2 from '../math/vec2';\nimport Mat2 from '../math/mat2';\n\n/**\n * Transform keeps track of transformation (position, rotation and scale) and\n * composite, alpha.\n * @extends Component\n * @class\n */\nclass Transform extends Component {\n\tconstructor() {\n\t\tComponent.call(this);\n\t\tthis.rotation = 0.0;\n\t\tthis.alpha = 1.0;\n\t\tthis.composite = '';\n\t\tthis._position = Vec2();\n\t\tthis._scale = Vec2();\n\t\tthis._matrix = Mat2();\n\t\tthis._matrixWorld = Mat2();\n\t\tthis._dirty = false;\n\t\tthis._dirtyParent = false;\n\t\tthis._globalPosition = Vec2();\n\t\tthis.matrixAutoUpdate = false;\n\t\tthis.parentTransform = null;\n\t}\n\n\tget attributes() {\n\t\treturn {\n\t\t\tposition: Vec2(),\n\t\t\tscale: Vec2(1, 1),\n\t\t\trotation: 0.0,\n\t\t\talpha: 1.0,\n\t\t\tcomposite: 'source-over'\n\t\t};\n\t}\n\n\tcreate() {\n\t\tthis._dirty = true;\n\t\tthis._dirtyParent = true;\n\t\tthis.matrixAutoUpdate = true;\n\t\tlet parent = this.entity.parent;\n\t\tthis.parentTransform = parent ? parent.components.transform : null;\n\t}\n\n\tget matrix() {\n\t\tlet matrix = this._matrix;\n\t\tif (this.dirty || this.matrixAutoUpdate) {\n\t\t\tMat2.translate(Mat2.identity, this._position, matrix);\n\t\t\tMat2.rotate(matrix, this.rotation);\n\t\t\tMat2.scale(matrix, this._scale);\n\t\t\tthis._dirty = false;\n\t\t\tthis.dirtyParent = true;\n\t\t}\n\t\treturn matrix;\n\t}\n\n\tget matrixWorld() {\n\t\tlet matrix = this.matrix;\n\t\tlet parent = this.parentTransform;\n\t\tif (!Transform.enableTree || parent == null) {\n\t\t\treturn matrix;\n\t\t}\n\t\tlet matrixWorld = this._matrixWorld;\n\t\tif (this._dirtyParent) {\n\t\t\tMat2.multiply(parent.matrixWorld, matrix, matrixWorld);\n\t\t\tthis._dirtyParent = false;\n\t\t}\n\t\treturn matrixWorld;\n\t}\n\n\tget alphaWorld() {\n\t\tlet alpha = this.alpha;\n\t\tif (!Transform.enableTree) {\n\t\t\treturn alpha;\n\t\t}\n\t\tlet parent = this.parentTransform;\n\t\tif (parent == null) {\n\t\t\treturn alpha;\n\t\t}\n\t\treturn parent.alphaWorld * alpha;\n\t}\n\n\tget globalPosition() {\n\t\tlet parent = this.parentTransform;\n\t\tlet position = this.position;\n\t\tif (parent == null) {\n\t\t\treturn position;\n\t\t}\n\t\treturn Vec2.add(\n\t\t\tposition,\n\t\t\tparent.globalPosition,\n\t\t\tthis._globalPosition\n\t\t);\n\t}\n\n\tget positionOnly() {\n\t\tlet parent = this.parentTransform;\n\t\treturn (parent == null || parent.positionOnly) && this.rotation === 0 &&\n\t\t\tthis._scale[0] == 1 && this._scale[1] == 1;\n\t}\n\n\tset positionOnly(to) {\n\t\tif (to) {\n\t\t\tthis.rotation = 0;\n\t\t\tthis.scale = Vec2.one;\n\t\t\tthis.parentTransform.positionOnly = true;\n\t\t}\n\t}\n\n\tdealloc() {\n\t\tthis.parentTransform = null;\n\t}\n\n\tset dirty(to) {\n\t\tif (this._dirty == to) {\n\t\t\treturn;\n\t\t}\n\t\tthis._dirty = to;\n\t\tif (to && Transform.enableTree) {\n\t\t\tthis.dirtyParent = true;\n\t\t}\n\t}\n\n\tset dirtyParent(to) {\n\t\tif (this._dirtyParent == to) {\n\t\t\treturn;\n\t\t}\n\t\tthis._dirtyParent = true;\n\t\tlet start = this.entity;\n\t\tlet child = start.firstChild;\n\t\twhile (child != null) {\n\t\t\tchild.components.transform._dirtyParent = true;\n\t\t\tif (child.firstChild != null) {\n\t\t\t\tchild = child.firstChild;\n\t\t\t} else if (child.next == null) {\n\t\t\t\tdo {\n\t\t\t\t\tchild = child.parent;\n\t\t\t\t\tif (child == start) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} while (child.next == null);\n\t\t\t}\n\t\t\tchild = child.next;\n\t\t}\n\t}\n\n\tcompose(position, rotation, scale) {\n\t\tif (position != null) {\n\t\t\tthis.position = position;\n\t\t}\n\t\tif (rotation != null) {\n\t\t\tthis.rotation = rotation;\n\t\t}\n\t\tif (scale != null) {\n\t\t\tthis.scale = scale;\n\t\t}\n\t\tthis.dirty = true;\n\t}\n\n\ttranslateBy(by) {\n\t\tthis._position[0] += by[0];\n\t\tthis._position[1] += by[1];\n\t\tthis.dirty = true;\n\t}\n\n\ttranslateTo(to) {\n\t\tthis._position[0] = to[0];\n\t\tthis._position[1] = to[1];\n\t\tthis.dirty = true;\n\t}\n\n\ttranslateXBy(by) {\n\t\tthis._position[0] += by;\n\t\tthis.dirty = true;\n\t}\n\n\ttranslateXTo(to) {\n\t\tthis._position[0] = to;\n\t\tthis.dirty = true;\n\t}\n\n\ttranslateYBy(by) {\n\t\tthis._position[1] += by;\n\t\tthis.dirty = true;\n\t}\n\n\ttranslateYTo(to) {\n\t\tthis._position[1] = to;\n\t\tthis.dirty = true;\n\t}\n\n\tscaleBy(by) {\n\t\tthis._scale[0] += by[0];\n\t\tthis._scale[1] += by[1];\n\t\tthis.dirty = true;\n\t}\n\n\tscaleTo(to) {\n\t\tthis._scale[0] = to[0];\n\t\tthis._scale[1] = to[1];\n\t\tthis.dirty = true;\n\t}\n\n\tscaleXBy(by) {\n\t\tthis._scale[0] += by;\n\t\tthis.dirty = true;\n\t}\n\n\tscaleXTo(to) {\n\t\tthis._scale[0] = to;\n\t\tthis.dirty = true;\n\t}\n\n\tscaleYBy(by) {\n\t\tthis._scale[1] += by;\n\t\tthis.dirty = true;\n\t}\n\n\tscaleYTo(to) {\n\t\tthis._scale[1] = to;\n\t\tthis.dirty = true;\n\t}\n\n\trotateBy(by) {\n\t\tthis.rotation += by;\n\t\tthis.dirty = true;\n\t}\n\n\trotateTo(to) {\n\t\tthis.rotation = to;\n\t\tthis.dirty = true;\n\t}\n\n\tapplyMatrixWorld(ctx) {\n\t\tlet mtx = this.matrixWorld;\n\t\tctx.setTransform(\n\t\t\tmtx[0], mtx[1], mtx[2], mtx[3],\n\t\t\tmtx[4] + 0.5 | 0, mtx[5] + 0.5 | 0\n\t\t);\n\t}\n\n\tapplyMatrix(ctx) {\n\t\tif (this.positionOnly) {\n\t\t\tctx.translate(this.position[0], this.position[1]);\n\t\t} else {\n\t\t\tlet mtx = this.matrix;\n\t\t\tctx.transform(\n\t\t\t\tmtx[0], mtx[1], mtx[2], mtx[3],\n\t\t\t\tmtx[4] + 0.5 | 0, mtx[5] + 0.5 | 0\n\t\t\t);\n\t\t}\n\t}\n}\n\nTransform.enableTree = true;\n\nVec2.defineProperty(Transform, 'position', {dirty: true});\nVec2.defineProperty(Transform, 'scale', {dirty: true});\n\nComponent.create(Transform, 'transform');\n","/** @flow weak */\n\nvar Component = require('../core/component');\n\nexport default class Console extends Component {\n\tconstructor() {\n\t\tComponent.call(this);\n\t\tthis.css = '';\n\t\tthis.container = null;\n\t\tthis.graphStyle = false;\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\t\tthis.cap = 0;\n\t\tthis.resolution = 0.0;\n\t}\n\n\tget attributes() {\n\t\treturn {\n\t\t\tcss: '',\n\t\t\tcontainer: null,\n\t\t\tgraphStyle: true,\n\t\t\twidth: 100,\n\t\t\theight: 56,\n\t\t\tcap: 50,\n\t\t\tresolution: 0.2\n\t\t};\n\t}\n\n\tcreate() {\n\t\tthis.reset();\n\n\t\tvar wrapCss = 'position: fixed;' +\n\t\t\t'transform: translateZ(0);' +\n\t\t\t'left: 0;' +\n\t\t\t'top: 0;' +\n\t\t\t'user-select: none;' +\n\t\t\t'overflow: hidden;' +\n\t\t\t'padding: 0;' +\n\t\t\t'width: ' + this.width + 'px;' +\n\t\t\t'color: #ccc;' +\n\t\t\t'background-color: rgba(0, 0, 0, 1);' +\n\t\t\t'outline: 1px solid rgba(128, 128, 128, 0.5);' +\n\t\t\t'font: 400 9px/20px Helvetica,Arial,sans-serif;' +\n\t\t\t'text-align: right;' +\n\t\t\t'text-shadow: 1px 1px 0 rgba(0, 0, 0, 1), 0 0 1px rgba(0, 0, 0, 1);' +\n\t\t\t'cursor: ns-resize;' + this.css;\n\t\tvar panelCss = 'width: 50%;' +\n\t\t\t'overflow: hidden;' +\n\t\t\t'display: inline-block;' +\n\t\t\t'-moz-box-sizing: border-box;' +\n\t\t\t'-webkit-box-sizing: border-box;' +\n\t\t\t'box-sizing: border-box;' +\n\t\t\t'z-index: 2;';\n\t\tvar spanSmallCss = 'display: inline-block;' +\n\t\t\t'width: 38%;' +\n\t\t\t'padding-right: 3px;' +\n\t\t\t'-moz-box-sizing: border-box;' +\n\t\t\t'-webkit-box-sizing: border-box;' +\n\t\t\t'box-sizing: border-box;';\n\t\tvar spanCss = spanSmallCss +\n\t\t\t'width: 62%;' +\n\t\t\t'font-weight: bold;' +\n\t\t\t'font-size: 12px;';\n\n\t\tif (this.graphStyle) {\n\t\t\tpanelCss += 'position: absolute;' +\n\t\t\t\t'top: 0;' +\n\t\t\t\t'left: 0;';\n\t\t} else {\n\t\t\twrapCss += 'height: 20px;';\n\t\t}\n\n\t\tvar wrap = this.wrap = document.createElement('div');\n\t\twrap.id = 'console';\n\t\twrap.style.cssText = wrapCss;\n\n\t\tthis.fpsSpan = document.createElement('span');\n\t\tthis.fpsSpan.style.cssText = spanCss;\n\t\tthis.fpsSpan.title = 'FPS';\n\t\tthis.fpsSpan2 = document.createElement('span');\n\t\tthis.fpsSpan2.style.cssText = spanSmallCss;\n\t\tthis.tickSpan = document.createElement('span');\n\t\tthis.tickSpan.style.cssText = spanCss;\n\t\tthis.tickSpan.title = 'MS per tick';\n\t\tthis.tickSpan2 = document.createElement('span');\n\t\tthis.tickSpan2.style.cssText = spanSmallCss;\n\t\tthis.fpsSpan2.title = this.tickSpan2.title = '± standard deviation';\n\n\t\tvar panel = document.createElement('span');\n\t\tpanel.style.cssText = panelCss;\n\t\tpanel.appendChild(this.fpsSpan);\n\t\tpanel.appendChild(this.fpsSpan2);\n\t\twrap.appendChild(panel);\n\n\t\tpanel = document.createElement('span');\n\t\tpanel.style.cssText = panelCss + 'left: 50%;';\n\t\tpanel.appendChild(this.tickSpan);\n\t\tpanel.appendChild(this.tickSpan2);\n\t\twrap.appendChild(panel);\n\n\t\tif (this.graphStyle) {\n\t\t\tvar rulerCss = 'position: absolute;' +\n\t\t\t\t'left: 0;' +\n\t\t\t\t'width: 100%;' +\n\t\t\t\t'height: 1px;' +\n\t\t\t\t'background-color: rgba(128, 128, 128, 0.3);';\n\n\t\t\tvar ruler = document.createElement('span');\n\t\t\truler.style.cssText = rulerCss + ('bottom: ' + (this.height * 0.66) + 'px;');\n\t\t\twrap.appendChild(ruler);\n\t\t\truler = document.createElement('span');\n\t\t\truler.style.cssText = rulerCss + ('bottom: ' + (this.height * 0.33) + 'px;');\n\t\t\twrap.appendChild(ruler);\n\n\t\t\tthis.graphSpan = document.createElement('div');\n\t\t\tthis.graphSpan.style.cssText = 'height: ' + this.height + 'px;' +\n\t\t\t\t'z-index: 1;';\n\t\t\tthis.graphSpan.title = 'Fixed Update + Update + Render + Lag';\n\n\t\t\tvar barCss = 'width: 1px;' +\n\t\t\t\t'float: left;' +\n\t\t\t\t'margin-top: 0px;';\n\t\t\tvar sectionCss = 'display: block;' +\n\t\t\t\t'height: 0px;';\n\n\t\t\tvar i = this.width;\n\t\t\twhile (i--) {\n\t\t\t\tvar bar = document.createElement('span');\n\t\t\t\tbar.className = 'console-bar';\n\t\t\t\tbar.style.cssText = barCss;\n\t\t\t\tvar sections = Console.sections;\n\t\t\t\tfor (var j = 0, l = sections.length; j < l; j++) {\n\t\t\t\t\tvar section = document.createElement('span');\n\t\t\t\t\tsection.className = 'console-section';\n\t\t\t\t\tsection.style.cssText = sectionCss +\n\t\t\t\t\t\t'background-color: ' + sections[j] + ';';\n\t\t\t\t\tbar.appendChild(section);\n\t\t\t\t}\n\t\t\t\tthis.graphSpan.appendChild(bar);\n\t\t\t}\n\t\t\twrap.appendChild(this.graphSpan);\n\t\t}\n\n\t\t(this.container || document.body).appendChild(wrap);\n\n\t\tthis.lastClick = 0;\n\t\twrap.addEventListener('click', this);\n\n\t\tthis.maximized = !(~(document.cookie || '').indexOf('console_max'));\n\t\tthis.toggle();\n\t}\n\n\thandleEvent(evt) {\n\t\tvar time = evt.timeStamp;\n\t\tif (time - this.lastClick < 500) {\n\t\t\tthis.destroy();\n\t\t}\n\t\tthis.lastClick = time;\n\t\tthis.toggle();\n\t\treturn false;\n\t}\n\n\ttoggle() {\n\t\tif (!this.graphStyle) {\n\t\t\treturn;\n\t\t}\n\t\tvar margin = 0;\n\t\tvar opacity = 1;\n\t\tthis.maximized = !this.maximized;\n\t\tif (!this.maximized) {\n\t\t\topacity = 0.5;\n\t\t\tmargin = -this.height + 20;\n\t\t\tdocument.cookie = 'console_max=; expires=' + (new Date()).toGMTString();\n\t\t} else {\n\t\t\tdocument.cookie = 'console_max=1';\n\t\t}\n\t\tvar style = this.graphSpan.style;\n\t\tstyle.marginTop = margin + 'px';\n\t\tstyle.opacity = opacity;\n\t}\n\n\tfree() {\n\t\t(this.container || document.body).removeChild(this.wrap);\n\t\tthis.wrap.removeEventListener('click', this);\n\t\tthis.wrap = null;\n\t\tthis.container = null;\n\t}\n\n\tonTimeEnd(event) {\n\t\tvar samples = event.detail;\n\t\tvar dt = samples.dt;\n\t\tif (!dt) {\n\t\t\treturn;\n\t\t}\n\t\tthis.dtSum += dt;\n\t\tvar fps = 1 / dt;\n\t\tthis.fpsSum += fps;\n\t\tthis.fpsSq += fps * fps;\n\t\tvar lag = samples.lag;\n\t\tthis.lagSum += lag;\n\t\tthis.lagSq += lag * lag;\n\t\tvar tick = samples.tick;\n\t\tthis.tickSum += tick;\n\t\tthis.tickSq += tick * tick;\n\t\tthis.updateSum += samples.update;\n\t\tthis.fixedUpdateSum += samples.fixedUpdate;\n\t\tthis.renderSum += samples.render;\n\t\tthis.frames++;\n\t\tif (this.dtSum >= this.resolution) {\n\t\t\tthis.renderGraph();\n\t\t}\n\t}\n\n\trenderGraph() {\n\t\tvar colors = Console.colors;\n\t\tvar tickMean = this.tickSum / this.frames;\n\t\tvar tickSD = Math.sqrt((this.tickSq - (this.tickSum * this.tickSum / this.frames)) / (this.frames - 1));\n\n\t\tvar color = colors[0];\n\t\tif (tickMean > 33) {\n\t\t\tcolor = colors[3];\n\t\t} else if (tickMean > 16) {\n\t\t\tcolor = colors[2];\n\t\t} else if (tickMean > 5) {\n\t\t\tcolor = colors[1];\n\t\t}\n\n\t\tthis.tickSpan.textContent = tickMean < 10 ? Math.round(tickMean * 10) / 10 : Math.round(tickMean);\n\t\tthis.tickSpan.style.color = color;\n\t\tthis.tickSpan2.textContent = tickSD < 10 ? Math.round(tickSD || 0 * 10) / 10 : Math.round(tickSD);\n\n\t\tif (this.graphStyle) {\n\t\t\tvar bar = this.graphSpan.appendChild(this.graphSpan.firstChild);\n\t\t\tvar overall = 0;\n\n\t\t\tvar mag = Math.round(this.height * this.lagSum / this.frames / this.cap);\n\t\t\tbar.children[0].style.height = mag + 'px';\n\t\t\toverall += mag;\n\n\t\t\tmag = this.height * this.renderSum / this.frames / this.cap;\n\t\t\tbar.children[1].style.height = mag + 'px';\n\t\t\toverall += mag;\n\n\t\t\tmag = Math.round(this.height * this.updateSum / this.frames / this.cap);\n\t\t\tbar.children[2].style.height = mag + 'px';\n\t\t\toverall += mag;\n\n\t\t\tmag = Math.round(this.height * this.fixedUpdateSum / this.frames / this.cap);\n\t\t\tbar.children[3].style.height = mag + 'px';\n\t\t\toverall += mag;\n\n\t\t\tbar.style.marginTop = (this.height - overall) + 'px';\n\t\t}\n\n\t\tvar fpsMean = this.fpsSum / this.frames;\n\t\tvar fpsSD = Math.sqrt((this.fpsSq - (this.fpsSum * this.fpsSum / this.frames)) / (this.frames - 1));\n\t\tif (fpsMean < 30) {\n\t\t\tcolor = colors[3];\n\t\t} else if (fpsMean < 40) {\n\t\t\tcolor = colors[2];\n\t\t} else if (fpsMean < 55) {\n\t\t\tcolor = colors[1];\n\t\t} else {\n\t\t\tcolor = colors[0];\n\t\t}\n\t\tthis.fpsSpan.textContent = Math.round(fpsMean || 0);\n\t\tthis.fpsSpan.style.color = color;\n\t\tthis.fpsSpan2.textContent = Math.round(fpsSD || 0);\n\n\t\tthis.reset();\n\t}\n\n\treset() {\n\t\tthis.dtSum = 0.0;\n\t\tthis.fpsSum = 0.0;\n\t\tthis.fpsSq = 0.0;\n\t\tthis.tickSum = 0.0;\n\t\tthis.tickSq = 0.0;\n\t\tthis.lagSum = 0.0;\n\t\tthis.lagSq = 0.0;\n\t\tthis.fixedUpdateSum = 0.0;\n\t\tthis.updateSum = 0.0;\n\t\tthis.renderSum = 0.0;\n\t\tthis.frames = 0;\n\t}\n};\n\nConsole.colors = ['#ddd', '#fff', '#ffc', '#fcc'];\n\nConsole.sections = ['#ffff33', '#ff8533', '#2babd6', '#9d2bd6'];\n// ['#fffa5b', '#ff945b', '#5bf4ff', '#bd5bff']\n\nComponent.create(Console, 'console');\n","'use strict';\n\nvar Component = require('./component');\nvar Vec2 = require('../math/vec2');\n\n// http://www.openprocessing.org/sketch/7522\n// https://gist.github.com/mikolalysenko/5580867\n\nfunction Attraction() {\n  this.delta = Vec2();\n}\n\nAttraction.prototype = {\n\n  attributes: {\n    radius: 100,\n    force: 100,\n    target: null,\n    targets: null\n  },\n\n  create: function(attributes) {\n    this.radius = attributes.radius;\n    this.force = attributes.force;\n    this.target = attributes.target;\n    this.targets = attributes.targets;\n    Vec2.set(this.delta);\n  },\n\n  fixedUpdate: function(dt) {\n    Vec2.sub(this.target.transform.position, this.transform.position);\n    var distSq = Vec2.lenSq(this.delta);\n    if (distSq < this.radius * this.radius && distSq > Math.EPSILON) {\n      // this.delta.norm().scale(1.0 - distSq / this.radiusSq);\n      // return p.acc.add(this.delta.scale(this.force));\n    }\n  }\n\n};\n\nnew Component('attraction', Attraction);\n\nmodule.exports = Attraction;\n","'use strict';\n\nvar Registry = require('./registry');\nvar Component = require('./component');\nvar Vec2 = require('../math/vec2');\n\nfunction Avoid() {}\n\nAvoid.prototype.attributes = {\n  targets: null,\n  sight: 100\n};\n\nAvoid.prototype.create = function(attributes) {\n  this.targets = attributes.targets;\n  this.sight = attributes.sight;\n  this.instances = Registry.types[this.targets];\n};\n\nvar impulse = Vec2();\n\nAvoid.prototype.fixedUpdate = function(dt) {\n  Vec2.set(impulse);\n  var targets = this.instances;\n  for (var i = 0, l = targets.length; i < l; i++) {\n    var target = targets[i];\n    if (!target.enabled) {\n      continue;\n    }\n\n    // TODO: Code!\n    // http://rocketmandevelopment.com/2010/07/13/\n    //   steering-behaviors-obstacle-avoidance/\n    // http://my.safaribooksonline.com/book/programming/\n    //   game-programming/0596005555/flocking/ch04_sect1_003\n  }\n\n  this.body.applyForce(impulse);\n};\n\nnew Component('avoid', Avoid);\n\nmodule.exports = Avoid;\n","/**\n * Alternative: https://github.com/jsplumb/jsBezier\n */\n\n// initialize temp used in bezier calcs to avoid allocations\nvar tmpX = new Float32Array(64);\nvar tmpY = new Float32Array(64);\n\n/**\n * Calculates the bezier path vector\n *\n * @param {Number[]} points\n * @param {Number[]} delta\n * @param {Number[]} result\n */\nfunction calcPathBezier(points, delta, result) {\n\tvar count = points.length;\n\tif (count <= 1) {\n\t\tresult[0] = result[1] = 0;\n\t\treturn;\n\t}\n\n\tvar d1 = 1 - delta;\n\n\tfor (var j = 0; j < count; j++) {\n\t\tvar point = points[j];\n\t\ttmpX[j] = point[0];\n\t\ttmpY[j] = point[1];\n\t}\n\n\tfor (var minusOne = count - 1; minusOne > 0; count--, minusOne--) {\n\t\tvar plusOne = 1;\n\t\tfor (var i = 0; i < minusOne; i++, plusOne++) {\n\t\t\ttmpX[i] = tmpX[i] * d1 + tmpX[plusOne] * delta;\n\t\t\ttmpY[i] = tmpY[i] * d1 + tmpY[plusOne] * delta;\n\t\t}\n\t}\n\tresult[0] = tmpX[0];\n\tresult[1] = tmpY[0];\n}","'use strict';\n\n/**\n * CubicBezier\n *\n * http://jsperf.com/cubic-bezier\n *\n * KeySpline - use bezier curve for transition easing function is\n * inspired from Firefox's nsSMILKeySpline.cpp\n *\n * Usage:\n *\n *     var spline = new KeySpline(0.25, 0.1, 0.25, 1.0)\n *     spline.get(x) => returns the easing value | x must be in [0, 1] range\n *\n * @param {Number} p1 Vector\n * @param {Number} p2 Vector\n */\nfunction CubicBezier(p1, p2) {\n\tthis.p1 = p1;\n\tthis.p2 = p2;\n\tthis.linear = (p1[0] == p1[1] && p2[0] == p2[1]);\n}\n\n/**\n * Pre-alculate samples.\n *\n * @param {Number} size Numbers of samples, defaults to 100\n */\nCubicBezier.prototype.sample = function(size) {\n\tif (!size) {\n\t\tsize = 100;\n\t}\n\tthis.sampleSize = size;\n\tvar samples = [];\n\tfor (var i = 0; i < size; i++) {\n\t\tsamples.push(this.get(i / size));\n\t}\n\tthis.samples = new Float32Array(samples);\n};\n\nfunction A(a1, a2) {\n\treturn 1.0 - 3.0 * a2 + 3.0 * a1;\n}\nfunction B(a1, a2) {\n\treturn 3.0 * a2 - 6.0 * a1;\n}\nfunction C(a1) {\n\treturn 3.0 * a1;\n}\n\n/**\n * Get y for time x.\n * @param {Number} x Between 0 and 1\n * @return {Number}\n */\nCubicBezier.prototype.get = function(x) {\n\tif (this.linear) {\n\t\treturn x;\n\t}\n\tif (this.samples) {\n\t\treturn this.samples[x * this.sampleSize | 0];\n\t}\n\n\tvar x1 = this.p1[0];\n\tvar y1 = this.p1[1];\n\tvar x2 = this.p2[0];\n\tvar y2 = this.p2[1];\n\n\t// Newton raphson iteration\n\tvar t = x;\n\tfor (var i = 0; i < 4; ++i) {\n\t\t// use Horner's scheme to evaluate the Bezier polynomial\n\t\tvar currentSlope = 3.0 * A(x1, x2) * t * t + 2.0 * B(x1, x2) * t + C(x1);\n\t\tif (!currentSlope) {\n\t\t\tbreak;\n\t\t}\n\t\tt -= ((((A(x1, x2) * t + B(x1, x2)) * t + C(x1)) * t) - x) / currentSlope;\n\t}\n\treturn t;\n};\n\nmodule.exports = CubicBezier;\n","'use strict';\n\nvar Vec2 = require('../math/vec2');\n\nfunction FMathModule(stdlib) {\n\t'use asm';\n\n\tvar UID = 0;\n\n\t// Variable Declarations\n\tvar sqrt = stdlib.Math.sqrt;\n\tvar x = 0.0;\n\tvar y = 0.0;\n\n\tfunction uid() {\n\t\tUID = (UID | 0 + 1) | 0;\n\t\treturn UID | 0;\n\t}\n\n\tfunction clamp(a, low, high) {\n\t\ta = + a;\n\t\tlow = + low;\n\t\thigh = + high;\n\t\tif (a < low) {\n\t\t\treturn + low;\n\t\t}\n\t\tif (a > high) {\n\t\t\treturn + high;\n\t\t}\n\t\treturn + a;\n\t}\n\n\tfunction lerp(a, b, scalar) {\n\t\ta = + a;\n\t\tb = + b;\n\t\tscalar = + scalar;\n\t\treturn + (a + scalar * (b - a));\n\t}\n\n\tfunction mod(a, b) {\n\t\ta = + a;\n\t\tb = + b;\n\t\ta = + (a % b);\n\t\tif (a * b < 0.0) {\n\t\t\treturn + (a + b);\n\t\t}\n\t\treturn + a;\n\t}\n\n\tfunction vec2Dist(a0, a1, b0, b1) {\n\t\ta0 = + a0;\n\t\ta1 = + a1;\n\t\tb0 = + b0;\n\t\tb1 = + b1;\n\t\tx = + (b0 - a0);\n\t\ty = + (b1 - a1);\n\t\treturn + sqrt(x * x + y * y);\n\t}\n\n\treturn {\n\t\tuid: uid,\n\t\tclamp: clamp,\n\t\tmod: mod,\n\t\tlerp: lerp,\n\t\tvec2Dist: vec2Dist\n\t};\n}\n\nvar FMath = FMathModule(window);\n\n/*\nvar vecA = new Float32Array([1.3, 1.2]);\nvar vecB = new Float32Array([5.3, -10.2]);\n\nfunction vec2Dist(a, b) {\n\treturn FMath.vec2Dist(a[0], a[1], b[0], b[1]);\n}\n\nvar x = 0.0;\n\nfor (var i = 0; i < 100000; i++) {\n\tx = Math.mod(400, 360);\n\tx = FMath.mod(400.0, 360.0);\n\tvec2Dist(vecA, vecB);\n}\n\nconsole.time('fm');\nfor (var i = 0; i < 100000; i++) {\n\tvec2Dist(vecA, vecB);\n}\nconsole.timeEnd('fm');\n\nMath.mod(400, 360);\n\nconsole.time('m');\nfor (var i = 0; i < 100000; i++) {\n\tVec2.dist(vecA, vecB);\n}\nconsole.timeEnd('m');\n*/\n\nmodule.exports = FMath;\n","'use strict';\n/**\n * Heightmap\n *\n * http://www.float4x4.net/index.php/2010/06/\n *   generating-realistic-and-playable-terrain-height-maps/\n */\n\nvar Perlin = require('./perlin');\n\nvar Heightmap = function(size, scale) {\n\tthis.size = size || 256;\n\tthis.scale = scale || 1;\n\n\tthis.perlin = new Perlin();\n\tthis.heights = new Float32Array(size * size);\n};\n\nHeightmap.prototype = {\n\n\tadd: function(scale, ratio) {\n\t\tvar size = this.size;\n\t\tvar perlin = this.perlin;\n\t\tvar heights = this.heights;\n\t\tvar baseScale = this.scale;\n\n\t\tvar x = size;\n\t\twhile (x--) {\n\t\t\tvar y = size;\n\t\t\twhile (y--) {\n\t\t\t\tvar factor = (baseScale + scale) / size;\n\t\t\t\tvar value = perlin.get(x * factor, y * factor, 0) * ratio;\n\t\t\t\theights[x * size + y] += value;\n\t\t\t}\n\t\t}\n\t},\n\n\terode: function(smoothness) {\n\t\tsmoothness = smoothness || 1;\n\t\tvar size = this.size;\n\t\tvar heights = this.heights;\n\n\t\tvar x = size;\n\t\twhile (x--) {\n\t\t\tvar y = size;\n\t\t\twhile (y--) {\n\t\t\t\tvar key = x * size + y;\n\t\t\t\tvar dmax = 0;\n\t\t\t\tvar matchX = 0;\n\t\t\t\tvar matchY = 0;\n\t\t\t\tfor (var u = -1; u <= 1; u++) {\n\t\t\t\t\tvar xu = x + u;\n\t\t\t\t\tif (xu < 0 || xu >= size) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tfor (var v = -1; v <= 1; v++) {\n\t\t\t\t\t\tvar yv = y + v;\n\t\t\t\t\t\tif (yv < 0 || yv >= size) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (Math.abs(u) + Math.abs(v) > 0) {\n\t\t\t\t\t\t\tvar d = heights[key] - heights[(x + u) * size + (y + v)];\n\t\t\t\t\t\t\tif (d > dmax) {\n\t\t\t\t\t\t\t\tdmax = d;\n\t\t\t\t\t\t\t\tmatchX = u;\n\t\t\t\t\t\t\t\tmatchY = v;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (dmax > 0 && dmax <= (smoothness / size)) {\n\t\t\t\t\tvar h = 0.5 * dmax;\n\t\t\t\t\theights[key] -= h;\n\t\t\t\t\theights[(x + matchX) * size + (y + matchY)] += h;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// 3×3 box filter\n\tsmoothen: function(factor) {\n\t\tfactor = factor || 1;\n\t\tvar size = this.size;\n\t\tvar heights = this.heights;\n\n\t\tvar x = size;\n\t\twhile (x--) {\n\t\t\tvar y = size;\n\t\t\twhile (y--) {\n\t\t\t\tvar total = 0;\n\t\t\t\tvar count = 0;\n\t\t\t\tfor (var u = -1; u <= 1; u++) {\n\t\t\t\t\tvar xu = x + u;\n\t\t\t\t\tif (xu < 0 || xu >= size) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tfor (var v = -1; v <= 1; v++) {\n\t\t\t\t\t\tvar yv = y + v;\n\t\t\t\t\t\tif (yv < 0 || yv >= size) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar height = heights[xu * size + yv];\n\t\t\t\t\t\tif (u === 0 && v === 0) {\n\t\t\t\t\t\t\theight *= factor;\n\t\t\t\t\t\t\tcount += factor;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttotal += height || 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\theights[x * size + y] = total / count;\n\t\t\t}\n\t\t}\n\t},\n\n\tget: function(x, y) {\n\t\treturn this.heights[x * this.size + y];\n\t}\n\n};\n\nmodule.exports = Heightmap;","'use strict';\n\n/**\n * @class\n *\n * Improved Perlin Noise\n *\n * http://cs.nyu.edu/~perlin/noise/\n * https://github.com/louisstow/pixelminer/blob/master/lib/perlin.js\n */\n\nfunction Perlin() {\n\tvar permutation = [];\n\tfor (var i = 0; i <= 255; i++) {\n\t\tpermutation[i] = (Math.random() * 255) | 0;\n\t}\n\tthis.permutation = new Uint8Array(permutation.concat(permutation));\n\tconsole.log(this.permutation.length);\n}\n\nPerlin.prototype.get = function(x, y, z) {\n\tvar p = this.permutation;\n\n\tvar floorX = ~~x;\n\tvar floorY = ~~y;\n\tvar floorZ = ~~z;\n\n\tvar X = floorX & 255; // FIND UNIT CUBE THAT\n\tvar Y = floorY & 255; // CONTAINS POINT.\n\tvar Z = floorZ & 255;\n\tx -= floorX; // FIND RELATIVE X,Y,Z\n\ty -= floorY; // OF POINT IN CUBE.\n\tz -= floorZ;\n\n\tvar u = fade(x); // COMPUTE FADE CURVES\n\tvar v = fade(y); // FOR EACH OF X,Y,Z.\n\tvar w = fade(z);\n\n\tvar A = p[X] + Y;\n\tvar AA = p[A] + Z;\n\tvar AB = p[A + 1] + Z; // HASH COORDINATES OF\n\tvar B = p[X + 1] + Y;\n\tvar BA = p[B] + Z;\n\tvar BB = p[B + 1] + Z; // THE 8 CUBE CORNERS,\n\n\treturn lerp(w, lerp(v, lerp(u, grad(p[AA], x, y, z), // AND ADD\n\t\t\t\tgrad(p[BA], x - 1, y, z)), // BLENDED\n\t\t\tlerp(u, grad(p[AB], x, y - 1, z), // RESULTS\n\t\t\t\tgrad(p[BB], x - 1, y - 1, z))), // FROM 8\n\t\tlerp(v, lerp(u, grad(p[AA + 1], x, y, z - 1), // CORNERS\n\t\t\t\tgrad(p[BA + 1], x - 1, y, z - 1)), // OF CUBE\n\t\t\tlerp(u, grad(p[AB + 1], x, y - 1, z - 1),\n\t\t\t\tgrad(p[BB + 1], x - 1, y - 1, z - 1)))) + 0.5;\n};\n\nfunction fade(t) {\n\treturn t * t * t * (t * (t * 6 - 15) + 10);\n}\n\nfunction lerp(t, a, b) {\n\treturn a + t * (b - a);\n}\n\nfunction grad(hash, x, y, z) {\n\tvar h = hash & 15; // CONVERT LO 4 BITS OF HASH CODE\n\tvar u = h < 8 ? x : y; // INTO 12 GRADIENT DIRECTIONS.\n\tvar v = h < 4 ? y : h == 12 || h == 14 ? x : z;\n\treturn ((h & 1) === 0 ? u : -u) + ((h & 2) === 0 ? v : -v);\n}\n\nmodule.exports = Perlin;\n","'use strict';\n\nvar Registry = require('./registry');\nvar Component = require('./component');\nvar Vec2 = require('../math/vec2');\n\nfunction Seek() {}\n\nSeek.prototype.attributes = {\n  targets: null,\n  sight: 100\n};\n\nSeek.prototype.create = function(attributes) {\n  this.targets = attributes.targets;\n  this.sight = attributes.sight;\n  this.instances = Registry.types[this.targets];\n};\n\nvar impulse = Vec2();\n\nSeek.prototype.fixedUpdate = function(dt) {\n  Vec2.set(impulse);\n  var instances = this.instances;\n  for (var i = 0, l = instances.length; i < l; i++) {\n    var target = instances[i];\n    if (!target.enabled) {\n      continue;\n    }\n\n    // TODO: Code!\n    // http://rocketmandevelopment.com/2010/06/11/steering-behaviors-seeking/\n  }\n\n  this.body.applyForce(impulse);\n};\n\nnew Component('seek', Seek);\n\nmodule.exports = Seek;\n","'use strict';\n\nvar Component = require('./component');\nvar Vec2 = require('../math/vec2');\n\n// http://www.openprocessing.org/sketch/7522\n// https://gist.github.com/mikolalysenko/5580867\n\nfunction Spring() {}\n\nSpring.prototype = {\n\n  // attributes: {\n  // },\n\n  create: function(attributes) {\n  },\n\n  fixedUpdate: function(dt) {\n    // http://www.openprocessing.org/sketch/7505\n    /*\n    float d = PVector.dist(position,p.position);\n    // natural separation: 100 units\n    // force on a spring: F=kx\n    // x = displacement from equilibrium position\n    float x = d - 100.0;\n    // apply force *along* the spring:\n    PVector dir = PVector.sub(p.position,position);\n    dir.normalize();\n    // F=ma should apply:\n    // here we adjust the velocity according to the current force\n    dir.mult(x/1000.0);\n    velocity.add(dir);\n    // bounce of the sides:\n    bounce();\n    // friction: dampen any movement:\n    velocity.mult(0.999);\n     */\n  }\n\n};\n\nnew Component('spring', Spring);\n\nmodule.exports = Spring;\n","'use strict';\n\nvar Component = require('./component');\nvar Vec2 = require('../math/vec2');\n\nfunction Tween() {\n\tthis.position = Vec2();\n\tthis.animation = [];\n}\n\nTween.prototype = {\n\n\tattributes: {\n\t\tposition: Vec2(),\n\t\trotation: 0,\n\t\talpha: 1\n\t},\n\n\tcreate: function(attributes) {\n\t\tthis.rotation = attributes.rotation;\n\t\tthis.alpha = attributes.alpha;\n\t\tVec2.copy(this.position, attributes.position);\n\t}\n\n};\n\nnew Component('tween', Tween);\n\nfunction Animation(keyframes) {\n}\n\nAnimation.prototype.update = function(entity, dt) {\n};\n\nTween.Animation = Animation;\n\nmodule.exports = Tween;\n","'use strict';\n\nvar Registry = require('./registry');\nvar Component = require('./component');\nvar Vec2 = require('../math/vec2');\n\nfunction Wander() {}\n\nWander.prototype.attributes = {\n  targets: null,\n  sight: 100\n};\n\nWander.prototype.create = function(attributes) {\n  this.targets = attributes.targets;\n  this.sight = attributes.sight;\n  this.instances = Registry.types[this.targets];\n};\n\nWander.prototype.fixedUpdate = function(dt) {\n  Vec2.set(impulse);\n\n  var instances = this.instances;\n  for (var i = 0, l = instances.length; i < l; i++) {\n    var target = instances[i];\n    if (!target.enabled) {\n      continue;\n    }\n\n    // TODO: Code!\n    // http://gamedev.tutsplus.com/tutorials/implementation/\n    // understanding-steering-behaviors-wander/\n    // http://wiki.unity3d.com/index.php/Wander#JavaScript_Version_Wander.js\n    // http://rocketmandevelopment.com/2010/06/16/steering-behaviors-wander/\n  }\n\n  this.body.applyForce(impulse);\n};\n\nvar impulse = Vec2();\n\nnew Component('wander', Wander);\n\nmodule.exports = Wander;\n","\nimport {clamp} from '../math/mathf';\nimport {random} from '../math/random';\nimport Tweens from '../math/tweens';\n\n/**\n * Initialize from Color array or RGBA. Returns a new (typed) array.\n * @class\n * @classdesc Representation of RGBA colors.\n * @param {Number[]|null} fromOrR Array or red-value\n * @param {Number|null} g Green-value\n * @param {Number|null} b Blue-value\n * @param {Number|null} a Alpha-value\n * @returns {Number[]} new Float32Array [r, g, b, a]\n */\nexport default function Color(fromOrR, g, b, a) {\n\tif (g != null) {\n\t\treturn new Float32Array([fromOrR, g, b, (a != null) ? a : 1]);\n\t}\n\tif (fromOrR != null) {\n\t\treturn new Float32Array([fromOrR[0], fromOrR[1], fromOrR[2],\n\t\t\t(fromOrR[3] != null) ? fromOrR[3] : 1]);\n\t}\n\treturn new Float32Array(Color.white);\n}\n\nColor.white = Color(255, 255, 255);\nColor.black = Color(0, 0, 0);\nColor.gray = Color(128, 128, 128);\nColor.cache = [Color(), Color(), Color(), Color()];\n\n/**\n * Set result from color values\n * @memberOf Color\n * @param {Number[]} result Color to mutate\n * @param {Number} r\n * @param {Number} g\n * @param {Number} b\n * @param {Number} a\n * @return {Number[]} result\n */\nColor.set = function(result, r, g, b, a) {\n\tresult[0] = r || 0;\n\tresult[1] = g || 0;\n\tresult[2] = b || 0;\n\tresult[3] = a || 0;\n\treturn result;\n};\n\n/**\n * Copy to result from other color\n * @param {Number[]} result Target\n * @param {Number[]} b Source\n * @return {Number[]}\n */\nColor.copy = function(result, b) {\n\tresult[0] = b[0];\n\tresult[1] = b[1];\n\tresult[2] = b[2];\n\tresult[3] = b[3];\n\treturn result;\n};\n\nColor.lerp = function(a, b, t, alpha, result) {\n\tresult = result || a;\n\tresult[0] = (1 - t) * a[0] + t * b[0];\n\tresult[1] = (1 - t) * a[1] + t * b[1];\n\tresult[2] = (1 - t) * a[2] + t * b[2];\n\tif (alpha > 0.05) {\n\t\tresult[3] = (1 - t) * a[3] + t * b[3];\n\t} else {\n\t\tresult[3] = a[3];\n\t}\n\treturn result;\n};\n\nColor.toHex = function(a) {\n\tconsole.log(a[0], a[1], a[2]);\n\treturn (a[0] * 255 << 16) + (a[1] * 255 << 8) + (a[2] * 255 << 0);\n};\n\nColor.lerpList = function(result, list, t, ease) {\n\tvar last = list.length - 1;\n\tt = clamp(t * last, 0, last);\n\tvar start = t | 0;\n\tvar sub = (ease || Tweens.linear)(t - start);\n\tif (sub < 0.02) {\n\t\treturn Color.copy(result, list[start]);\n\t}\n\tif (sub > 0.98) {\n\t\treturn Color.copy(result, list[start + 1]);\n\t}\n\treturn Color.lerp(list[start], list[start + 1], sub, null, result);\n};\n\nColor.variant = function(a, t, result) {\n\tt = random(-t, t);\n\treturn Color.lerp(a, (t > 0 ? Color.white : Color.black), t, false, result);\n};\n\nColor.rgba = function(a, alpha) {\n\tif (alpha == null) {\n\t\talpha = a[3];\n\t}\n\tif (alpha > 0.98) {\n\t\treturn 'rgb(' + (a[0] | 0) + ', ' + (a[1] | 0) + ', ' + (a[2] | 0) + ')';\n\t}\n\treturn 'rgba(' + (a[0] | 0) + ', ' + (a[1] | 0) + ', ' + (a[2] | 0) + ', ' + alpha + ')';\n};\n\nColor.defineProperty = function(cls, name) {\n\tvar prop = '_' + name;\n\tObject.defineProperty(cls.prototype, name, {\n\t\tget: function() {\n\t\t\treturn this[prop];\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis[prop][0] = value[0];\n\t\t\tthis[prop][1] = value[1];\n\t\t\tthis[prop][2] = value[2];\n\t\t\tthis[prop][3] = value[3];\n\t\t}\n\t});\n\tvar copy = 'copy' + name.charAt(0).toUpperCase() + name.slice(1);\n\tcls.prototype[copy] = function(result) {\n\t\tresult[0] = this[prop][0];\n\t\tresult[1] = this[prop][1];\n\t\tresult[2] = this[prop][2];\n\t\tresult[3] = this[prop][3];\n\t};\n};\n","\n/*\n * 2x3 Matrix\n * @class\n * @classdesc Float32Array representation of 2x3 transformation matrix.\n * [a, c, tx,\n *  b, d, ty,\n *  0, 0, 1]\n * https://github.com/toji/gl-matrix/blob/master/src/gl-matrix/mat2d.js\n * https://github.com/simonsarris/Canvas-tutorials/blob/master/transform.js\n * @param {Number[]|Number} fromOrA\n * @param {Number} b\n * @param {Number} c\n * @param {Number} d\n * @param {Number} tx\n * @param {Number} ty\n * @returns {Mat2} mat2 New 2D Matrix\n */\nexport default function Mat2(fromOrA, b, c, d, tx, ty) {\n\tif (b != null) {\n\t\treturn new Float32Array([fromOrA, b, c, d, tx, ty]);\n\t}\n\treturn new Float32Array(fromOrA || Mat2.identity);\n}\n\nMat2.identity = Mat2(1, 0, 0, 1, 0, 0);\n\n/**\n * Set Matrix from a, b, c, d, tx, ty\n * @param {Mat2} result [description]\n * @param {Number} a\n * @param {Number} b\n * @param {Number} c\n * @param {Number} d\n * @param {Number} tx\n * @param {Number} ty\n */\nMat2.set = function(result, a, b, c, d, tx, ty) {\n\tresult[0] = a || 0;\n\tresult[1] = b || 0;\n\tresult[2] = (c != null) ? c : 1;\n\tresult[3] = d || 0;\n\tresult[4] = tx || 0;\n\tresult[5] = (ty != null) ? ty : 1;\n\treturn result;\n};\n\nMat2.reset = function(result) {\n\tresult.set(Mat2.identity);\n};\n\nMat2.toString = function(a) {\n\treturn '[' + a[0] + ', ' + a[1] + ' | ' + a[2] + ', ' + a[3] +\n\t' | ' + a[4] + ', ' + a[5] + ']';\n};\n\nMat2.copy = function(result, b) {\n\tresult.set(b || Mat2.identity);\n\treturn result;\n};\n\nMat2.valid = function(a) {\n\treturn !(isNaN(a[0]) || isNaN(a[1]) || isNaN(a[2]) ||\n\t\tisNaN(a[3]) || isNaN(a[4]) || isNaN(a[5]));\n};\n\nMat2.isIdentity = function(a) {\n\treturn a[0] == 1 && a[1] === 0 && a[2] === 0 &&\n\t\ta[3] == 1 && a[4] === 0 && a[5] === 0;\n};\n\nMat2.multiply = function(a, b, result) {\n\tresult = result || a;\n\tvar aa = a[0];\n\tvar ab = a[1];\n\tvar ac = a[2];\n\tvar ad = a[3];\n\tvar atx = a[4];\n\tvar aty = a[5];\n\tvar ba = b[0];\n\tvar bb = b[1];\n\tvar bc = b[2];\n\tvar bd = b[3];\n\tvar btx = b[4];\n\tvar bty = b[5];\n\tresult[0] = aa * ba + ab * bc;\n\tresult[1] = aa * bb + ab * bd;\n\tresult[2] = ac * ba + ad * bc;\n\tresult[3] = ac * bb + ad * bd;\n\tresult[4] = ba * atx + bc * aty + btx;\n\tresult[5] = bb * atx + bd * aty + bty;\n\treturn result;\n};\n\nMat2.rotate = function(a, rad, result) {\n\tresult = result || a;\n\tif (!rad) {\n\t\treturn result;\n\t}\n\tvar aa = a[0];\n\tvar ab = a[1];\n\tvar ac = a[2];\n\tvar ad = a[3];\n\tvar atx = a[4];\n\tvar aty = a[5];\n\tvar st = Math.sin(rad);\n\tvar ct = Math.cos(rad);\n\tresult[0] = aa * ct + ab * st;\n\tresult[1] = -aa * st + ab * ct;\n\tresult[2] = ac * ct + ad * st;\n\tresult[3] = -ac * st + ct * ad;\n\tresult[4] = ct * atx + st * aty;\n\tresult[5] = ct * aty - st * atx;\n\treturn result;\n};\n\nMat2.scale = function(a, v, result) {\n\tresult = result || a;\n\tvar vx = v[0];\n\tvar vy = v[1];\n\tif (vx == 1 && vy == 1) {\n\t\treturn result;\n\t}\n\tresult[0] = a[0] * vx;\n\tresult[1] = a[1] * vy;\n\tresult[2] = a[2] * vx;\n\tresult[3] = a[3] * vy;\n\tresult[4] = a[4] * vx;\n\tresult[5] = a[5] * vy;\n\treturn result;\n};\n\nMat2.translate = function(a, v, result) {\n\tif (!result) {\n\t\tresult = a;\n\t} else {\n\t\tresult[0] = a[0];\n\t\tresult[1] = a[1];\n\t\tresult[2] = a[2];\n\t\tresult[3] = a[3];\n\t}\n\tresult[4] = a[4] + v[0];\n\tresult[5] = a[5] + v[1];\n\treturn result;\n};\n\nMat2.apply = function(a, v, result) {\n\tresult = result || v;\n\tvar x = v[0];\n  var y = v[1];\n  result[0] = x * a[0] + y * a[2] + a[4];\n  result[1] = x * a[1] + y * a[3] + a[5];\n  return result;\n};\n","/** @flow */\n\n/*\n * http://docs.unity3d.com/Documentation/ScriptReference/export html\n * https://github.com/secretrobotron/gladius.math/\n * https://github.com/toji/gl-matrix/tree/master/src/gl-matrix\n *\n * TODO: https://github.com/photonstorm/phaser/blob/master/Phaser/GameMath.ts\n */\nexport const EPSILON = 0.01;\nconst PI = Math.PI;\nexport const TAU = PI * 2;\nexport const HALF_PI = PI / 2;\nexport const RAD2DEG = 180 / PI;\nexport const DEG2RAD = PI / 180;\n\nlet staticUid:number = 1;\n\n/**\n * Generate UID\n * @function uid\n * @return {Number} Unique ID\n */\nexport function uid():number {\n\treturn staticUid++;\n};\n\nexport function clamp(a:number, low:number, high:number):number {\n\tif (a < low) {\n\t\treturn low;\n\t}\n\tif (a > high) {\n\t\treturn high;\n\t}\n\treturn a;\n};\n\nexport function map(a:number, fromLow:number, fromHigh:number, toLow:number, toHigh:number):number {\n\treturn toLow + (((a - fromLow) / (fromHigh - fromLow)) * (toHigh - toLow));\n};\n\n/**\n * Correct modulo behavior\n * @param {Number} a Dividend\n * @param {Number} b Divisor\n * @return {Number} a % b where the result is between 0 and b (either\n *   0 <= x < b or b < x <= 0, depending on the sign of b).\n */\nexport function mod(a:number, b:number):number {\n\ta %= b;\n\treturn (a * b < 0) ? a + b : a;\n};\n\n/**\n * Loops the value t, so that it is never larger than length and never\n * smaller than 0.\n * @param {Number} t\n * @param {Number} length\n * @return {Number}\n */\nexport function repeat(t:number, length:number):number {\n\treturn t - Math.floor(t / length) * length;\n};\n\nexport function toDeg(rad:number):number {\n\treturn rad * RAD2DEG;\n};\n\nexport function toRad(deg:number):number {\n\treturn deg * DEG2RAD;\n};\n\nexport function normDeg(deg:number):number {\n\tdeg %= 360;\n\treturn (deg * 360 < 0) ? deg + 360 : deg;\n};\n\nexport function normRad(rad:number):number {\n\trad %= TAU;\n\treturn (rad * TAU < 0) ? rad + TAU : rad;\n};\n\nexport function distRad(a:number, b:number):number {\n\tlet d = normRad(b) - normRad(a);\n\tif (d > PI) {\n\t\treturn d - TAU;\n\t}\n\tif (d <= -PI) {\n\t\treturn d + TAU;\n\t}\n\treturn d;\n};\n\nexport function distDeg(a:number, b:number):number {\n\tlet d = normDeg(b) - normDeg(a);\n\tif (d > 180) {\n\t\treturn d - 360;\n\t}\n\tif (d <= -180) {\n\t\treturn d + 360;\n\t}\n\treturn d;\n};\n\n/**\n * Performs linear interpolation between values a and b.\n * @param {Number} a\n * @param {Number} b\n * @param {Number} scalar The proportion between a and b.\n * @return {Number} The interpolated value between a and b.\n */\nexport function lerp(a:number, b:number, scalar:number):number {\n\treturn a + scalar * (b - a);\n};\n\nexport function distAng(a:number, b:number):number {\n\tif (a == b) {\n\t\treturn 0;\n\t}\n\tlet ab = (a < b);\n\tlet l = ab ? (-a - TAU + b) : (b - a);\n\tlet r = ab ? (b - a) : (TAU - a + b);\n\treturn (Math.abs(l) > Math.abs(r)) ? r : l;\n};\n\nlet dampState = {\n\tvalue: 0,\n\tvelocity: 0\n};\n\n/**\n * Gradually changes a value towards a desired goal over time.\n *\n * http://docs.unity3d.com/Documentation/ScriptReference/export SmoothDamp.html\n * http://answers.unity3d.com/questions/24756/formula-behind-smoothdamp.html\n */\nexport function smoothDamp(a:number, b:number, velocity:number, time:number, maxVelocity:number, delta:number):{value: number; velocity: number} {\n\ttime = Math.max(EPSILON, time);\n\tdelta = Math.max(0.02, delta);\n\tlet num = 2 / time;\n\tlet num2 = num * delta;\n\tlet num3 = 1 / (1 + num2 + 0.48 * num2 * num2 + 0.235 * num2 * num2 * num2);\n\tlet num4 = a - b;\n\tlet num5 = b;\n\tlet num6 = (maxVelocity || Number.POSITIVE_INFINITY) * time;\n\tnum4 = clamp(num4, -num6, num6);\n\tb = a - num4;\n\tlet num7 = (velocity + num * num4) * delta;\n\tvelocity = (velocity - num * num7) * num3;\n\tlet value = b + (num4 + num7) * num3;\n\tif (num5 - a > 0 == value > num5) {\n\t\tvalue = num5;\n\t\tvelocity = (value - num5) / delta;\n\t}\n\tdampState.value = value;\n\tdampState.velocity = velocity;\n\treturn dampState;\n};\n","/* @flow */\n\n// API ideas: http://docs.python.org/2/library/random.html\n// http://weblog.bocoup.com/random-numbers/\n// https://gist.github.com/Protonk/5367430\n\n// Linear Congruential Generator\n// Variant of a Lehman Generator\n\n// Set to values from http://en.wikipedia.org/wiki/Numerical_Recipes\n// m is basically chosen to be large (as it is the max period)\n// and for its relationships to a and c\nlet m = 4294967296;\n// a - 1 should be divisible by m's prime factors\nlet a = 1664525;\n// c and m should be co-prime\nlet c = 1013904223;\nlet z = 0;\n\n/**\n * Seed based Math.random()\n * Inspired by http://processing.org/reference/random_.html\n * @param  {Number} low\n * @param  {Number} high\n * @return {Number} Number between 0 and 1\n */\nexport function random(low:number, high:number):number {\n\tif (high == null) {\n\t\tif (low == null) {\n\t\t\thigh = 1.0;\n\t\t} else {\n\t\t\thigh = low;\n\t\t}\n\t\tlow = 0.0;\n\t}\n\t// define the recurrence relationship\n\tz = (a * z + c) % m;\n\t// return a float in [0, 1)\n\t// if z = m then z / m = 0 therefore (z % m) / m < 1 always\n\treturn z / m * (high - low) + low;\n};\n\nexport {random as random};\n\n/**\n * Set seed\n * @param  {Number} seed\n */\nexport function srand(seed:number):void {\n\tz = seed | 0;\n}\n\nexport function values(values:Array<number>):number {\n\treturn values[random(values.length) | 0];\n}\n\nexport function valuesKey(values:Array<number>):number {\n\treturn random(values.length) | 0;\n}\n\nexport function chance(chance:number):boolean {\n\treturn random(0, 1) <= chance;\n}\n\n/**\n// http://www.protonfish.com/random.shtml\nfunction rnd_snd() {\n\treturn (Math.random()*2-1)+(Math.random()*2-1)+(Math.random()*2-1);\n}\n\nfunction rnd(mean, stdev) {\n\treturn Math.round(rnd_snd()*stdev+mean);\n}\n*/\n","/* @flow */\n\nvar Tweens = {\n\tlinear: function(t:number):number {\n\t\treturn t;\n\t}\n};\n\nexport default Tweens;\n\n// http://greweb.me/2012/02/bezier-curve-based-easing-functions-from-concept-to-implementation/\n// https://github.com/petehunt/react-touch/blob/gh-pages/src/math/EasingFunctions.js\n// https://gist.github.com/gre/1650294\n// http://joshondesign.com/2013/03/01/improvedEasingEquations\n\nfunction powIn(exp:number) {\n\treturn function(t:number):number {\n\t\treturn Math.pow(t, exp);\n\t};\n}\n\nfunction toOut(exp:number) {\n\treturn function(t:number):number {\n\t\treturn 1 - Math.pow(1 - t, exp);\n\t};\n}\n\nfunction toInOut(exp:number) {\n\treturn function(t:number):number {\n\t\treturn ((t < 0.5) ? Math.pow(t * 2, exp) : 2 - Math.pow(2 * (1 - t), exp)) / 2;\n\t};\n}\n\nvar transitions = ['quad', 'cubic', 'quart', 'quint'];\nfor (var i = 0, l = transitions.length; i < l; i++) {\n\tvar transition = transitions[i];\n\tTweens[transition + 'In'] = powIn(i + 2);\n\tTweens[transition + 'Out'] = toOut(i + 2);\n\tTweens[transition + 'InOut'] = toInOut(i + 2);\n}\n","\nimport {clamp, EPSILON, TAU} from '../math/mathf';\nimport {random} from '../math/random';\n\nlet freeStack = [];\nlet sweepStack = [];\n\n/**\n * Initialize from Vec2 array or x/y values. Returns a new (typed) array.\n * @class\n * @classdesc Float32Array representation of 2D vectors and points.\n * @param {Vec2|Number} [fromOrX=Vec2.zero] Typed array to copy from or x\n * @param {Number} y y, when x was provided as first argument\n * @returns {Vec2} vec2 New 2D Vector\n */\nexport default function Vec2(fromOrX, y) {\n\tlet a = freeStack.pop() || new Float32Array(2);\n\tif (y != null) {\n\t\ta[0] = fromOrX;\n\t\ta[1] = y;\n\t} else if (fromOrX != null) {\n\t\ta[0] = fromOrX[0];\n\t\ta[1] = fromOrX[1];\n\t} else {\n\t\ta[0] = 0.0;\n\t\ta[1] = 0.0;\n\t}\n\treturn a;\n}\n\nVec2.marked = function() {\n\tlet a = Vec2()\n\tsweepStack.push(a);\n\treturn a;\n};\n\nVec2.sweep = function() {\n\tif (sweepStack.length > 0) {\n\t\tfreeStack.push.apply(freeStack, sweepStack);\n\t\tsweepStack.length = 0;\n\t}\n};\n\nVec2.destroy = function(a) {\n\tfreeStack.push(a);\n};\n\nVec2.zero = Vec2(0, 0);\nVec2.one = Vec2(1, 1);\nVec2.center = Vec2(0.5, 0.5);\nVec2.topLeft = Vec2(0, 0);\nVec2.topCenter = Vec2(0.5, 0);\nVec2.topRight = Vec2(1, 0);\nVec2.centerLeft = Vec2(0, 0.5);\nVec2.centerRight = Vec2(1, 0.5);\nVec2.bottomLeft = Vec2(1, 1);\nVec2.bottomCenter = Vec2(0.5, 1);\nVec2.bottomRight = Vec2(0.5, 0.5);\n\n/**\n * Set vector from x and y value\n * @param {Vec2} result Vec2 to mutate\n * @param {Number} [x=0]\n * @param {Number} [y=0]\n * @return {Vec2} result\n */\nVec2.set = function(result, x, y) {\n\tresult[0] = x || 0;\n\tresult[1] = y || 0;\n\treturn result;\n};\n\nVec2.copy = function(result, b) {\n\tresult[0] = b[0];\n\tresult[1] = b[1];\n\treturn result;\n};\n\nVec2.reset = function(result) {\n\tresult[0] = 0;\n\tresult[1] = 0;\n\treturn result;\n};\n\nVec2.valid = function(a) {\n\treturn !(isNaN(a[0]) || isNaN(a[1]));\n};\n\nVec2.toString = function(a) {\n\treturn `[${a[0]}, ${a[1]}]`;\n};\n\nlet objVecCache = Vec2();\n\nVec2.fromObj = function(obj, a) {\n\ta = a || objVecCache;\n\ta[0] = obj.x;\n\ta[1] = obj.y;\n\treturn a;\n};\n\nlet objCache = {\n\tx: 0,\n\ty: 0\n};\nVec2.toObj = function(a, obj) {\n\tobj = obj || objCache;\n\tobj.x = a[0];\n\tobj.y = a[1];\n\treturn obj;\n};\n\nVec2.equals = function(a, b) {\n\treturn a[0] == b[0] && a[1] == b[1];\n};\n\nVec2.approx = function(a, b) {\n\treturn Math.abs(a[0] - b[0]) < EPSILON && Math.abs(a[1] - b[1]) < EPSILON;\n};\n\nVec2.isZero = function(a, b) {\n\treturn a[0] === 0 && a[1] === 0;\n};\n\nVec2.approxZero = function(a, b) {\n\treturn a[0] < EPSILON && a[0] > -EPSILON && a[1] < EPSILON && a[1] > -EPSILON;\n};\n\nVec2.add = function(a, b, result) {\n\tresult = result || a;\n\tresult[0] = a[0] + b[0];\n\tresult[1] = a[1] + b[1];\n\treturn result;\n};\n\nVec2.sub = function(a, b, result) {\n\tresult = result || a;\n\tresult[0] = a[0] - b[0];\n\tresult[1] = a[1] - b[1];\n\treturn result;\n};\n\nVec2.mul = function(a, b, result) {\n\tresult = result || a;\n\tresult[0] = a[0] * b[0];\n\tresult[1] = a[1] * b[1];\n\treturn result;\n};\n\nVec2.scale = function(a, scalar, result) {\n\tresult = result || a;\n\tresult[0] = a[0] * scalar;\n\tresult[1] = a[1] * scalar;\n\treturn result;\n};\n\nVec2.norm = function(a, result, scalar) {\n\tresult = result || a;\n\tlet x = a[0];\n\tlet y = a[1];\n\tlet len = (scalar || 1) / (Math.sqrt(x * x + y * y) || 1);\n\tresult[0] = x * len;\n\tresult[1] = y * len;\n\treturn result;\n};\n\nVec2.lenSq = function(a) {\n\treturn a[0] * a[0] + a[1] * a[1];\n};\n\nVec2.len = function(a) {\n\treturn Math.sqrt(a[0] * a[0] + a[1] * a[1]);\n};\n\nVec2.dot = function(a, b) {\n\treturn a[0] * b[0] + a[1] * b[1];\n};\n\nVec2.cross = function(a, b) {\n\treturn a[0] * b[1] - a[1] * b[0];\n};\n\n/**\n * Linear interpolation\n * http://en.wikipedia.org/wiki/Lerp_%28computing%29\n * @param  {Vec2} a\n * @param  {Vec2} b\n * @param  {Number} scalar Interpolation parameter between 0 and 1\n * @return {Vec2} Result\n */\nVec2.lerp = function(a, b, scalar, result) {\n\tresult = result || a;\n\tresult[0] = a[0] + scalar * (b[0] - a[0]);\n\tresult[1] = a[1] + scalar * (b[1] - a[1]);\n\treturn result;\n};\n\nlet slerpCacheA = Vec2();\nlet slerpCacheB = Vec2();\n\n/**\n * Spherical linear interpolation\n * http://en.wikipedia.org/wiki/Slerp\n * @param  {Vec2} a\n * @param  {Vec2} b\n * @param  {Number} scalar Interpolation parameter between 0 and 1\n * @return {Vec2} Result\n */\nVec2.slerp = function(a, b, scalar, result) {\n\tresult = result || a;\n\tlet omega = Math.acos(clamp(Vec2.dot(\n\t\tVec2.norm(a, slerpCacheA),\n\t\tVec2.norm(b, slerpCacheB)\n\t), -1, 1));\n\treturn Vec2.lerp(a, b, Math.min(scalar, omega) / omega, result);\n};\n\nVec2.max = function(a, b, axis) {\n\tif (axis != null) {\n\t\treturn (a[axis] > b[axis]) ? a : b;\n\t}\n\treturn (Vec2.lenSq(a) > Vec2.lenSq(b)) ? a : b;\n};\n\nVec2.perp = function(a, result) {\n\tresult = result || a;\n\tlet x = a[0];\n\tresult[0] = a[1];\n\tresult[1] = -x;\n\treturn result;\n};\n\nVec2.dist = function(a, b) {\n\tlet x = b[0] - a[0];\n\tlet y = b[1] - a[1];\n\treturn Math.sqrt(x * x + y * y);\n};\n\nVec2.distSq = function(a, b) {\n\tlet x = b[0] - a[0];\n\tlet y = b[1] - a[1];\n\treturn x * x + y * y;\n};\n\nVec2.near = function(a, b, dist) {\n\treturn Vec2.distSq(a, b) <= dist * dist;\n};\n\nVec2.limit = function(a, max, result) {\n\tresult = result || a;\n\tlet x = a[0];\n\tlet y = a[1];\n\tlet ratio = max / Math.sqrt(x * x + y * y);\n\tif (ratio < 1) {\n\t\tresult[0] = x * ratio;\n\t\tresult[1] = y * ratio;\n\t} else if (result !== a) {\n\t\tresult[0] = x;\n\t\tresult[1] = y;\n\t}\n\treturn result;\n};\n\nVec2.clamp = Vec2.limit;\n\nlet radCache1 = Vec2();\nlet radCache2 = Vec2();\n\nVec2.rad = function(a, b) {\n\tif (!b) {\n\t\treturn Math.atan2(a[1], a[0]);\n\t}\n\treturn Math.acos(\n\t\tVec2.dot(Vec2.norm(a, radCache1), Vec2.norm(b, radCache2))\n\t);\n};\n\nVec2.rotate = function(a, theta, result) {\n\tresult = result || a;\n\tlet sinA = Math.sin(theta);\n\tlet cosA = Math.cos(theta);\n\tresult[0] = a[0] * cosA - a[1] * sinA;\n\tresult[1] = a[0] * sinA + a[1] * cosA;\n\treturn result;\n};\n\nVec2.rotateAxis = function(a, b, theta, result) {\n\treturn Vec2.add(\n\t\tVec2.rotate(\n\t\t\tVec2.sub(a, b, result || a),\n\t\t\ttheta\n\t\t),\n\t\tb\n\t);\n};\n\nVec2.rotateTo = function(a, rad, result) {\n\tresult = result || a;\n\tlet len = Vec2.len(a);\n\treturn Vec2.rotate(Vec2.set(result, len, 0), rad);\n};\n\nVec2.lookAt = function(a, b, result) {\n\tlet len = Vec2.len(a);\n\treturn Vec2.norm(\n\t\tVec2.rotate(\n\t\t\ta,\n\t\t\tMath.atan2(b[0] - a[0], b[1] - a[1]) - Math.atan2(a[1], a[0]),\n\t\t\tresult || a\n\t\t),\n\t\tnull, len\n\t);\n};\n\nVec2.variant = function(a, delta, result) {\n\tresult = result || a;\n\tresult[0] = a[0] + random(-delta, delta);\n\tresult[1] = a[1] + random(-delta, delta);\n\treturn result;\n};\n\nVec2.variantCirc = function(a, delta, result) {\n\tresult = result || a;\n\tlet len = random(0, delta);\n\tlet theta = random(0, TAU);\n\tresult[0] = a[0] + len * Math.cos(theta);\n\tresult[1] = a[1] + len * Math.sin(theta);\n\treturn result;\n};\n\nVec2.variantRad = function(a, delta, result) {\n\treturn Vec2.rotate(a, random(-delta, delta), result);\n};\n\nVec2.variantLen = function(a, delta, result) {\n\treturn Vec2.norm(a, result, Vec2.len(a) + random(-delta, delta));\n};\n\nVec2.defineProperty = function(cls, name, options) {\n\tif (options == null) {\n\t\toptions = {};\n\t}\n\tlet prop = '_' + name;\n\tlet descriptor = {};\n\tif (!options.noGet) {\n\t\tdescriptor.get = function() {\n\t\t\treturn this[prop];\n\t\t};\n\t}\n\tif (options.dirty) {\n\t\tdescriptor.set = function(value) {\n\t\t\tthis[prop][0] = value[0];\n\t\t\tthis[prop][1] = value[1];\n\t\t\tthis.dirty = true;\n\t\t}\n\t} else if (!options.noSet) {\n\t\tdescriptor.set = function(value) {\n\t\t\tthis[prop][0] = value[0];\n\t\t\tthis[prop][1] = value[1];\n\t\t}\n\t}\n\tObject.defineProperty(cls.prototype, name, descriptor);\n\tlet copy = 'copy' + name.charAt(0).toUpperCase() + name.slice(1);\n\tcls.prototype[copy] = function(result) {\n\t\tresult[0] = this[prop][0];\n\t\tresult[1] = this[prop][1];\n\t\treturn result;\n\t};\n};\n","/** @flow weak */\n/**\n * @module core/body\n */\n\nimport Component from '../core/component';\nimport {TAU} from '../math/mathf';\nimport Vec2 from '../math/vec2';\n\n/**\n * @class Body\n * Velocity integrator\n *\n * Related links:\n * http://hg.positiontspectacular.com/toxiclibs/src/689ddcd9bea3/src.physics/toxi/physics2d\n * @extends Component\n */\nexport default class Body extends Component {\n\tconstructor() {\n\t\tComponent.call(this);\n\t\tthis.mass = 0.0;\n\t\tthis.drag = 0.0;\n\t\tthis.friction = 0.0;\n\t\tthis.density = 0.0;\n\t\tthis.restitution = 1.0;\n\t\tthis.fixed = false;\n\t\tthis.maxVelocity = 0.0;\n\t\tthis.maxForce = 0.0;\n\t\tthis.minVelocity = 0.0;\n\t\tthis.angularVelocity = 0.0;\n\t\tthis.torque = 0.0;\n\t\tthis.continuousTorque = 0.0;\n\t\tthis.angularDrag = 0.0;\n\t\tthis.angularFriction = 0.0;\n\t\tthis.fixedRotation = false;\n\t\tthis.maxAngularVelocity = 0.0;\n\t\tthis.maxAngularForce = 0.0;\n\t\tthis.minAngularVelocity = 0.0;\n\t\tthis.fast = false;\n\t\tthis.awake = false;\n\t\tthis.allowSleep = false;\n\t\tthis.bullet = false;\n\n\t\tthis._velocity = Vec2();\n\t\tthis._force = Vec2();\n\t\tthis._continuousForce = Vec2();\n\t}\n\n\tget attributes() {\n\t\treturn {\n\t\t\tmass: 1.0,\n\t\t\tvelocity: Vec2(),\n\t\t\tforce: Vec2(),\n\t\t\tcontinuousForce: Vec2(),\n\t\t\tdrag: 0.999,\n\t\t\tfriction: 15.0,\n\t\t\tdensity: 1.0,\n\t\t\trestitution: 0.2,\n\t\t\tfixed: false,\n\t\t\tfixedRotation: true,\n\t\t\tmaxVelocity: 75.0,\n\t\t\tmaxForce: 2000.0,\n\t\t\tminVelocity: 1.0,\n\t\t\tangularVelocity: 0.0,\n\t\t\ttorque: 0.0,\n\t\t\tcontinuousTorque: 0.0,\n\t\t\tangularDrag: 0.999,\n\t\t\tangularFriction: 1.0,\n\t\t\tmaxAngularVelocity: 0.0,\n\t\t\tmaxAngularForce: 0.0,\n\t\t\tminAngularVelocity: TAU / 360,\n\t\t\tfast: false,\n\t\t\tbullet: false,\n\t\t\tawake: true,\n\t\t\tallowSleep: true\n\t\t};\n\t}\n\n\tget direction() {\n\t\treturn Vec2.rad(this._velocity);\n\t}\n\n\tset direction(rad) {\n\t\tVec2.rotateTo(this._velocity, rad);\n\t}\n\n\tget speed() {\n\t\treturn Vec2.len(this._velocity);\n\t}\n\n\tset speed(length) {\n\t\tVec2.norm(this._velocity, null, length);\n\t}\n\n\tapplyForce(impulse, ignoreMass, continues) {\n\t\tVec2.add(\n\t\t\t(continues) ? this._continuousForce : this._force, (!ignoreMass && this.mass !== 1) ?\n\t\t\tVec2.scale(impulse, 1 / (this.mass || 1), cache) :\n\t\t\timpulse\n\t\t);\n\t}\n\n\tapplyTorque(impulse, ignoreMass, continues) {\n\t\tVec2.add(\n\t\t\t(continues) ? this._continuousForce : this._force, (!ignoreMass && this.mass !== 1) ?\n\t\t\tVec2.scale(impulse, 1 / (this.mass || 1), cache) :\n\t\t\timpulse\n\t\t);\n\t}\n};\n\nlet cache = Vec2();\n\nVec2.defineProperty(Body, 'velocity');\nVec2.defineProperty(Body, 'force');\nVec2.defineProperty(Body, 'continuousForce');\n\nComponent.create(Body, 'body');\n","import Component from '../core/component';\nimport Vec2 from '../math/vec2';\n\n/**\n * @class Boid\n * Steering behaviour\n * - http://www.openprocessing.org/sketch/7493\n * - http://www.openprocessing.org/sketch/11045\n * - https://github.com/paperjs/paper.js/blob/master/examples/Paperjs.org/Tadpoles.html\n *\n * @extends Component\n *\n * @constructor\n */\nclass Boid extends Component {\n\tconstructor() {\n\t\tComponent.call(this);\n\t\tthis.aura = 0.0;\n\t\tthis.perception = 0.0;\n\t\tthis.perceptionSq = 0.0;\n\t\tthis.auraSq = 0.0;\n\t\tthis.mod = 2;\n\t\tthis.cohesionMod = 1;\n\t\tthis.avoidanceMod = 2;\n\t\tthis.imitationMod = 1;\n\t}\n\n\tget attributes() {\n\t\treturn {\n\t\t\tperception: 0.0,\n\t\t\taura: 0.0\n\t\t};\n\t}\n\n\tcreate() {\n\t\tif (this.components.bounds) {\n\t\t\tif (this.aura === 0) {\n\t\t\t\tthis.aura = this.components.bounds.radius * 2;\n\t\t\t}\n\t\t\tif (this.perception === 0) {\n\t\t\t\tthis.perception = this.aura * 4;\n\t\t\t}\n\t\t}\n\t\tthis.perceptionSq = this.perception * this.perception;\n\t\tthis.auraSq = this.aura * this.aura;\n\t}\n}\n\n\nlet cohesion = Vec2();\nlet avoidance = Vec2();\nlet imitation = Vec2();\nlet distance = Vec2();\nlet impulse = Vec2();\n\nBoid.fixedUpdate = function(dt) {\n\tlet boids = this.registry.instances;\n\tlet len = boids.length;\n\tlet i = len;\n\twhile (i--) {\n\t\tlet boid1 = boids[i];\n\t\tif (!boid1.enabled) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tlet entity1 = boid1.entity;\n\t\tlet pos1 = entity1.components.transform.position;\n\t\tlet vel = entity1.components.body.velocity;\n\n\t\tlet avoidanceCount = 0;\n\t\tlet imitationCount = 0;\n\t\tlet cohesionCount = 0;\n\t\tVec2.set(impulse);\n\n\t\tlet j = len;\n\t\twhile (j--) {\n\t\t\tlet boid2 = boids[j];\n\t\t\tif (!boid2.enabled || boid1 === boid2) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet entity2 = boid2.entity;\n\t\t\tlet pos2 = entity2.components.transform.position;\n\n\t\t\tlet diffSq = Vec2.distSq(pos1, pos2);\n\t\t\tif (diffSq < boid1.perceptionSq && diffSq) {\n\t\t\t\tVec2.sub(pos2, pos1, distance);\n\t\t\t\t// Vec2.scale(distance, Math.sqrt(entity1.body.mass / entity2.body.mass));\n\n\t\t\t\t// diff = Math.sqrt(diffSq)\n\t\t\t\t// Vec2.scale(distance, Math.quadInOut(diff / boid1.perception), cache)\n\n\t\t\t\t// Cohesion : try to approach other boids\n\t\t\t\tcohesionCount++;\n\t\t\t\tif (cohesionCount == 1) {\n\t\t\t\t\tVec2.copy(cohesion, distance);\n\t\t\t\t} else {\n\t\t\t\t\tVec2.add(cohesion, distance);\n\t\t\t\t}\n\n\t\t\t\t// Imitation : try to move in the same way than other boids\n\t\t\t\timitationCount++;\n\t\t\t\tif (imitationCount == 1) {\n\t\t\t\t\tVec2.copy(imitation, entity2.components.body.velocity);\n\t\t\t\t} else {\n\t\t\t\t\tVec2.add(imitation, entity2.components.body.velocity);\n\t\t\t\t}\n\n\t\t\t\t// Avoidance : try to keep a minimum distance between others.\n\t\t\t\tif (diffSq < boid1.auraSq) {\n\t\t\t\t\tavoidanceCount++;\n\t\t\t\t\tif (avoidanceCount == 1) {\n\t\t\t\t\t\tVec2.copy(avoidance, distance);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tVec2.add(avoidance, distance);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet mod = boid1.mod;\n\t\tif (cohesionCount && boid1.cohesionMod) {\n\t\t\tif (cohesionCount > 1) {\n\t\t\t\tVec2.scale(cohesion, 1 / cohesionCount);\n\t\t\t}\n\t\t\tentity1.components.body.applyForce(\n\t\t\t\tVec2.scale(cohesion, boid1.cohesionMod * mod),\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\n\t\tif (imitationCount && boid1.imitationMod) {\n\t\t\tif (imitationCount > 1) {\n\t\t\t\tVec2.scale(imitation, 1 / imitationCount);\n\t\t\t}\n\t\t\tVec2.add(impulse, Vec2.scale(imitation, boid1.imitationMod * mod));\n\t\t\tentity1.components.body.applyForce(\n\t\t\t\tVec2.sub(impulse, vel),\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\n\t\tif (avoidanceCount && boid1.avoidanceMod) {\n\t\t\tif (avoidanceCount > 1) {\n\t\t\t\tVec2.scale(avoidance, 1 / avoidanceCount);\n\t\t\t}\n\t\t\tentity1.components.body.applyForce(\n\t\t\t\tVec2.scale(avoidance, boid1.avoidanceMod * mod),\n\t\t\t\ttrue\n\t\t\t);\n\t\t}\n\t}\n};\n\nComponent.create(Boid, 'boid');\n","\nimport Component from '../core/component';\nimport Registry from '../core/registry';\nimport Vec2 from '../math/vec2';\nimport Context from '../core/context';\nimport Event from '../core/event';\n\nclass BorderEvent extends Event {\n\tconstructor() {\n\t\tEvent.call(this);\n\t\tthis.cancelable = true;\n\t\tthis.diff = 0.0;\n\t\tthis.contact = 0;\n\t}\n}\nEvent.register(BorderEvent, 'border');\n\nlet position = Vec2();\nlet velocity = Vec2();\n\n/**\n * @class Border\n * Border lets entities react on contact with the canvas borders.\n * @extends Component\n * @property {String} [mode=\"bounce\"] Reaction to contact with border, \"constrain\", \"bounce\", \"mirror\", \"kill\"\n * @property {Number} [restitution=1] Restitution on bounce\n * @fires Border#onBorder\n */\nclass Border extends Component {\n\tconstructor() {\n\t\tComponent.call(this);\n\t\tthis.mode = '';\n\t\tthis.restitution = 0.0;\n\t}\n\n\tget attributes() {\n\t\treturn {\n\t\t\tmode: 'bounce',\n\t\t\trestitution: 1\n\t\t};\n\t}\n\n\tsimulate(dt) {\n\t\tlet topLeft = Context.renderer.topLeft;\n\t\tlet bottomRight = Context.renderer.bottomRight;\n\t\tlet restitution = this.restitution;\n\t\tlet mode = this.mode;\n\t\tlet mirror = (mode == 'mirror');\n\t\tlet bounce = (mode == 'bounce');\n\t\tlet entity = this.entity;\n\t\tlet body = entity.components.body;\n\t\tif (bounce && body != null) {\n\t\t\tif (!body.enabled || !body.awake) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tbody.copyVelocity(velocity);\n\t\t}\n\t\tlet transform = entity.components.transform;\n\t\ttransform.copyPosition(position);\n\t\tlet bounds = entity.components.bounds;\n\t\tlet contact = -1;\n\n\t\t// Horizontal\n\t\tlet diff = (bounce ? bounds.left : bounds.right) - topLeft[0];\n\t\tif (diff <= 0) {\n\t\t\tcontact = 3;\n\t\t\tif (mirror) {\n\t\t\t\tposition[0] = bottomRight[0] + bounds.width;\n\t\t\t} else {\n\t\t\t\tposition[0] -= diff;\n\t\t\t\tif (bounce) {\n\t\t\t\t\tvelocity[0] *= -restitution;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tdiff = (bounce ? bounds.right : bounds.left) - bottomRight[0];\n\t\t\tif (diff >= 0) {\n\t\t\t\tcontact = 1;\n\t\t\t\tif (mirror) {\n\t\t\t\t\tposition[0] = topLeft[0] - bounds.width;\n\t\t\t\t} else {\n\t\t\t\t\tposition[0] -= diff;\n\t\t\t\t\tif (bounce) {\n\t\t\t\t\t\tvelocity[0] *= -restitution;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Vertical\n\t\t\t\tdiff = (bounce ? bounds.top : bounds.bottom) - topLeft[1];\n\t\t\t\tif (diff <= 0) {\n\t\t\t\t\tcontact = 0;\n\t\t\t\t\tif (mirror) {\n\t\t\t\t\t\tposition[1] = bottomRight[1] + bounds.height;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tposition[1] -= diff;\n\t\t\t\t\t\tif (bounce) {\n\t\t\t\t\t\t\tvelocity[1] *= -restitution;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdiff = (bounce ? bounds.bottom : bounds.top) - bottomRight[1];\n\t\t\t\t\tif (diff >= 0) {\n\t\t\t\t\t\tcontact = 2;\n\t\t\t\t\t\tif (mirror) {\n\t\t\t\t\t\t\tposition[1] = topLeft[1] - bounds.height;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tposition[1] -= diff;\n\t\t\t\t\t\t\tif (bounce) {\n\t\t\t\t\t\t\t\tvelocity[1] *= -restitution;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// We contact\n\t\tif (contact < 0) {\n\t\t\treturn;\n\t\t}\n\t\tlet event = Event.create('border');\n\t\tevent.contact = contact;\n\t\tevent.diff = diff;\n\t\tif (!this.emit(event)) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.mode == 'kill') {\n\t\t\tentity.destroy();\n\t\t\treturn;\n\t\t}\n\t\ttransform.translateTo(position);\n\t\tif (bounce && body != null) {\n\t\t\tbody.velocity = velocity;\n\t\t}\n\n\t}\n}\n\nComponent.create(Border, 'border');\n","\nimport Component from '../core/component';\nimport Event from '../core/event';\nimport Vec2 from '../math/vec2';\n\nclass TriggerEvent extends Event {\n\tconstructor() {\n\t\tEvent.call(this);\n\t\tthis.other = null;\n\t\tthis.overlap = 0.0;\n\t\tthis._normal = Vec2();\n\t}\n}\nVec2.defineProperty(TriggerEvent, 'normal');\nEvent.register(TriggerEvent, 'trigger');\n\nclass CollideEvent extends Event {\n\tconstructor() {\n\t\tEvent.call(this);\n\t\tthis.other = null;\n\t\tthis._normal = Vec2();\n\t}\n}\nVec2.defineProperty(CollideEvent, 'normal');\nEvent.register(CollideEvent, 'collide');\n\n/**\n * Collider\n *\n * Circle only\n *\n * http://jsperf.com/circular-collision-detection/2\n * https://sites.google.com/site/t3hprogrammer/research/circle-circle-collision-tutorial#TOC-Dynamic-Circle-Circle-Collision\n * http://gamedev.tutsplus.com/tutorials/implementation/when-worlds-collide-simulating-circle-circle-collisions/\n *\n * @extends Component\n */\nclass Collider extends Component {\n\tconstructor() {\n\t\tComponent.call(this);\n\t\tthis.trigger = false;\n\t\tthis.include = '';\n\t\tthis.exclude = '';\n\t}\n\n\tget attributes() {\n\t\treturn {\n\t\t\ttrigger: false,\n\t\t\tinclude: '',\n\t\t\texclude: ''\n\t\t};\n\t}\n};\n\nlet p = Vec2();\nlet n = Vec2();\nlet cache = Vec2();\nlet pCache = Vec2();\nlet nCache = Vec2();\n\nCollider.simulate = function(dt) {\n\tlet colliders = this.registry.instances;\n\tlet i = colliders.length;\n\twhile (i--) {\n\t\tlet collider1 = colliders[i];\n\t\tif (!collider1.enabled) {\n\t\t\tcontinue;\n\t\t}\n\t\tlet j = i;\n\t\twhile (j-- && collider1.enabled) {\n\t\t\tlet collider2 = colliders[j];\n\t\t\tif (!collider2.enabled) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet entity1 = collider1.entity;\n\t\t\tlet entity2 = collider2.entity;\n\t\t\tlet body1 = entity1.components.body;\n\t\t\tlet body2 = entity2.components.body;\n\t\t\tif (!body1.awake && !body2.awake) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet include1 = collider1.include;\n\t\t\tlet exclude1 = collider1.exclude;\n\t\t\tlet include2 = collider2.include;\n\t\t\tlet exclude2 = collider2.exclude;\n\t\t\tif ((include1 && !entity2.hasComponent(include1)) ||\n\t\t\t\t(include2 && !entity1.hasComponent(include2)) ||\n\t\t\t\t(exclude1 && entity2.hasComponent(exclude1)) ||\n\t\t\t\t(exclude2 && entity1.hasComponent(exclude2))) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet radius1 = entity1.components.bounds.radius;\n\t\t\tlet radius2 = entity2.components.bounds.radius;\n\t\t\tlet pos1 = entity1.components.transform.position;\n\t\t\tlet pos2 = entity2.components.transform.position;\n\t\t\tlet radiusSum = radius1 + radius2;\n\n\t\t\tlet overlapSq = Vec2.distSq(pos1, pos2);\n\t\t\tif (overlapSq > radiusSum * radiusSum) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tVec2.norm(Vec2.sub(pos1, pos2, p));\n\t\t\tlet overlap = Math.sqrt(overlapSq);\n\n\t\t\tif (collider1.trigger || collider2.trigger) {\n\t\t\t\tlet triggerEvent = Event.create('trigger');\n\t\t\t\ttriggerEvent.normal = p;\n\t\t\t\ttriggerEvent.overlap = overlap;\n\t\t\t\ttriggerEvent.other = entity2;\n\t\t\t\tentity1.emit(triggerEvent);\n\n\t\t\t\ttriggerEvent = Event.create('trigger');\n\t\t\t\ttriggerEvent.normal = p;\n\t\t\t\ttriggerEvent.overlap = overlap;\n\t\t\t\ttriggerEvent.other = entity1;\n\t\t\t\tentity2.emit(triggerEvent);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\toverlap -= radiusSum;\n\t\t\tlet vel1 = body1.velocity;\n\t\t\tlet vel2 = body2.velocity;\n\t\t\tlet mass1 = body1.mass || 1;\n\t\t\tlet mass2 = body2.mass || 1;\n\n\t\t\tif (overlap < 0) {\n\t\t\t\tVec2.add(\n\t\t\t\t\tpos1,\n\t\t\t\t\tVec2.scale(p, -overlap * 2 * radius1 / radiusSum, cache)\n\t\t\t\t);\n\t\t\t\tVec2.add(\n\t\t\t\t\tpos2,\n\t\t\t\t\tVec2.scale(p, overlap * 2 * radius2 / radiusSum, cache)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// normal vector to collision direction\n\t\t\tVec2.perp(p, n);\n\n\t\t\tlet vp1 = Vec2.dot(vel1, p); // velocity of P1 along collision direction\n\t\t\tlet vn1 = Vec2.dot(vel1, n); // velocity of P1 normal to collision direction\n\t\t\tlet vp2 = Vec2.dot(vel2, p); // velocity of P2 along collision direction\n\t\t\tlet vn2 = Vec2.dot(vel2, n); // velocity of P2 normal to collision\n\n\t\t\t// fully elastic collision (energy & momentum preserved)\n\t\t\tlet vp1After = (mass1 * vp1 + mass2 * (2 * vp2 - vp1)) / (mass1 + mass2);\n\t\t\tlet vp2After = (mass1 * (2 * vp1 - vp2) + mass2 * vp2) / (mass1 + mass2);\n\n\t\t\tVec2.add(\n\t\t\t\tVec2.scale(p, vp1After, pCache),\n\t\t\t\tVec2.scale(n, vn1, nCache),\n\t\t\t\tvel1\n\t\t\t);\n\t\t\tVec2.add(\n\t\t\t\tVec2.scale(p, vp2After, pCache),\n\t\t\t\tVec2.scale(n, vn2, nCache),\n\t\t\t\tvel2\n\t\t\t);\n\n\t\t\tlet collideEvent = Event.create('collide');\n\t\t\tcollideEvent.normal = n;\n\t\t\tcollideEvent.other = entity2;\n\t\t\tentity1.emit(collideEvent, this);\n\n\t\t\tcollideEvent = Event.create('collide');\n\t\t\tcollideEvent.normal = n;\n\t\t\tcollideEvent.other = entity1;\n\t\t\tentity2.emit(collideEvent, this);\n\t\t}\n\t}\n};\n\nComponent.create(Collider, 'collider');\n","\nimport Component from '../core/component';\nimport Vec2 from '../math/vec2';\nimport {chance} from '../math/random';\n\nlet force = Vec2();\n\nclass Jitter extends Component {\n  constructor() {\n  \tComponent.call(this);\n\t  this.factor = 0.0;\n\t  this.force = 0.0;\n  }\n\n  get attributes() {\n  \treturn {\n\t\t  factor: 0.1,\n\t\t  force: 250\n\t\t};\n  }\n\n  fixedUpdate(dt) {\n\t  if (chance(this.factor)) {\n\t    Vec2.variant(Vec2.zero, this.force, force);\n\t    this.components.body.applyForce(force);\n\t  }\n\t}\n}\n\nComponent.create(Jitter, 'jitter');\n","'use strict';\n\nimport Entity from '../core/entity';\nimport Component from '../core/component';\nimport Registry from '../core/registry';\nimport Context from '../core/context';\nimport {TAU, clamp} from '../math/mathf';\nimport Vec2 from '../math/vec2';\nimport {random} from '../math/random';\nimport Tweens from '../math/tweens';\nimport Color from '../math/color';\nimport {SpriteAsset, SpriteSheet} from '../core/sprite';\n\nexport default class Particle extends Component {\n\tconstructor() {\n\t\tComponent.call(this);\n\t\tthis.lifetime = 0.0;\n\t\tthis.lifetimeVariant = 0.0;\n\t\tthis.radius = 0.0;\n\t\tthis.radiusVariant = 0.0;\n\t\tthis.alphaVariant = 0.0;\n\t\tthis.shrink = Tweens.linear;\n\t\tthis.fade = Tweens.linear;\n\t\tthis.age = 0.0;\n\t}\n\n\tget attributes() {\n\t\treturn {\n\t\t\tlifetime: 1,\n\t\t\tlifetimeVariant: 1,\n\t\t\tradius: 1,\n\t\t\tradiusVariant: 0,\n\t\t\talphaVariant: 0,\n\t\t\tshrink: Tweens.quintIn,\n\t\t\tfade: Tweens.quintIn\n\t\t}\n\t}\n\n\tcreate(attributes) {\n\t\tlet variant = this.lifetimeVariant;\n\t\tif (variant > 0) {\n\t\t\tthis.lifetime += random(-variant, variant);\n\t\t}\n\t\tvariant = this.radiusVariant;\n\t\tif (variant > 0) {\n\t\t\tthis.radius += random(-variant, variant);\n\t\t}\n\t\tvariant = this.alphaVariant;\n\t\tif (variant > 0) {\n\t\t\tlet transform = this.components.transform;\n\t\t\ttransform.alpha = clamp(\n\t\t\t\ttransform.alpha + random(-variant, variant), 0, 1\n\t\t\t);\n\t\t}\n\t\tthis.age = 0;\n\t}\n\n\tupdate(dt) {\n\t\tthis.age += dt;\n\t\tlet age = this.age;\n\t\tlet lifetime = this.lifetime;\n\t\tif (age > lifetime) {\n\t\t\tthis.entity.destroy();\n\t\t\treturn;\n\t\t}\n\t\tif (this.shrink) {\n\t\t\tthis.radius *= 1 - this.shrink(age / lifetime);\n\t\t\tif (this.radius < 1) {\n\t\t\t\tthis.entity.destroy();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (this.fade) {\n\t\t\tlet transform = this.components.transform;\n\t\t\ttransform.alpha *= 1 - this.fade(age / lifetime);\n\t\t\tif (transform.alpha <= 0.02) {\n\t\t\t\tthis.entity.destroy();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tthis.components.spriteTween.frame = this.radius - 1 | 0;\n\t}\n\n\tstatic generateSpriteAsset(attributes) {\n\t\tattributes = attributes || {};\n\t\tlet color = Color(attributes.color || Color.gray);\n\t\tlet alpha = attributes.alpha || 1;\n\t\tlet max = attributes.max = attributes.max || 25;\n\t\tlet size = max * 2;\n\t\tlet center = attributes.center || 0.5;\n\t\tlet shape = attributes.shape || 'circle';\n\n\t\treturn new SpriteAsset(function(ctx) {\n\t\t\tfor (let radius = 1; radius <= max; radius++) {\n\t\t\t\tlet top = max + size * (radius - 1);\n\n\t\t\t\tif (center < 1) {\n\t\t\t\t\tlet grad = ctx.createRadialGradient(max, top, 0, max, top, radius);\n\t\t\t\t\tcolor[3] = alpha;\n\t\t\t\t\tgrad.addColorStop(0, Color.rgba(color));\n\t\t\t\t\tif (center != 0.5) {\n\t\t\t\t\t\tcolor[3] = alpha / 2;\n\t\t\t\t\t\tgrad.addColorStop(center, Color.rgba(color));\n\t\t\t\t\t}\n\t\t\t\t\tcolor[3] = 0;\n\t\t\t\t\tgrad.addColorStop(1, Color.rgba(color));\n\t\t\t\t\tctx.fillStyle = grad;\n\t\t\t\t} else {\n\t\t\t\t\tctx.fillStyle = Color.rgba(color);\n\t\t\t\t}\n\n\t\t\t\tif (shape == 'rect') {\n\t\t\t\t\tctx.fillRect(max - radius / 2 | 0, top - radius / 2, radius, radius);\n\t\t\t\t} else {\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\tctx.arc(max, top, radius, 0, TAU, true);\n\t\t\t\t\tctx.closePath();\n\t\t\t\t\tctx.fill();\n\t\t\t\t}\n\t\t\t}\n\t\t}, Vec2(size, size * max));\n\t}\n\n\tstatic generateSpriteSheet(attributes) {\n\t\tattributes = attributes || {};\n\t\tlet sprite = Particle.generateSpriteAsset(attributes);\n\t\tlet size = attributes.max * 2;\n\t\treturn new SpriteSheet({\n\t\t\tsize: Vec2(size, size),\n\t\t\tsprites: sprite\n\t\t});\n\t}\n};\n\nParticle.defaultSpriteSheet = Particle.generateSpriteSheet();\n\nEntity.createPrefab('particle', {\n\ttransform: null,\n\tbody: {\n\t\tmass: 0.1,\n\t\tfast: true\n\t},\n\tparticle: null,\n\tspriteTween: {\n\t\tasset: Particle.defaultSpriteSheet\n\t}\n})\n\nComponent.create(Particle, 'particle');\n","\nimport Component from '../core/component';\nimport Registry from '../core/registry';\nimport {EPSILON} from '../math/mathf';\nimport Vec2 from '../math/vec2';\n\nlet velocity = Vec2();\nlet force = Vec2();\nlet combinedVelocity = Vec2();\nlet forceCache = Vec2();\nlet cache = Vec2();\n\nclass Physics extends Component {\n\tconstructor() {\n\t\tthis._gravity = Vec2();\n\t}\n\n\tget attributes() {\n\t\treturn {\n\t\t\tgravity: Vec2()\n\t\t};\n\t}\n\n\t// onBodyCreate(event) {\n\t// \tconsole.log(event.)\n\t// }\n\n\tsimulate(dt) {\n\t\tlet dtSq = dt * dt;\n\t\tlet bodies = Registry.types.body.instances;\n\t\tfor (let i = 0, l = bodies.length; i < l; i++) {\n\t\t\tlet body = bodies[i];\n\t\t\tif (!body.enabled || body.fixed) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet transform = body.components.transform;\n\t\t\tbody.copyVelocity(velocity);\n\t\t\tVec2.add(body._force, body._continuousForce, force);\n\n\t\t\t// Fast path (no mass)\n\t\t\tif (body.fast) {\n\t\t\t\tif (body.maxForce > 0) {\n\t\t\t\t\tVec2.limit(force, body.maxForce);\n\t\t\t\t}\n\t\t\t\tVec2.add(velocity, Vec2.scale(force, dt));\n\t\t\t\tif (body.maxVelocity > 0) {\n\t\t\t\t\tVec2.limit(velocity, body.maxVelocity);\n\t\t\t\t}\n\t\t\t\tbody.force = Vec2.zero;\n\t\t\t\tbody.velocity = velocity;\n\t\t\t\ttransform.translateBy(Vec2.scale(velocity, dt));\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Apply scene gravity\n\t\t\tlet gravity = this._gravity;\n\t\t\tif (Vec2.lenSq(gravity) > 0 && body.mass > EPSILON) {\n\t\t\t\tVec2.add(\n\t\t\t\t\tforce, (body.mass !== 1) ?\n\t\t\t\t\tVec2.scale(gravity, 1 / body.mass, cache) :\n\t\t\t\t\tgravity\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Apply friction\n\t\t\tif (body.friction > 0) {\n\t\t\t\tVec2.add(\n\t\t\t\t\tforce,\n\t\t\t\t\tVec2.scale(\n\t\t\t\t\t\tVec2.norm(velocity, cache), -body.friction\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (body.maxForce > 0) {\n\t\t\t\tVec2.limit(force, body.maxForce);\n\t\t\t}\n\n\t\t\t/*\n\t\t\t// http://www.compsoc.man.ac.uk/~lucky/Democritus/Theory/verlet.html#velver\n\t\t\t// http://en.wikipedia.org/wiki/Verlet_integration#Velocity_Verlet\n\t\t\tlet lastForce = Vec2.scale(body.lastForce, dt / 2);\n\t\t\t*/\n\n\t\t\ttransform.translateBy(Vec2.add(\n\t\t\t\tVec2.scale(velocity, dt, combinedVelocity),\n\t\t\t\tVec2.scale(force, 0.5 * dtSq, forceCache)\n\t\t\t));\n\n\t\t\tVec2.add(\n\t\t\t\tvelocity,\n\t\t\t\tVec2.scale(force, dt, forceCache)\n\t\t\t);\n\n\t\t\t// Apply drag\n\t\t\tif (body.drag < 1) {\n\t\t\t\tVec2.scale(velocity, body.drag);\n\t\t\t}\n\n\t\t\t// Limit velocity\n\t\t\tif (body.maxVelocity > 0) {\n\t\t\t\tVec2.limit(velocity, body.maxVelocity);\n\t\t\t}\n\n\t\t\tlet minVelocity = body.minVelocity;\n\t\t\tif (minVelocity > 0) {\n\t\t\t\tif (Vec2.lenSq(velocity) <= minVelocity * minVelocity) {\n\t\t\t\t\tif (!body.sleeping) {\n\t\t\t\t\t\tVec2.set(velocity);\n\t\t\t\t\t\tbody.sleeping = true;\n\t\t\t\t\t\tbody.emit('bodySleep');\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (body.sleeping) {\n\t\t\t\t\t\tbody.sleeping = false;\n\t\t\t\t\t\tbody.emit('bodyWake');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Reset force\n\t\t\tbody.force = Vec2.zero;\n\t\t\tbody.velocity = velocity;\n\t\t}\n\t}\n}\n\nComponent.create(Physics, 'physics');\n","import Component from '../../core/component'\nimport Context from '../../core/context'\nimport Vec2 from '../../math/vec2'\n\nexport class Box2dBody extends Component {\n\tconstructor() {\n\t\tComponent.call(this);\n\t\tthis.definition = new b2BodyDef();\n\t\tthis.fixture = new b2FixtureDef();\n\t\tthis.body = null;\n\t\tthis.world = null;\n\t}\n\n\tcreate() {\n\t\tlet $body = this.components.body;\n\t\tthis.world = Context.components.b2System.world;\n\n\t\tlet definition = this.definition;\n\t\tlet fixture = this.fixture;\n\n\t\tlet definitions = definitionPresets;\n\t\tfor (let i = 0, l = definitions.length; i < l; i++) {\n\t\t\tlet key = definitions[i];\n\t\t\tdefinition['set_' + key]($body[key]);\n\t\t}\n\n\t\tlet fixed = $body.fixed;\n\t\tdefinition.set_type(fixed ? b2_staticBody : b2_dynamicBody);\n\t\tlet body = world.CreateBody(definition);\n\t\tbody.SetUserData(this.uid);\n\n\t\tfor (i = 0, l = fixturePresets.length; i < l; i++) {\n\t\t\tlet key = fixturePresets[i];\n\t\t\tfixture['set_' + key]($body[key]);\n\t\t}\n\n\t\tlet bounds = this.components.bounds;\n\t\tlet shape = null;\n\t\tswitch (bounds.shape) {\n\t\t\tcase 'poly':\n\t\t\t\tshape = new b2PolygonShape();\n\t\t\t\tshape.SetAsArray(bounds.points, bounds.points.length);\n\t\t\t\tbreak;\n\t\t\tcase 'rect':\n\t\t\t\tshape = new b2PolygonShape();\n\t\t\t\tshape.SetAsBox(bounds.size[0] / 2, bounds.size[1] / 2);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tshape = new b2CircleShape();\n\t\t\t\tshape.set_m_radius(bounds.radius);\n\t\t\t\tbreak;\n\t\t}\n\t\tfixture.set_shape(shape);\n\t\tbody.CreateFixture(fixture);\n\n\t\tbox2dCache.Set(this.transform.position[0], this.transform.position[1]);\n\t\tbody.SetTransform(box2dCache, this.transform.angle);\n\n\t\tbox2dCache.Set($body.velocity[0], $body.velocity[1]);\n\t\tbody.SetLinearVelocity(box2dCache);\n\n\t\tbody.SetActive(1);\n\t\tthis.body = body;\n\t}\n\n\tfree() {\n\t\tthis.world.DestroyBody(this.body);\n\t}\n}\n\nComponent.create(Box2dBody, 'box2dBody');\n\nexport class Box2dSystem extends Component {\n\tconstructor() {\n\t\tthis._gravity = Vec2();\n\t}\n\n\tget attributes() {\n\t\treturn {\n\t\t\tgravity: Vec2()\n\t\t};\n\t}\n\n\tcreate() {\n\t\tlet gravity = new b2Vec2(this._gravity[0], this._gravity[1]);\n\t\tthis.world = new b2World(gravity);\n\t}\n\n\tonBodyCreate(event) {\n\t\tevent.entity.createComponent('box2dBody');\n\t}\n\n\tonBodyDestroy(event) {\n\t\tevent.entity.components.box2dBody.destroy();\n\t}\n\n\tapplyContinuesForce(impulse) {\n\t\tbox2dCache.Set(impulse[0], impulse[1]);\n\t\tthis.body.ApplyLinearImpulse(box2dCache, this.body.GetWorldCenter());\n\t}\n\n\tfixedUpdate() {\n\t\tBody.b2World.Step(dt * 2, 3, 3);\n\t\tlet box2dBodies = Registry.types.b2Body.instances;\n\t\tfor (let i = 0, l = b2Bodies.length; i < l; i++) {\n\t\t\tlet box2dBody = box2dBodies[i];\n\t\t\tlet body = box2dBody.components.body;\n\t\t\tif (!body.enabled || body.fixed) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (b2body.IsAwake()) {\n\t\t\t\tlet pos = b2body.GetPosition();\n\t\t\t\tlet transform = body.components.transform;\n\t\t\t\tVec2.set(vec2Cache, pos.get_x(), pos.get_y());\n\t\t\t\ttransform.translateTo(vec2Cache);\n\t\t\t\tif (!body.fixedRotation) {\n\t\t\t\t\ttransform.rotateTo(b2body.GetAngle());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n};\n\nColor.defineProperty(Box2dSystem, 'gravity');\n\nComponent.create(Box2dSystem, 'box2dSystem');\n\nlet box2dCache = new b2Vec2(0, 0);\nlet vec2Cache = Vec2();\n\nlet definitionPresets = ['allowSleep', 'angularVelocity', 'awake', 'bullet', 'fixedRotation'];\nlet fixturePresets = ['density', 'friction', 'restitution'];\n\n/*\nlet listener = Body.listener = new b2ContactListener();\n\nb2customizeVTable(listener, [\n\t{\n\t\toriginal: b2ContactListener.prototype.PostSolve,\n\t\treplacement: function(contactPtr, impulsePtr) {\n\t\t\tlet bodyA, bodyB, contact;\n\t\t\tcontact = b2wrapPointer(contactPtr, b2Contact);\n\t\t\tconsole.log(contact.GetFixtureA().GetBody());\n\t\t\tbodyA = contact.GetFixtureA().GetBody().userData;\n\t\t\tbodyB = contact.GetFixtureB().GetBody().userData;\n\t\t\tbodyA.entity.emit('onCollide', bodyB.entity);\n\t\t\tbodyB.entity.emit('onCollide', bodyA.entity);\n\t\t\treturn null;\n\t\t}\n\t}\n]);\n\nnew Registry(Body);\n\nmodule.exports = Body;\n*/\n","'use strict';\n\nvar Box2D = require('./lib/box2dweb');\n\nmodule.exports = {\n  Vec2: Box2D.Common.Math.b2Vec2,\n  BodyDef: Box2D.Dynamics.b2BodyDef,\n  Body: Box2D.Dynamics.b2Body,\n  FixtureDef: Box2D.Dynamics.b2FixtureDef,\n  Fixture: Box2D.Dynamics.b2Fixture,\n  World: Box2D.Dynamics.b2World,\n  MassData: Box2D.Collision.Shapes.b2MassData,\n  PolygonShape: Box2D.Collision.Shapes.b2PolygonShape,\n  CircleShape: Box2D.Collision.Shapes.b2CircleShape,\n  DebugDraw: Box2D.Dynamics.b2DebugDraw,\n  WorldManifold: Box2D.Collision.b2WorldManifold\n};\n","'use strict';\n\nvar Component = require('./../../core/component');\nvar Registry = require('./../../core/registry');\nvar Vec2 = require('./../../core/math').Vec2;\nvar B2 = require('./b2');\n\nfunction Body() {\n\tthis.definition = new B2.BodyDef();\n\tthis.fixture = new B2.FixtureDef();\n}\n\nBody.prototype = Object.create(Component.prototype);\n\nBody.prototype.type = 'b2Body';\n\nBody.prototype.attributes = {\n\tfixed: false,\n\tvelocity: Vec2(),\n\tallowSleep: true,\n\tangularVelocity: 0,\n\tawake: true,\n\tbullet: false,\n\tfixedRotation: false,\n\tdensity: 1,\n\tfriction: 0.5,\n\trestitution: 0.2\n};\n\nBody.definitionPresets = ['allowSleep', 'angularVelocity', 'awake', 'bullet', 'fixedRotation'];\n\nBody.fixturePresets = ['density', 'friction', 'restitution'];\n\nBody.prototype.create = function(attributes) {\n\tvar world = this.root.b2World;\n\tif (!world) {\n\t\tvar gravity = new B2.Vec2(this.root.gravity[0], this.root.gravity[1]);\n\t\tworld = new B2.World(gravity);\n\t\tthis.root.b2World = world;\n\t\tBody.b2World = world;\n\t}\n\tvar definition = this.definition;\n\tvar fixture = this.fixture;\n\tvar key = '';\n\n\tvar definitions = Body.definitionPresets;\n\tfor (var i = 0, l = definitions.length; i < l; i++) {\n\t\tkey = definitions[i];\n\t\tdefinition[key] = attributes[key];\n\t}\n\n\tdefinition.userData = this;\n\tVec2.toObj(this.transform.position, definition.position);\n\tdefinition.angle = this.transform.rotation;\n\tVec2.toObj(attributes.velocity, definition.linearVelocity);\n\n\tvar fixed = this.fixed = attributes.fixed;\n\tdefinition.type = fixed ? B2.Body.b2_staticBody : B2.Body.b2_dynamicBody;\n\n\tthis.b2body = world.CreateBody(definition);\n\tvar fixtures = Body.fixturePresets;\n\tfor (i = 0, l = fixtures.length; i < l; i++) {\n\t\tkey = fixtures[i];\n\t\tfixture[key] = attributes[key];\n\t}\n\tvar bounds = this.bounds;\n\tswitch (bounds.shape) {\n\t\tcase 'circle':\n\t\t\tfixture.shape = new B2.CircleShape(bounds.radius);\n\t\t\tbreak;\n\t\tcase 'poly':\n\t\t\tfixture.shape = new B2.PolygonShape(bounds.radius);\n\t\t\tfixture.shape.SetAsArray(bounds.points, bounds.points.length);\n\t\t\tbreak;\n\t\tcase 'rect':\n\t\t\tfixture.shape = new B2.PolygonShape();\n\t\t\tfixture.shape.SetAsBox(bounds.size[0] / 2, bounds.size[1] / 2);\n\t\t\tbreak;\n\t}\n\tthis.b2body.CreateFixture(fixture);\n};\n\nBody.prototype.onTransform = function() {\n\tthis.b2body.SetPositionAndAngle(\n\t\tVec2.toObj(this.transform.position),\n\t\tthis.transform.rotation\n\t);\n};\n\nBody.prototype.onEnable = function() {\n\tthis.b2body.SetActive(true);\n};\n\nBody.prototype.onDisable = function() {\n\tthis.b2body.SetActive(false);\n};\n\nBody.prototype.dealloc = function() {\n\tBody.b2World.DestroyBody(this.b2body);\n\tthis.b2body = null;\n};\n\nBody.prototype.applyContinuesForce = function(impulse) {\n\tthis.b2body.ApplyImpulse(Vec2.toObj(impulse), this.b2body.GetWorldCenter());\n};\n\nvar manifoldCache = new B2.WorldManifold();\nvar impulseCache = Vec2();\nvar pointCache = Vec2();\n\nBody.PostSolve = function(contact, impulse) {\n\tvar bodyA = contact.GetFixtureA().GetBody().GetUserData();\n\tvar bodyB = contact.GetFixtureB().GetBody().GetUserData();\n\tVec2.copy(impulseCache, impulse.tangentImpulses);\n\tcontact.GetWorldManifold(manifoldCache);\n\tVec2.fromObj(manifoldCache.m_points[0], pointCache);\n\tbodyA.entity.emit('onCollide', bodyB.entity, impulseCache);\n\tbodyB.entity.emit('onCollide', bodyA.entity, impulseCache);\n\treturn null;\n};\n\nvar empty = function(contact) {\n\treturn null;\n};\nBody.BeginContact = empty;\nBody.EndContact = empty;\nBody.PreSolve = empty;\n\nBody.fixedUpdate = function(dt) {\n\tBody.b2World.Step(dt * 2, 4, 2);\n\tvar definitions = this.instances;\n\tfor (var i = 0, l = definitions.length; i < l; i++) {\n\t\tvar body = definitions[i];\n\t\tif (!(body.enabled && !body.fixed)) {\n\t\t\tcontinue;\n\t\t}\n\t\tvar b2body = body.b2body;\n\t\tif (b2body.IsAwake()) {\n\t\t\tVec2.fromObj(b2body.GetPosition(), body.transform.position);\n\t\t\tbody.transform.rotation = b2body.GetAngle();\n\t\t}\n\t}\n};\n\nnew Registry(Body);\n\nmodule.exports = Body;\n","import Component from '../../core/component'\nimport Context from '../../core/context'\nimport Registry from '../../core/registry'\nimport Color from '../../math/color'\n\nexport class PixiSprite extends Component {\n\tconstructor() {\n\t\tComponent.call(this);\n\t\tthis.container = null;\n\t\tthis.sprite = new PIXI.Sprite();\n\t}\n\n\tcreate() {\n\t\tthis.container = Context.components.pixiSpriteSystem.camera;\n\t}\n\n\tfree() {\n\t\tthis.container.removeChild(this.sprite);\n\t}\n}\n\nComponent.create(PixiSprite, 'pixiSprite');\n\nexport class PixiSpriteSystem extends Component {\n\tcreate() {\n\t\tPIXI.dontSayHello = true;\n\t\tlet renderer = Context.renderer;\n\t\tthis.stage = new PIXI.Stage(0xFFFFFF); // Color.toHex(renderer.color)\n\t\tthis.camera = new PIXI.DisplayObjectContainer();\n\t\tthis.stage.addChild(this.camera);\n\t\tthis.renderer = new PIXI.WebGLRenderer(\n\t\t\trenderer.content[0],\n\t\t\trenderer.content[1],\n\t\t\t{\n\t\t\t\tview: renderer.canvas,\n\t\t\t\tresolution: renderer.ratio\n\t\t\t}\n\t\t);\n\t\tthis.renderer.resize(\n\t\t\trenderer.content[0],\n\t\t\trenderer.content[1]\n\t\t);\n\t}\n\n\tonSpriteTweenCreate(event) {\n\t\tevent.entity.createComponent('pixiSprite');\n\t}\n\n\tonSpriteTweenDestroy(event) {\n\t\tevent.entity.components.pixiSprite.destroy();\n\t}\n\n\trender() {\n\t\tlet pixiSprites = Registry.types.pixiSprite.instances;\n\t\tlet added = false;\n\t\tfor (let i = 0, l = pixiSprites.length; i < l; i++) {\n\t\t\tlet pixiSprite = pixiSprites[i];\n\t\t\tif (!pixiSprite.enabled) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet tween = pixiSprite.components.spriteTween;\n\t\t\tlet sprite = pixiSprite.sprite;\n\t\t\tif (tween != null) {\n\t\t\t\tif (!tween.enabled) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tlet asset = tween.asset;\n\t\t\t\tif (!asset.ready) {\n\t\t\t\t\tif (!asset.prepare()) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (asset.frames != null) {\n\t\t\t\t\t\tlet frames = asset.frames;\n\t\t\t\t\t\tfor (let j = 0, k = frames.length; j < k; j++) {\n\t\t\t\t\t\t\tlet frame = frames[j];\n\t\t\t\t\t\t\tframe.pixiTexture = new PIXI.Texture.fromCanvas(\n\t\t\t\t\t\t\t\tframe.sprite.buffer,\n\t\t\t\t\t\t\t\tPIXI.scaleModes.NEAREST\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tlet {size, position} = frame;\n\t\t\t\t\t\t\tframe.pixiTexture.setFrame(new PIXI.Rectangle(\n\t\t\t\t\t\t\t\tposition[0] | 0,\n\t\t\t\t\t\t\t\tposition[1] | 0,\n\t\t\t\t\t\t\t\tsize[0] | 0,\n\t\t\t\t\t\t\t\tsize[1] | 0\n\t\t\t\t\t\t\t));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (asset.frames != null) {\n\t\t\t\t\tlet frame = asset.frames[tween.frame];\n\t\t\t\t\tif (sprite.texture != frame.pixiTexture) {\n\t\t\t\t\t\tVec2.toObj(frame.anchor, sprite.anchor);\n\t\t\t\t\t\tsprite.setTexture(frame.pixiTexture);\n\t\t\t\t\t}\n\t\t\t\t} else if (sprite.texture != null) {\n\t\t\t\t\tsprite.setTexture(new PIXI.Texture.fromCanvas(\n\t\t\t\t\t\tasset.buffer,\n\t\t\t\t\t\tPIXI.scaleModes.NEAREST\n\t\t\t\t\t));\n\t\t\t\t\tVec2.toObj(asset.defaultAnchor, sprite.anchor);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!sprite.stage) {\n\t\t\t\tif (!sprite.texture) {\n\t\t\t\t\tthrow new Error('PIXI.Sprite without texture');\n\t\t\t\t}\n\t\t\t\tthis.camera.addChild(sprite);\n\t\t\t\tadded = true;\n\t\t\t}\n\t\t\tlet transform = pixiSprite.components.transform;\n\t\t\tVec2.toObj(transform.position, sprite.position);\n\t\t\tsprite.rotation = transform.rotation;\n\t\t\tsprite.alpha = transform.alpha;\n\t\t}\n\t\t// if (added) {\n\t\t// \tdebugger;\n\t\t// \t// this.stage.children.sort(depthCompare);\n\t\t// }\n\t\tVec2.toObj(this.renderer.projection, Context.renderer.position);\n\t\tthis.renderer.render(this.stage);\n\t}\n};\n\n// function depthCompare(a, b) {\n// \tif (a.layer < b.layer) {\n// \t\treturn -1;\n// \t}\n// \tif (a.layer > b.layer) {\n// \t\treturn 1;\n// \t}\n// \treturn 0;\n// }\n\nComponent.create(PixiSpriteSystem, 'pixiSpriteSystem');\n"],"sourceRoot":"/source/"}