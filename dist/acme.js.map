{"version":3,"sources":["webpack:///webpack/bootstrap 73ec639d23e1e7c3813c","webpack:///./lib/index.js","webpack:///./lib/core/boid.js","webpack:///./lib/core/border.js","webpack:///./lib/core/bounds.js","webpack:///./lib/core/collider.js","webpack:///./lib/core/color.js","webpack:///./lib/core/component.js","webpack:///./lib/core/console.js","webpack:///./lib/core/engine.js","webpack:///./lib/core/entity.js","webpack:///./lib/core/input.js","webpack:///./lib/core/jitter.js","webpack:///./lib/core/kinetic.js","webpack:///./lib/core/particle.js","webpack:///./lib/core/pool.js","webpack:///./lib/core/prefab.js","webpack:///./lib/core/renderer.js","webpack:///./lib/core/shims.js","webpack:///./lib/core/sprite.js","webpack:///./lib/core/transform.js","webpack:///./lib/labs/heightmap.js","webpack:///./lib/labs/perlin.js","webpack:///./lib/math/mat2.js","webpack:///./lib/math/mathf.js","webpack:///./lib/math/random.js","webpack:///./lib/math/tweens.js","webpack:///./lib/math/vec2.js"],"names":[],"mappings":"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","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 73ec639d23e1e7c3813c\n **/","'use strict';\n\nmodule.exports = {\n  Boid: require('./core/boid'),\n  Border: require('./core/border'),\n  Bounds: require('./core/bounds'),\n  Collider: require('./core/collider'),\n  Color: require('./core/color'),\n  Component: require('./core/component'),\n  Console: require('./core/console'),\n  Engine: require('./core/engine'),\n  Entity: require('./core/entity'),\n  Heightmap: require('./labs/heightmap'),\n  Input: require('./core/input'),\n  Jitter: require('./core/jitter'),\n  Kinetic: require('./core/kinetic'),\n  Mat2: require('./math/mat2'),\n  Mathf: require('./math/mathf'),\n  Particle: require('./core/particle'),\n  Perlin: require('./labs/perlin'),\n  Pool: require('./core/pool'),\n  Prefab: require('./core/prefab'),\n  Random: require('./math/random'),\n  Renderer: require('./core/renderer'),\n  Shims: require('./core/shims'),\n  Sprite: require('./core/sprite'),\n  Transform: require('./core/transform'),\n  Tweens: require('./math/tweens'),\n  Vec2: require('./math/vec2'),\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/index.js\n **/","'use strict';\n\nvar Component = require('./component');\nvar Vec2 = require('../math/vec2');\nvar Kinetic = require('./kinetic');\n\n/**\n * @class Boid\n * Steering behaviour\n * - http://www.openprocessing.org/sketch/7493\n * - http://www.openprocessing.org/sketch/11045\n * - https://github.com/paperjs/paper.js/blob/master/examples/Paperjs.org/Tadpoles.html\n *\n * @extends Component\n *\n * @constructor\n */\nfunction Boid() {\n\tthis.mod = 2;\n\tthis.cohesionMod = 1;\n\tthis.avoidanceMod = 2;\n\tthis.imitationMod = 1;\n}\n\nBoid.prototype = {\n\tattributes: {\n\t\tperception: 100.0,\n\t\taura: 25.0\n\t},\n\n\tcreate: function() {\n\t\tif (this.aura === 0 && this.bounds) {\n\t\t\tthis.aura = this.bounds.radius * 2;\n\t\t}\n\t\tthis.perceptionSq = this.perception * this.perception;\n\t\tthis.auraSq = this.aura * this.aura;\n\t}\n};\n\nvar cohesion = Vec2();\nvar avoidance = Vec2();\nvar imitation = Vec2();\nvar distance = Vec2();\nvar impulse = Vec2();\n\nBoid.fixedUpdate = function(dt) {\n\tvar boids = this.pool.heap;\n\tvar len = boids.length;\n\tvar i = len;\n\n\twhile (i--) {\n\t\tvar boid1 = boids[i];\n\t\tif (!boid1.enabled) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar entity1 = boid1.entity;\n\t\tvar pos1 = entity1.transform.position;\n\t\tvar vel = entity1.kinetic.velocity;\n\n\t\tvar avoidanceCount = 0;\n\t\tvar imitationCount = 0;\n\t\tvar cohesionCount = 0;\n\t\tVec2.set(impulse);\n\n\t\tvar j = len;\n\t\twhile (j--) {\n\t\t\tvar boid2 = boids[j];\n\t\t\tif (!boid2.enabled || boid1 === boid2) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tvar entity2 = boid2.entity;\n\t\t\tvar pos2 = entity2.transform.position;\n\n\t\t\tvar diffSq = Vec2.distSq(pos1, pos2);\n\t\t\tif (diffSq < boid1.perceptionSq && diffSq) {\n\t\t\t\tVec2.sub(pos2, pos1, distance);\n\t\t\t\t// Vec2.scale(distance, Math.sqrt(entity1.kinetic.mass / entity2.kinetic.mass));\n\n\t\t\t\t// diff = Math.sqrt(diffSq)\n\t\t\t\t// Vec2.scale(distance, Math.quadInOut(diff / boid1.perception), cache)\n\n\t\t\t\t// Cohesion : try to approach other boids\n\t\t\t\tif (!(cohesionCount++)) {\n\t\t\t\t\tVec2.copy(cohesion, distance);\n\t\t\t\t} else {\n\t\t\t\t\tVec2.add(cohesion, distance);\n\t\t\t\t}\n\n\t\t\t\t// Imitation : try to move in the same way than other boids\n\t\t\t\tif (!(imitationCount++)) {\n\t\t\t\t\tVec2.copy(imitation, entity2.kinetic.velocity);\n\t\t\t\t} else {\n\t\t\t\t\tVec2.add(imitation, entity2.kinetic.velocity);\n\t\t\t\t}\n\n\t\t\t\t// Avoidance : try to keep a minimum distance between others.\n\t\t\t\tif (diffSq < boid1.auraSq) {\n\t\t\t\t\tif (!(avoidanceCount++)) {\n\t\t\t\t\t\tVec2.copy(avoidance, distance);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tVec2.add(avoidance, distance);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar mod = boid1.mod;\n\t\tif (cohesionCount && boid1.cohesionMod) {\n\t\t\tif (cohesionCount > 1) {\n\t\t\t\tVec2.scale(cohesion, 1 / cohesionCount);\n\t\t\t}\n\t\t\tentity1.kinetic.applyForce(Vec2.scale(cohesion, boid1.cohesionMod * mod));\n\t\t}\n\n\t\tif (imitationCount && boid1.imitationMod) {\n\t\t\tif (imitationCount > 1) {\n\t\t\t\tVec2.scale(imitation, 1 / imitationCount);\n\t\t\t}\n\t\t\tVec2.add(impulse, Vec2.scale(imitation, boid1.imitationMod * mod));\n\t\t\tentity1.kinetic.applyForce();\n\t\t\tVec2.add(\n\t\t\t\tentity1.kinetic.force,\n\t\t\t\tVec2.sub(impulse, vel)\n\t\t\t);\n\t\t}\n\n\t\tif (avoidanceCount && boid1.avoidanceMod) {\n\t\t\tif (avoidanceCount > 1) {\n\t\t\t\tVec2.scale(avoidance, 1 / avoidanceCount);\n\t\t\t}\n\t\t\tVec2.sub(\n\t\t\t\tentity1.kinetic.force,\n\t\t\t\tVec2.scale(avoidance, boid1.avoidanceMod * mod)\n\t\t\t);\n\t\t}\n\t}\n};\n\nComponent.create(Boid, 'boid');\n\nmodule.exports = Boid;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/boid.js\n **/","'use strict';\n\nvar Component = require('./component');\nvar Pool = require('./pool');\nvar Vec2 = require('../math/vec2');\nvar Engine = require('./engine');\n\n/**\n * @class Border\n * Border lets entities react on contact with the canvas borders.\n * @extends Component\n * @property {String} [mode=\"bounce\"] Reaction to contact with border, \"constrain\", \"bounce\", \"mirror\", \"kill\"\n * @property {Number} [restitution=1] Restitution on bounce\n * @fires Border#onBorder\n */\nfunction Border() {\n\tComponent.call(this);\n\tthis.mode = '';\n\tthis.restitution = 0.0;\n}\n\nBorder.prototype = {\n\tattributes: {\n\t\tmode: 'bounce',\n\t\trestitution: 1\n\t}\n};\n\nvar position = Vec2();\nvar velocity = Vec2();\nvar topLeft = Vec2();\nvar bottomRight = Vec2();\n\nBorder.simulate = function(dt) {\n\ttopLeft = Engine.renderer.position;\n\tVec2.add(topLeft, Engine.renderer.content, bottomRight);\n\n\tvar borders = this.pool.heap;\n\tfor (var i = 0, l = borders.length; i < l; i++) {\n\t\tvar border = borders[i];\n\t\tif (!border.enabled) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tvar restitution = border.restitution;\n\t\tvar mode = border.mode;\n\t\tvar mirror = mode == 'mirror';\n\t\tvar bounce = mode == 'bounce';\n\t\tvar entity = border.entity;\n\t\tvar kinetic = entity.components.kinetic;\n\t\tif (bounce && kinetic != null) {\n\t\t\tif (!kinetic.enabled || kinetic.sleeping) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tkinetic.copyVelocity(velocity);\n\t\t}\n\t\tvar transform = entity.components.transform;\n\t\ttransform.copyPosition(position);\n\t\tvar bounds = entity.components.bounds;\n\t\tvar contact = true;\n\n\t\t// Horizontal\n\t\tvar diff = (bounce ? bounds.left : bounds.right) - topLeft[0];\n\t\tif (diff <= 0) {\n\t\t\tcontact = true;\n\t\t\tif (mirror) {\n\t\t\t\tposition[0] = bottomRight[0] + bounds.width;\n\t\t\t} else {\n\t\t\t\tposition[0] -= diff;\n\t\t\t\tif (bounce) {\n\t\t\t\t\tvelocity[0] *= -restitution;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tdiff = (bounce ? bounds.right : bounds.left) - bottomRight[0];\n\t\t\tif (diff >= 0) {\n\t\t\t\tcontact = true;\n\t\t\t\tif (mirror) {\n\t\t\t\t\tposition[0] = topLeft[0] - bounds.width;\n\t\t\t\t} else {\n\t\t\t\t\tposition[0] -= diff;\n\t\t\t\t\tif (bounce) {\n\t\t\t\t\t\tvelocity[0] *= -restitution;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Vertical\n\t\t\t\tdiff = (bounce ? bounds.top : bounds.bottom) - topLeft[1];\n\t\t\t\tif (diff <= 0) {\n\t\t\t\t\tcontact = true;\n\t\t\t\t\tif (mirror) {\n\t\t\t\t\t\tposition[1] = bottomRight[1] + bounds.height;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tposition[1] -= diff;\n\t\t\t\t\t\tif (bounce) {\n\t\t\t\t\t\t\tvelocity[1] *= -restitution;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdiff = (bounce ? bounds.bottom : bounds.top) - bottomRight[1];\n\t\t\t\t\tif (diff >= 0) {\n\t\t\t\t\t\tcontact = true;\n\t\t\t\t\t\tif (mirror) {\n\t\t\t\t\t\t\tposition[1] = topLeft[1] - bounds.height;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tposition[1] -= diff;\n\t\t\t\t\t\t\tif (bounce) {\n\t\t\t\t\t\t\t\tvelocity[1] *= -restitution;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// We contact\n\t\tif (contact) {\n\t\t\ttransform.position = position;\n\t\t\tif (kinetic != null) {\n\t\t\t\tkinetic.velocity = velocity;\n\t\t\t}\n\t\t\t/**\n\t\t\t * Fired on contact\n\t\t\t * @event Border#onBorder\n\t\t\t * @param {Number[]} contact Contact point\n\t\t\t */\n\t\t\tentity.emit('onBorder');\n\t\t\tif (border.mode == 'kill') {\n\t\t\t\tentity.destroy();\n\t\t\t}\n\t\t}\n\t}\n};\n\nComponent.create(Border, 'border');\n\nmodule.exports = Border;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/border.js\n **/","'use strict';\n\nvar Component = require('./component');\nvar Pool = require('./pool');\nvar Color = require('./color');\nvar Mathf = require('../math/mathf');\nvar Vec2 = require('../math/vec2');\nvar Random = require('../math/random');\n\n/**\n * @class Bounds\n * Tracks shape and dimensions of an entity.\n * TODO: Shapes into poolable objects\n * TODO: https://github.com/photonstorm/phaser/blob/master/Phaser/Collision.ts\n * @extends Component\n * @property {String} shape \"circle\" or \"rect\"\n * @property {Number} radius Circle radius\n * @property {Number[]} size Rect size\n */\nfunction Bounds() {\n\tComponent.call(this);\n\tthis.shape = 'rect';\n\tthis.radius = 0.0;\n\tthis._size = Vec2();\n\tthis._anchor = Vec2();\n}\n\nBounds.prototype = {\n\tattributes: {\n\t\tshape: 'rect',\n\t\tradius: 0.0,\n\t\tsize: Vec2(),\n\t\tanchor: Vec2.center\n\t},\n\n\tintersectLine: function(a1, a2, result) {\n\t\tvar pos = this.components.transform.position;\n\t\tif (this.shape == 'circle') {\n\t\t\treturn Bounds.intersectLineCirc(a1, a2, pos, this.radius, result);\n\t\t}\n\t\treturn false;\n\t},\n\n\tcontains: function(point) {\n\t\tvar pos = this.components.transform.position;\n\t\tif (this.shape == 'circle') {\n\t\t\treturn Bounds.circPoint(pos, this.radius, point);\n\t\t}\n\t\treturn Bounds.rectPoint(pos, this._size, point);\n\t},\n\n\twithinRect: function(pos, size) {\n\t\tvar mypos = this.components.transform.position;\n\t\tif (this.shape == 'circle') {\n\t\t\treturn Bounds.rectCirc(pos, size, mypos, this.radius);\n\t\t}\n\t\treturn Bounds.rectRect(pos, size, mypos, this._size);\n\t},\n\n\tget top() {\n\t\tvar y = this.components.transform.position[1];\n\t\tif (this.shape == 'circle') {\n\t\t\treturn y - this.radius;\n\t\t}\n\t\treturn y - this._size[1] / 2;\n\t},\n\n\tget bottom() {\n\t\tvar y = this.components.transform.position[1];\n\t\tif (this.shape == 'circle') {\n\t\t\treturn y + this.radius;\n\t\t}\n\t\treturn y + this._size[1] / 2;\n\t},\n\n\tget left() {\n\t\tvar x = this.components.transform.position[0];\n\t\tif (this.shape == 'circle') {\n\t\t\treturn x - this.radius;\n\t\t}\n\t\treturn x - this._size[1] / 2;\n\t},\n\n\tget right() {\n\t\tvar x = this.components.transform.position[0];\n\t\tif (this.shape == 'circle') {\n\t\t\treturn x + this.radius;\n\t\t}\n\t\treturn x + this._size[1] / 2;\n\t},\n\n\tget width() {\n\t\tif (this.shape == 'circle') {\n\t\t\treturn this.radius * 2;\n\t\t}\n\t\treturn this._size[0];\n\t},\n\n\tget height() {\n\t\tif (this.shape == 'circle') {\n\t\t\treturn this.radius * 2;\n\t\t}\n\t\treturn this._size[1];\n\t}\n};\n\nVec2.defineProperty(Bounds, 'size');\nVec2.defineProperty(Bounds, 'anchor');\n\n/*\ngetAabb: function() {\n\tif (!this.topLeft) {\n\t\tthis.topLeft = Vec2();\n\t\tthis.bottomRight = Vec2();\n\t}\n\tVec2.set(\n\t\tthis.topLeft,\n\t\tthis.position[0] + this._size[0] * 0.5 * (this.align[0] + 1),\n\t\tthis.position[1] + this._size[1] * 0.5 * (this.align[1] + 1)\n\t);\n\tVec2.set(\n\t\tthis.bottomRight,\n\t\tthis.position[0] + this._size[0] * 0.5 * (this.align[0] + 5),\n\t\tthis.position[1] + this._size[1] * 0.5 * (this.align[1] + 5)\n\t);\n\treturn this.topLeft;\n},\n*/\n\n/**\n * Intersection circle/point\n * http://www.openprocessing.org/user/54\n * @param {Number[]} center\n * @param {Number} radius\n * @param {Number[]} point\n * @return {Boolean}\n */\nBounds.circPoint = function(center, radius, point) {\n\treturn Vec2.distSq(point, center) <= radius * radius;\n};\n\n/**\n * Intersection rectangle/point\n * @param {Number[]} pos\n * @param {Number[]} size\n * @param {Number[]} point\n * @return {Boolean}\n */\nBounds.rectPoint = function(pos, size, point) {\n\treturn pos[0] - size[0] < point[0] && pos[1] < point[1] && pos[0] + size[0] > point[0] && pos[1] + size[1] > point[1];\n};\n\n/**\n * Closes point to a line\n * http://blog.generalrelativity.org/actionscript-30/collision-detection-circleline-segment-circlecapsule/\n * @param {Number[]} a Line P1\n * @param {Number[]} b Line P2\n * @param {Number[]} point Point\n * @param {Number[]} result Result\n * @return {Number[]} Result\n */\nBounds.closestLinePoint = function(a, b, point, result) {\n\tVec2.sub(b, a, v);\n\tVec2.sub(point, a, w);\n\tvar t = Mathf.clamp(Vec2.dot(w, v) / Vec2.dot(v, v), 0, 1);\n\treturn Vec2.add(a, Vec2.scale(v, t, result));\n};\n\nvar v = Vec2();\nvar w = Vec2();\n\n/**\n * Intersection line/circle\n *\n * @static\n * @param {Number[]} a Line P1\n * @param {Number[]} b Line P2\n * @param {Number[]} center Circle center\n * @param {Number} radius Circe radius\n * @param {Number[]} result Result vector\n * @return {Number[]|Boolean}\n */\nBounds.intersectLineCirc = function(a, b, center, radius, result) {\n\tBounds.closestLinePoint(a, b, center, lineCircTest);\n\tVec2.sub(lineCircTest, center);\n\tif (Vec2.dot(lineCircTest, lineCircTest) > radius * radius) {\n\t\treturn false;\n\t}\n\tif (!result) {\n\t\treturn true;\n\t}\n\treturn Vec2.copy(result, lineCircTest);\n};\n\nvar lineCircTest = Vec2();\n\n/**\n * Intersection rectangle/circle\n *\n * http://stackoverflow.com/questions/401847/circle-rectangle-collision-detection-intersection/402010#402010\n *\n * @param {Number[]} topLeft Rectangle top-left point\n * @param {Number[]} size Rectangle size\n * @param {Number[]} center Circle center\n * @param {Number} radius Circle radius\n * @return {Boolean}\n */\nBounds.rectCirc = function(topLeft, size, center, radius) {\n\tvar circleDistanceX = Math.abs(center[0] - topLeft[0] - size[0] / 2);\n\tvar circleDistanceY = Math.abs(center[1] - topLeft[1] - size[1] / 2);\n\tif (circleDistanceX > (size[0] / 2 + radius) || circleDistanceY > (size[1] / 2 + radius)) {\n\t\treturn false;\n\t}\n\tif (circleDistanceX <= size[0] / 2 || circleDistanceY <= size[1] / 2) {\n\t\treturn true;\n\t}\n\tvar cornerDistance = Math.pow(circleDistanceX - size[0] / 2, 2) + Math.pow(circleDistanceY - size[1] / 2, 2);\n\treturn cornerDistance <= Math.pow(radius, 2);\n};\n\n/**\n * Intersection rectangle/rectangle\n *\n * @param {Number[]} pos\n * @param {Number[]} size\n * @param {Number[]} pos2\n * @param {Number[]} size2\n * @return {Boolean}\n */\nBounds.rectRect = function(pos, size, pos2, size2) {\n\treturn !(pos[0] > pos2[0] + size2[0] || pos[0] + size[0] < pos2[0] || pos[1] > pos2[1] + size2[1] || pos[1] + size[1] < pos2[1]);\n};\n\n/**\n * Random point in circle\n */\nBounds.randCircPoint = function(point, center, radius) {\n\tVec2.set(point, 0, Random.rand(0, radius));\n\tVec2.rotate(point, Random.rand(-Math.PI, Math.PI));\n\treturn Vec2.add(point, center);\n};\n\n/**\n * Random point in rectangle\n */\nBounds.randRectPoint = function(point, pos, size) {\n\tVec2.set(point, Random.rand(0, size[0]), Random.rand(0, size[1]));\n\treturn Vec2.add(point, pos);\n};\n\nComponent.create(Bounds, 'bounds');\n\n/***\n * Intersection line/rectangle\n *\nBounds.lineRect = function(point1, point2, topLeft, size) {\n\t// Calculate m and c for the equation for the line (y = mx+c)\n\tm = (a1[1] - y0) / (a1[0] - x0);\n\tc = y0 - (m * x0);\n\n\t// if the line is going up from right to left then the top intersect point is on the left\n\tif (m > 0) {\n\t\ttop_intersection = (m * l + c);\n\t\tbottom_intersection = (m * r + c);\n\t}\n\t// otherwise it's on the right\n\telse {\n\t\ttop_intersection = (m * r + c);\n\t\tbottom_intersection = (m * l + c);\n\t}\n\n\t// work out the top and bottom extents for the triangle\n\tif (y0 < a1[1]) {\n\t\ttoptrianglepoint = y0;\n\t\tbottomtrianglepoint = a1[1];\n\t} else {\n\t\ttoptrianglepoint = a1[1];\n\t\tbottomtrianglepoint = y0;\n\t}\n\n\tvar topoverlap: Number;\n\tvar botoverlap: Number;\n\n\t// and calculate the overlap between those two bounds\n\ttopoverlap = top_intersection > toptrianglepoint ? top_intersection : toptrianglepoint;\n\tbotoverlap = bottom_intersection < bottomtrianglepoint ? bottom_intersection : bottomtrianglepoint;\n\n\t// (topoverlap<botoverlap) :\n\t// if the intersection isn't the right way up then we have no overlap\n\n\t// (!((botoverlap<t) || (topoverlap>b)) :\n\t// If the bottom overlap is higher than the top of the rectangle or the top overlap is\n\t// lower than the bottom of the rectangle we don't have intersection. So return the negative\n\t// of that. Much faster than checking each of the points is within the bounds of the rectangle.\n\treturn (topoverlap < botoverlap) && (!((botoverlap < t) || (topoverlap > b)));\n};\n*/\n\n/*\nBounds.lineCirc = function(point1, point2, center, radius) {\n\tvar a, b, bb4ac, c, dx, dy, ia1[0], ia2[0], ia1[1], ia2[1], mu, testX, testY;\n\tdx = a2[0] - a1[0];\n\tdy = a2[1] - a1[1];\n\ta = dx * dx + dy * dy;\n\tb = 2 * (dx * (a1[0] - cx) + dy * (a1[1] - cy));\n\tc = cx * cx + cy * cy;\n\tc += a1[0] * a1[0] + a1[1] * a1[1];\n\tc -= 2 * (cx * a1[0] + cy * a1[1]);\n\tc -= cr * cr;\n\tbb4ac = b * b - 4 * a * c;\n\tif (bb4ac < 0) {\n\t\treturn false;\n\t}\n\tmu = (-b + sqrt(b * b - 4 * a * c)) / (2 * a);\n\tia1[0] = a1[0] + mu * dx;\n\tia1[1] = a1[1] + mu * dy;\n\tmu = (-b - sqrt(b * b - 4 * a * c)) / (2 * a);\n\tia2[0] = a1[0] + mu * dx;\n\tia2[1] = a1[1] + mu * dy;\n\tif (dist(a1[0], a1[1], cx, cy) < dist(a2[0], a2[1], cx, cy)) {\n\t\ttestX = a2[0];\n\t\ttestY = a2[1];\n\t} else {\n\t\ttestX = a1[0];\n\t\ttestY = a1[1];\n\t}\n\tif (dist(testX, testY, ia1[0], ia1[1]) < dist(a1[0], a1[1], a2[0], a2[1]) || dist(testX, testY, ia2[0], ia2[1]) < dist(a1[0], a1[1], a2[0], a2[1])) {\n\t\treturn true;\n\t}\n\treturn false;\n};\n*/\n\n/**\n * Intersection line/line\n *\n * http://stackoverflow.com/questions/3746274/line-intersection-with-aabb-rectangle\n * http://jsperf.com/line-intersection2/2\n *\n * @param {Number[]} a1 Line 1 P1\n * @param {Number[]} a2 Line 1 P2\n * @param {Number[]} b1 Line 2 P1\n * @param {Number[]} b2 Line 2 P2\n * @param {Number[]} result\n * @return {Number[]}\n *\nBounds.intersectLine = function(a1, a2, b1, b2, result) {\n\tif (!result) {\n\t\t// http://www.bryceboe.com/2006/10/23/line-segment-intersection-algorithm/comment-page-1/\n\t\treturn ccw(a1, b1, b2) != ccw(a2, b1, b2) &&\n\t\t\tccw(a1, a2, b1) != ccw(a1, a2, b2);\n\t}\n\n\t// http://stackoverflow.com/questions/563198/how-do-you-detect-where-two-line-segments-intersect/1968345#1968345\n\tvar s1_x = a2[0] - a1[0];\n\tvar s1_y = a2[1] - a1[1];\n\tvar s2_x = b2[0] - b1[0];\n\tvar s2_y = b2[1] - b1[1];\n\n\tvar s = (-s1_y * (a1[0] - b1[0]) + s1_x * (a1[1] - b1[1])) / (-s2_x * s1_y + s1_x * s2_y);\n\tvar t = (s2_x * (a1[1] - b1[1]) - s2_y * (a1[0] - b1[0])) / (-s2_x * s1_y + s1_x * s2_y);\n\n\t// Collision detected\n\tif (s >= 0 && s <= 1 && t >= 0 && t <= 1) {\n\t\treturn Vec2.set(result, a1[0] + (t * s1_x), a1[1] + (t * s1_y));\n\t}\n\treturn null;\n};\n\nfunction ccw(a, b, c) {\n\tvar cw = ((c[1] - a[1]) * (b[0] - a[0])) - ((b[1] - a[1]) * (c[0] - a[0]));\n\treturn (cw > 0) ? true : cw < 0 ? false : true; // colinear\n}\n*/\n\n/**\n * @class  Bounds.Debug\n * Outlines the boundaries and angle of an entity.\n * @extends Component\n */\nfunction BoundsDebug() {\n\tComponent.call(this);\n\tthis.color = Color();\n}\n\nBoundsDebug.prototype = {\n\tattributes: {\n\t\tcolor: Color.gray,\n\t\topacity: 0.5,\n\t\tfill: false\n\t},\n\n\tcreate: function(attributes) {\n\t\tthis.opacity = attributes.opacity;\n\t\tthis.fill = attributes.fill;\n\t}\n}\n\n\n/*\nFIXME: Convert to sprite\nrender = function(ctx) {\n\tvar bounds = this.components.bounds;\n\tctx.save();\n\tif (this.fill) {\n\t\tctx.fillStyle = Color.rgba(this.color, this.opacity * 0.5);\n\t}\n\tctx.strokeStyle = Color.rgba(this.color, this.opacity);\n\tctx.lineWidth = 1;\n\tthis.components.transform.applyMatrix(ctx);\n\tif (bounds.shape == 'circle') {\n\t\tctx.beginPath();\n\t\tctx.lineTo(0, bounds.radius);\n\t\tctx.moveTo(0, 0);\n\t\tctx.arc(0, 0, bounds.radius | 0, 0, Mathf.TAU);\n\t\tif (this.fill) {\n\t\t\tctx.fill();\n\t\t}\n\t\tctx.stroke();\n\t} else {\n\t\tvar size = bounds._size;\n\t\tctx.strokeRect(-size[0] / 2 | 0, -size[1] / 2 | 0, size[0] | 0, size[1] | 0);\n\t\tif (this.fill) {\n\t\t\tctx.fillRect(-size[0] / 2 | 0, -size[1] / 2 | 0, size[0] | 0, size[1] | 0);\n\t\t}\n\t}\n\tctx.restore();\n};\n*/\n\nComponent.create(BoundsDebug, 'boundsDebug');\n\nBounds.Debug = BoundsDebug;\n\nmodule.exports = Bounds;\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/bounds.js\n **/","'use strict';\n\nvar Component = require('./component');\nvar Pool = require('./pool');\nvar Vec2 = require('../math/vec2');\nvar Engine = require('./engine');\n\n/**\n * Collider\n *\n * Circle only\n *\n * http://jsperf.com/circular-collision-detection/2\n * https://sites.google.com/site/t3hprogrammer/research/circle-circle-collision-tutorial#TOC-Dynamic-Circle-Circle-Collision\n * http://gamedev.tutsplus.com/tutorials/implementation/when-worlds-collide-simulating-circle-circle-collisions/\n *\n * @extends Component\n */\nfunction Collider() {\n  Component.call(this);\n  this.trigger = false;\n  this.include = null;\n  this.exclude = null;\n}\n\nCollider.prototype = {\n  attributes: {\n    trigger: false,\n    include: null,\n    exclude: null\n  }\n};\n\nvar p = Vec2();\nvar n = Vec2();\nvar cache = Vec2();\nvar pCache = Vec2();\nvar nCache = Vec2();\nvar triggerEvent = {};\nvar collideEvent = {};\n\nCollider.simulate = function(dt) {\n  var colliders = this.pool.heap;\n  var i = colliders.length;\n  while (i--) {\n    var collider1 = colliders[i];\n    if (!collider1.enabled) {\n      continue;\n    }\n    var j = i;\n    while (j-- && collider1.enabled) {\n      var collider2 = colliders[j];\n      if (!collider2.enabled) {\n        continue;\n      }\n      var entity1 = collider1.entity;\n      var entity2 = collider2.entity;\n      var kinetic1 = entity1.components.kinetic;\n      var kinetic2 = entity2.components.kinetic;\n\n      if ((kinetic1.sleeping && kinetic2.sleeping) ||\n        (collider1.include && !entity2.has(collider1.include)) ||\n        (collider2.include && !entity1.has(collider2.include)) ||\n        (collider1.exclude && entity2.has(collider1.exclude)) ||\n        (collider2.exclude && entity1.has(collider2.exclude))) {\n        continue;\n      }\n\n      var radius1 = entity1.components.bounds.radius;\n      var radius2 = entity2.components.bounds.radius;\n      var pos1 = entity1.components.transform.position;\n      var pos2 = entity2.components.transform.position;\n      var radiusSum = radius1 + radius2;\n\n      var diffSq = Vec2.distSq(pos1, pos2);\n      if (diffSq > radiusSum * radiusSum) {\n        continue;\n      }\n\n      Vec2.norm(Vec2.sub(pos1, pos2, p));\n      var diff = Math.sqrt(diffSq);\n\n      if (collider1.trigger || collider2.trigger) {\n        triggerEvent.normal = p;\n        triggerEvent.diff = diff;\n        triggerEvent.entity = entity2;\n        entity1.emit('onTrigger', triggerEvent);\n\n        triggerEvent.entity = entity1;\n        entity2.emit('onTrigger', triggerEvent);\n        continue;\n      }\n\n      diff -= radiusSum;\n      var vel1 = kinetic1.velocity;\n      var vel2 = kinetic2.velocity;\n      var mass1 = kinetic1.mass || 1;\n      var mass2 = kinetic2.mass || 1;\n\n      if (diff < 0) {\n        Vec2.add(\n          pos1,\n          Vec2.scale(p, -diff * 2 * radius1 / radiusSum, cache)\n        );\n        Vec2.add(\n          pos2,\n          Vec2.scale(p, diff * 2 * radius2 / radiusSum, cache)\n        );\n      }\n\n      // normal vector to collision direction\n      Vec2.perp(p, n);\n\n      var vp1 = Vec2.dot(vel1, p); // velocity of P1 along collision direction\n      var vn1 = Vec2.dot(vel1, n); // velocity of P1 normal to collision direction\n      var vp2 = Vec2.dot(vel2, p); // velocity of P2 along collision direction\n      var vn2 = Vec2.dot(vel2, n); // velocity of P2 normal to collision\n\n      // fully elastic collision (energy & momentum preserved)\n      var vp1After = (mass1 * vp1 + mass2 * (2 * vp2 - vp1)) / (mass1 + mass2);\n      var vp2After = (mass1 * (2 * vp1 - vp2) + mass2 * vp2) / (mass1 + mass2);\n\n      Vec2.add(\n        Vec2.scale(p, vp1After, pCache),\n        Vec2.scale(n, vn1, nCache),\n        vel1\n      );\n      Vec2.add(\n        Vec2.scale(p, vp2After, pCache),\n        Vec2.scale(n, vn2, nCache),\n        vel2\n      );\n\n      collideEvent.normal = n;\n      collideEvent.entity = entity2;\n      entity1.emit('onCollide', collideEvent);\n\n      collideEvent.entity = entity1;\n      entity2.emit('onCollide', collideEvent);\n    }\n  }\n};\n\nComponent.create(Collider, 'collider');\n\nmodule.exports = Collider;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/collider.js\n **/","'use strict';\n/**\n * @module core/color\n */\n\nvar Mathf = require('../math/mathf');\nvar Random = require('../math/random');\nvar Tweens = require('../math/tweens');\n\n/**\n * Initialize from Color array or RGBA. Returns a new (typed) array.\n * @class\n * @classdesc Representation of RGBA colors.\n * @param {Number[]|null} fromOrR Array or red-value\n * @param {Number|null} g Green-value\n * @param {Number|null} b Blue-value\n * @param {Number|null} a Alpha-value\n * @returns {Number[]} new Float32Array [r, g, b, a]\n */\nfunction Color(fromOrR, g, b, a) {\n\tif (g != null) {\n\t\treturn new Float32Array([fromOrR, g, b, (a != null) ? a : 1]);\n\t}\n\tif (fromOrR != null) {\n\t\treturn new Float32Array([fromOrR[0], fromOrR[1], fromOrR[2],\n\t\t\t(fromOrR[3] != null) ? fromOrR[3] : 1]);\n\t}\n\treturn new Float32Array(Color.black);\n}\n\nColor.white = Color(255, 255, 255);\nColor.black = Color(0, 0, 0);\nColor.gray = Color(128, 128, 128);\nColor.cache = [Color(), Color(), Color(), Color()];\n\n/**\n * Set result from color values\n * @memberOf Color\n * @param {Number[]} result Color to mutate\n * @param {Number} r\n * @param {Number} g\n * @param {Number} b\n * @param {Number} a\n * @return {Number[]} result\n */\nColor.set = function(result, r, g, b, a) {\n\tresult[0] = r || 0;\n\tresult[1] = g || 0;\n\tresult[2] = b || 0;\n\tresult[3] = a || 0;\n\treturn result;\n};\n\n/**\n * Copy to result from other color\n * @param {Number[]} result Target\n * @param {Number[]} b Source\n * @return {Number[]}\n */\nColor.copy = function(result, b) {\n\tresult[0] = b[0];\n\tresult[1] = b[1];\n\tresult[2] = b[2];\n\tresult[3] = b[3];\n\treturn result;\n};\n\nColor.lerp = function(a, b, t, alpha, result) {\n\tresult = result || a;\n\tresult[0] = (1 - t) * a[0] + t * b[0];\n\tresult[1] = (1 - t) * a[1] + t * b[1];\n\tresult[2] = (1 - t) * a[2] + t * b[2];\n\tif (alpha > 0.05) {\n\t\tresult[3] = (1 - t) * a[3] + t * b[3];\n\t} else {\n\t\tresult[3] = a[3];\n\t}\n\treturn result;\n};\n\nColor.lerpList = function(result, list, t, ease) {\n\tvar last = list.length - 1;\n\tt = Mathf.clamp(t * last, 0, last);\n\tvar start = t | 0;\n\tvar sub = (ease || Tweens.linear)(t - start);\n\tif (sub < 0.02) {\n\t\treturn Color.copy(result, list[start]);\n\t}\n\tif (sub > 0.98) {\n\t\treturn Color.copy(result, list[start + 1]);\n\t}\n\treturn Color.lerp(list[start], list[start + 1], sub, null, result);\n};\n\nColor.variant = function(a, t, result) {\n\tt = Random.rand(-t, t);\n\treturn Color.lerp(a, (t > 0 ? Color.white : Color.black), t, false, result);\n};\n\nColor.rgba = function(a, alpha) {\n\tif (alpha == null) {\n\t\talpha = a[3];\n\t}\n\tif (alpha > 0.98) {\n\t\treturn 'rgb(' + (a[0] | 0) + ', ' + (a[1] | 0) + ', ' + (a[2] | 0) + ')';\n\t}\n\treturn 'rgba(' + (a[0] | 0) + ', ' + (a[1] | 0) + ', ' + (a[2] | 0) + ', ' + alpha + ')';\n};\n\nColor.defineProperty = function(cls, name) {\n\tvar prop = '_' + name;\n\tObject.defineProperty(cls.prototype, name, {\n\t\tget: function() {\n\t\t\treturn this[prop];\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis[prop][0] = value[0];\n\t\t\tthis[prop][1] = value[1];\n\t\t\tthis[prop][2] = value[2];\n\t\t\tthis[prop][3] = value[3];\n\t\t}\n\t});\n\tvar copy = 'copy' + name.charAt(0).toUpperCase() + name.slice(1);\n\tcls.prototype[copy] = function(result) {\n\t\tresult[0] = this[prop][0];\n\t\tresult[1] = this[prop][1];\n\t\tresult[2] = this[prop][2];\n\t\tresult[3] = this[prop][3];\n\t};\n};\n\nmodule.exports = Color;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/color.js\n **/","/** @flow */\n\nvar Pool = require('./pool');\nvar Entity = require('./entity');\nrequire('../core/shims');\n\nvar ComponentMap = Pool.ComponentMap;\n\nvar emptyEntity = new Entity();\nvar emptyComponentMap = new ComponentMap();\n\n/**\n * @class Component\n * Encapsulated behaviours that can be attached to entities.\n *\n * @abstract\n * @property {Boolean} enabled False when disabled or not allocated. Never act on disabled components!\n * @property {Entity} parent Container entity\n * @property {Entity} root Scene entity\n * @property {Number} layer Z-index\n */\nclass Component {\n\ttype: string;\n\tuid: number;\n\tattributes: ?Object;\n\tenabled: boolean;\n\tallocated: boolean;\n\tentity: any;\n\tparent: Entity;\n\troot: Entity;\n\tlayer: number;\n\tcomponents: {[key:string]: ?Component};\n\tpool: Pool;\n\teventRefs: Array<any>;\n\n\tconstructor() {\n\t\tthis.uid = 0;\n\t\tthis.enabled = false;\n\t\tthis.allocated = false;\n\t\tthis.entity = emptyEntity;\n\t\tthis.parent = emptyEntity;\n\t\tthis.root = emptyEntity;\n\t\tthis.layer = 0.0;\n\t\tthis.components = emptyComponentMap;\n\t\tthis.eventRefs = [];\n\t}\n\n\t/**\n\t * Brief summary.\n\t * @private\n\t * @return {String}\n\t */\n\ttoString():string {\n\t\treturn 'Component ' + this.type + '#' + this.uid +\n\t\t\t' [^ ' + this.entity + ']';\n\t}\n\n\t/**\n\t * Allocate Component overriding default attributes.\n\t * @private\n\t * @param {Object} attributes Attributes\n\t * @return {Component}\n\t */\n\tallocate(attributes:?Object):void {\n\t\tvar entity = this.parent;\n\t\tthis.entity = entity;\n\t\tvar components = entity.components;\n\t\tif (components[this.type] != null) {\n\t\t\tthrow new Error('Component ' + this.type + ' already allocated for this Entity');\n\t\t}\n\t\tcomponents[this.type] = this;\n\t\tthis.components = components; // Bailout_Normal after setprop\n\t\tentity.componentKeys.push(this.type);\n\t\tthis.create(attributes);\n\t}\n\n\t/**\n\t * Destroy Component, removes it from {@link Entity}.\n\t */\n\tdestroy() {\n\t\tthis.enabled = false;\n\t\tthis.pool.destroy(this);\n\t}\n\n\tfree() {\n\t\t// override me\n\t}\n\n\tcreate(attributes:?Object) {\n\t\t// override me\n\t}\n\n\t/**\n\t * Free destroyed Component.\n\t * @private\n\t */\n\tsuperFree() {\n\t\tif (!this.allocated) {\n\t\t\tthrow new Error('Entity already collected');\n\t\t}\n\t\tthis.allocated = false;\n\t\tthis.free();\n\t\tthis.components[this.type] = null;\n\t\t// Clear reference to entity.components\n\t\tthis.components = emptyComponentMap;\n\t\tthis.entity = emptyEntity;\n\t\tthis.root = emptyEntity;\n\t\tthis.parent = emptyEntity;\n\t}\n\n\tenable(state?:boolean) {\n\t\tif (state == null) {\n\t\t\tstate = !this.enabled;\n\t\t}\n\t\tthis.entity.emit('onComponent' + (state ? 'Enable' : 'Disable'), this);\n\t\tthis.enabled = state;\n\t}\n}\n\nComponent.prototype.type = 'component';\n\nComponent.create = function(cls:any, type?:string, attributeKeys?:Array<string>):any {\n\tvar prototype = cls.prototype;\n\t// deprecated\n\tif (attributeKeys != null) {\n\t\tconsole.warn('Component.create with attributeKeys is deprecated!');\n\t\tconsole.trace();\n\t\tvar attributes = prototype.attributes || (prototype.attributes = {});\n\t\tattributeKeys.forEach(function(name) {\n\t\t\tattributes[name] = prototype[name];\n\t\t});\n\t}\n\tvar descriptors = {};\n\tObject.getOwnPropertyNames(prototype).forEach(function(name) {\n\t\tdescriptors[name] = Object.getOwnPropertyDescriptor(prototype, name);\n\t});\n\tif (type != null) {\n\t\tdescriptors.type = {\n\t\t\tvalue: type\n\t\t};\n\t}\n\tcls.prototype = Object.create(Component.prototype, descriptors);\n\tcls.prototype.constructor = cls;\n\tcls.prototype.pool = new Pool(cls);\n};\n\nmodule.exports = Component;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/component.js\n **/","/** @flow weak */\n\nvar Component = require('./component');\nvar Vec2 = require('../math/vec2');\nvar Engine = require('./engine');\nvar Pool = require('./pool');\n\nclass Console {\n\tconstructor() {\n\t\tComponent.call(this);\n\t\tthis.css = '';\n\t\tthis.container = null;\n\t\tthis.graphStyle = false;\n\t\tthis.width = 0;\n\t\tthis.height = 0;\n\t\tthis.cap = 0;\n\t\tthis.resolution = 0.0;\n\t}\n}\n\nConsole.prototype = {\n\tcolors: ['#ddd', '#fff', '#ffc', '#fcc'],\n\n\tsections: ['#ffff33', '#ff8533', '#2babd6', '#9d2bd6'],\n\t// ['#fffa5b', '#ff945b', '#5bf4ff', '#bd5bff']\n\n\tattributes: {\n\t\tcss: '',\n\t\tcontainer: null,\n\t\tgraphStyle: true,\n\t\twidth: 100,\n\t\theight: 56,\n\t\tcap: 50,\n\t\tresolution: 0.2\n\t},\n\n\tcreate: function() {\n\t\tthis.nullify();\n\n\t\tvar wrapCss = 'position: fixed;' +\n\t\t\t'transform: translateZ(0);' +\n\t\t\t'left: 0;' +\n\t\t\t'top: 0;' +\n\t\t\t'user-select: none;' +\n\t\t\t'overflow: hidden;' +\n\t\t\t'padding: 0;' +\n\t\t\t'width: ' + this.width + 'px;' +\n\t\t\t'color: #ccc;' +\n\t\t\t'background-color: rgba(0, 0, 0, 1);' +\n\t\t\t'outline: 1px solid rgba(128, 128, 128, 0.5);' +\n\t\t\t'font: 400 9px/20px Helvetica,Arial,sans-serif;' +\n\t\t\t'text-align: right;' +\n\t\t\t'text-shadow: 1px 1px 0 rgba(0, 0, 0, 1), 0 0 1px rgba(0, 0, 0, 1);' +\n\t\t\t'cursor: ns-resize;' + this.css;\n\t\tvar panelCss = 'width: 50%;' +\n\t\t\t'overflow: hidden;' +\n\t\t\t'display: inline-block;' +\n\t\t\t'-moz-box-sizing: border-box;' +\n\t\t\t'-webkit-box-sizing: border-box;' +\n\t\t\t'box-sizing: border-box;' +\n\t\t\t'z-index: 2;';\n\t\tvar spanSmallCss = 'display: inline-block;' +\n\t\t\t'width: 38%;' +\n\t\t\t'padding-right: 3px;' +\n\t\t\t'-moz-box-sizing: border-box;' +\n\t\t\t'-webkit-box-sizing: border-box;' +\n\t\t\t'box-sizing: border-box;';\n\t\tvar spanCss = spanSmallCss +\n\t\t\t'width: 62%;' +\n\t\t\t'font-weight: bold;' +\n\t\t\t'font-size: 12px;';\n\n\t\tif (this.graphStyle) {\n\t\t\tpanelCss += 'position: absolute;' +\n\t\t\t\t'top: 0;' +\n\t\t\t\t'left: 0;';\n\t\t} else {\n\t\t\twrapCss += 'height: 20px;';\n\t\t}\n\n\t\tvar wrap = this.wrap = document.createElement('div');\n\t\twrap.id = 'console';\n\t\twrap.style.cssText = wrapCss;\n\n\t\tthis.fpsSpan = document.createElement('span');\n\t\tthis.fpsSpan.style.cssText = spanCss;\n\t\tthis.fpsSpan.title = 'FPS';\n\t\tthis.fpsSpan2 = document.createElement('span');\n\t\tthis.fpsSpan2.style.cssText = spanSmallCss;\n\t\tthis.tickSpan = document.createElement('span');\n\t\tthis.tickSpan.style.cssText = spanCss;\n\t\tthis.tickSpan.title = 'MS per tick';\n\t\tthis.tickSpan2 = document.createElement('span');\n\t\tthis.tickSpan2.style.cssText = spanSmallCss;\n\t\tthis.fpsSpan2.title = this.tickSpan2.title = ' standard deviation';\n\n\t\tvar panel = document.createElement('span');\n\t\tpanel.style.cssText = panelCss;\n\t\tpanel.appendChild(this.fpsSpan);\n\t\tpanel.appendChild(this.fpsSpan2);\n\t\twrap.appendChild(panel);\n\n\t\tpanel = document.createElement('span');\n\t\tpanel.style.cssText = panelCss + 'left: 50%;';\n\t\tpanel.appendChild(this.tickSpan);\n\t\tpanel.appendChild(this.tickSpan2);\n\t\twrap.appendChild(panel);\n\n\t\tif (this.graphStyle) {\n\t\t\tvar rulerCss = 'position: absolute;' +\n\t\t\t\t'left: 0;' +\n\t\t\t\t'width: 100%;' +\n\t\t\t\t'height: 1px;' +\n\t\t\t\t'background-color: rgba(128, 128, 128, 0.3);';\n\n\t\t\tvar ruler = document.createElement('span');\n\t\t\truler.style.cssText = rulerCss + ('bottom: ' + (this.height * 0.66) + 'px;');\n\t\t\twrap.appendChild(ruler);\n\t\t\truler = document.createElement('span');\n\t\t\truler.style.cssText = rulerCss + ('bottom: ' + (this.height * 0.33) + 'px;');\n\t\t\twrap.appendChild(ruler);\n\n\t\t\tthis.graphSpan = document.createElement('div');\n\t\t\tthis.graphSpan.style.cssText = 'height: ' + this.height + 'px;' +\n\t\t\t\t'z-index: 1;';\n\t\t\tthis.graphSpan.title = 'Fixed Update + Update + Render + Lag';\n\n\t\t\tvar barCss = 'width: 1px;' +\n\t\t\t\t'float: left;' +\n\t\t\t\t'margin-top: 0px;';\n\t\t\tvar sectionCss = 'display: block;' +\n\t\t\t\t'height: 0px;';\n\n\t\t\tvar i = this.width;\n\t\t\twhile (i--) {\n\t\t\t\tvar bar = document.createElement('span');\n\t\t\t\tbar.className = 'console-bar';\n\t\t\t\tbar.style.cssText = barCss;\n\t\t\t\tvar sections = this.sections;\n\t\t\t\tfor (var j = 0, l = sections.length; j < l; j++) {\n\t\t\t\t\tvar section = document.createElement('span');\n\t\t\t\t\tsection.className = 'console-section';\n\t\t\t\t\tsection.style.cssText = sectionCss +\n\t\t\t\t\t\t'background-color: ' + sections[j] + ';';\n\t\t\t\t\tbar.appendChild(section);\n\t\t\t\t}\n\t\t\t\tthis.graphSpan.appendChild(bar);\n\t\t\t}\n\t\t\twrap.appendChild(this.graphSpan);\n\t\t}\n\n\t\t(this.container || document.body).appendChild(wrap);\n\n\t\tthis.lastClick = 0;\n\t\twrap.addEventListener('click', this);\n\n\t\tthis.maximized = !(~(document.cookie || '').indexOf('console_max'));\n\t\tthis.toggle();\n\t},\n\n\thandleEvent: function(evt) {\n\t\tvar time = evt.timeStamp;\n\t\tif (time - this.lastClick < 500) {\n\t\t\tthis.destroy();\n\t\t}\n\t\tthis.lastClick = time;\n\t\tthis.toggle();\n\t\treturn false;\n\t},\n\n\ttoggle: function() {\n\t\tif (!this.graphStyle) {\n\t\t\treturn;\n\t\t}\n\t\tvar margin = 0;\n\t\tvar opacity = 1;\n\t\tthis.maximized = !this.maximized;\n\t\tif (!this.maximized) {\n\t\t\topacity = 0.5;\n\t\t\tmargin = -this.height + 20;\n\t\t\tdocument.cookie = 'console_max=; expires=' + (new Date()).toGMTString();\n\t\t} else {\n\t\t\tdocument.cookie = 'console_max=1';\n\t\t}\n\t\tvar style = this.graphSpan.style;\n\t\tstyle.marginTop = margin + 'px';\n\t\tstyle.opacity = opacity;\n\t},\n\n\tfree: function() {\n\t\t(this.container || document.body).removeChild(this.wrap);\n\t\tthis.wrap.removeEventListener('click', this);\n\t\tthis.wrap = null;\n\t\tthis.container = null;\n\t},\n\n\tonTimeEnd: function(samples) {\n\t\tvar dt = samples.dt;\n\t\tif (!dt) {\n\t\t\treturn;\n\t\t}\n\t\tthis.dtSum += dt;\n\t\tvar fps = 1 / dt;\n\t\tthis.fpsSum += fps;\n\t\tthis.fpsSq += fps * fps;\n\t\tvar lag = samples.lag;\n\t\tthis.lagSum += lag;\n\t\tthis.lagSq += lag * lag;\n\t\tvar tick = samples.tick;\n\t\tthis.tickSum += tick;\n\t\tthis.tickSq += tick * tick;\n\t\tthis.updateSum += samples.update;\n\t\tthis.fixedUpdateSum += samples.fixedUpdate;\n\t\tthis.renderSum += samples.render;\n\t\tthis.frames++;\n\t\tif (this.dtSum >= this.resolution) {\n\t\t\tthis.renderGraph();\n\t\t}\n\t},\n\n\trenderGraph: function() {\n\t\tvar colors = this.colors;\n\t\tvar tickMean = this.tickSum / this.frames;\n\t\tvar tickSD = Math.sqrt((this.tickSq - (this.tickSum * this.tickSum / this.frames)) / (this.frames - 1));\n\n\t\tvar color = colors[0];\n\t\tif (tickMean > 33) {\n\t\t\tcolor = colors[3];\n\t\t} else if (tickMean > 16) {\n\t\t\tcolor = colors[2];\n\t\t} else if (tickMean > 5) {\n\t\t\tcolor = colors[1];\n\t\t}\n\n\t\tthis.tickSpan.textContent = tickMean < 10 ? Math.round(tickMean * 10) / 10 : Math.round(tickMean);\n\t\tthis.tickSpan.style.color = color;\n\t\tthis.tickSpan2.textContent = tickSD < 10 ? Math.round(tickSD || 0 * 10) / 10 : Math.round(tickSD);\n\n\t\tif (this.graphStyle) {\n\t\t\tvar bar = this.graphSpan.appendChild(this.graphSpan.firstChild);\n\t\t\tvar overall = 0;\n\n\t\t\tvar mag = Math.round(this.height * this.lagSum / this.frames / this.cap);\n\t\t\tbar.children[0].style.height = mag + 'px';\n\t\t\toverall += mag;\n\n\t\t\tmag = this.height * this.renderSum / this.frames / this.cap;\n\t\t\tbar.children[1].style.height = mag + 'px';\n\t\t\toverall += mag;\n\n\t\t\tmag = Math.round(this.height * this.updateSum / this.frames / this.cap);\n\t\t\tbar.children[2].style.height = mag + 'px';\n\t\t\toverall += mag;\n\n\t\t\tmag = Math.round(this.height * this.fixedUpdateSum / this.frames / this.cap);\n\t\t\tbar.children[3].style.height = mag + 'px';\n\t\t\toverall += mag;\n\n\t\t\tbar.style.marginTop = (this.height - overall) + 'px';\n\t\t}\n\n\t\tvar fpsMean = this.fpsSum / this.frames;\n\t\tvar fpsSD = Math.sqrt((this.fpsSq - (this.fpsSum * this.fpsSum / this.frames)) / (this.frames - 1));\n\t\tif (fpsMean < 30) {\n\t\t\tcolor = colors[3];\n\t\t} else if (fpsMean < 40) {\n\t\t\tcolor = colors[2];\n\t\t} else if (fpsMean < 55) {\n\t\t\tcolor = colors[1];\n\t\t} else {\n\t\t\tcolor = colors[0];\n\t\t}\n\t\tthis.fpsSpan.textContent = Math.round(fpsMean || 0);\n\t\tthis.fpsSpan.style.color = color;\n\t\tthis.fpsSpan2.textContent = Math.round(fpsSD || 0);\n\n\t\tthis.nullify();\n\t},\n\n\tnullify: function() {\n\t\tthis.dtSum = 0.0;\n\t\tthis.fpsSum = 0.0;\n\t\tthis.fpsSq = 0.0;\n\t\tthis.tickSum = 0.0;\n\t\tthis.tickSq = 0.0;\n\t\tthis.lagSum = 0.0;\n\t\tthis.lagSq = 0.0;\n\t\tthis.fixedUpdateSum = 0.0;\n\t\tthis.updateSum = 0.0;\n\t\tthis.renderSum = 0.0;\n\t\tthis.frames = 0;\n\t}\n};\n\nComponent.create(Console, 'console');\n\nmodule.exports = Console;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/console.js\n **/","'use strict';\n\nvar Entity = require('./entity');\nvar Pool = require('./pool');\nrequire('./shims');\n\nvar perf = window.performance;\nvar raFrame = window.requestAnimationFrame;\n\n/**\n * @class Engine\n * Managing renderer, scene and loop\n * @extends Entity\n */\nfunction Engine() {\n\tEntity.call(this);\n\n\tthis.running = false;\n\tthis.time = 0.0;\n\tthis.lastTime = 0.0;\n\tthis.frame = 0;\n\tthis.tail = 0.0;\n\tthis.fdtEnabled = false;\n\tthis.fdt = 1 / 30;\n\tthis.dt = 1 / 60;\n\tthis.maxDt = 0.5;\n\tthis.maxFdt = this.fdt * 5;\n\tthis.scale = 1;\n\tthis.rfa = true;\n\n\tthis.debug = {\n\t\tprofile: 0,\n\t\tstep: false,\n\t\ttime: true,\n\t\tprofileFrom: 0\n\t};\n\tthis.samples = {\n\t\tdt: 0,\n\t\tlag: 0,\n\t\ttick: 0,\n\t\tfixedUpdate: 0,\n\t\tupdate: 0,\n\t\trender: 0\n\t};\n\n\tthis.tickBound = this.tick.bind(this);\n\n\tthis.element = null;\n\tthis.scene = null;\n}\n\nEngine.prototype = Object.create(Entity.prototype);\n\nEngine.prototype.type = 'engine';\n\nEngine.prototype.init = function(element) {\n\tthis.element = element;\n\n\t// Late require. TODO: Justify!\n\trequire('./console');\n\tthis.createComponent('console');\n\n\trequire('./input');\n\tthis.createComponent('input');\n};\n\n/**\n * Set scene and start game loop\n * @param {Entity} scene\n * @param {Boolean} soft\n */\nEngine.prototype.play = function(scene, soft) {\n\tif (this.scene) {\n\t\tthis.emitAll('onSceneEnd', this.scene);\n\t\tif (soft) {\n\t\t\tthis.scene.enable(false, true);\n\t\t} else {\n\t\t\tthis.scene.destroy();\n\t\t}\n\t}\n\tthis.scene = scene;\n\tthis.emitAll('onSceneStart', scene);\n\tthis.start();\n};\n\n/**\n * Start loop\n */\nEngine.prototype.start = function() {\n\tif (this.running) {\n\t\treturn;\n\t}\n\tthis.running = true;\n\tthis.emitAll('onEngineStart');\n\traFrame(this.tickBound);\n};\n\nEngine.prototype.pause = function() {\n\tif (!this.running) {\n\t\treturn;\n\t}\n\tthis.emitAll('onEnginePause');\n\tthis.running = false;\n};\n\n/**\n * Game loop tick, called by requestAnimationFrame\n *\n * @param {Number} time Delta time\n */\nEngine.prototype.tick = function(time) {\n\t// Time value in seconds\n\ttime = (time != null && time < 1e12 ? time : perf.now()) / 1000;\n\tthis.time = time;\n\t// rfa here to be less error prone\n\n\tvar i = 0;\n\tvar l = 0;\n\tvar calls = [];\n\tvar debug = this.debug;\n\tvar samples = this.hasEvent('onTimeEnd') ? this.samples : null;\n\tvar pong = 0.0;\n\n\tif (this.lastTime) {\n\t\tvar dt = time - this.lastTime;\n\t\tif (dt > this.maxDt || dt <= 0) {\n\t\t\tdt = this.dt;\n\t\t} else if (dt > 0.01 && samples != null) {\n\t\t\tsamples.dt = dt;\n\t\t\tvar lag = time - samples.next;\n\t\t\tif (lag > 0) {\n\t\t\t\tsamples.lag = lag * 1000;\n\t\t\t}\n\t\t}\n\t\tthis.dt = (dt *= this.scale);\n\t\tthis.frame++;\n\n\t\tif (debug.profile && !debug.profileFrom) {\n\t\t\tdebug.profileFrom = debug.profile;\n\t\t\tconsole.profile('Frame ' + debug.profileFrom);\n\t\t}\n\n\t\tvar ping = (samples != null) ? perf.now() : 0.0;\n\t\tvar pingTick = ping;\n\n\t\t// Invoke fixed updates\n\t\tvar fdt = (this.fdtEnabled) ? this.fdt : dt;\n\t\tvar tail = Math.min(this.tail + dt, this.maxFdt * this.scale);\n\t\twhile (tail >= fdt) {\n\t\t\ttail -= fdt;\n\t\t\tvar fixedUpdates = Pool.calls.fixedUpdate;\n\t\t\tfor (i = 0, l = fixedUpdates.length; i < l; i++) {\n\t\t\t\tif (fixedUpdates[i].enabled) {\n\t\t\t\t\tfixedUpdates[i].fixedUpdate(fdt);\n\t\t\t\t}\n\t\t\t}\n\t\t\tvar simulates = Pool.calls.simulate;\n\t\t\tfor (i = 0, l = simulates.length; i < l; i++) {\n\t\t\t\tif (simulates[i].enabled) {\n\t\t\t\t\tsimulates[i].simulate(fdt);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.tail = tail;\n\n\t\tif (samples != null) {\n\t\t\tpong = perf.now();\n\t\t\tsamples.fixedUpdate = pong - ping;\n\t\t\tping = pong;\n\t\t}\n\n\t\t// Invoke update\n\t\tvar updates = Pool.calls.update;\n\t\tfor (i = 0, l = updates.length; i < l; i++) {\n\t\t\tif (updates[i].enabled) {\n\t\t\t\tupdates[i].update(dt);\n\t\t\t}\n\t\t}\n\n\t\tPool.free();\n\n\t\t// Invoke postUpdate\n\t\tvar postUpdates = Pool.calls.postUpdate;\n\t\tfor (i = 0, l = postUpdates.length; i < l; i++) {\n\t\t\tif (postUpdates[i].enabled) {\n\t\t\t\tpostUpdates[i].postUpdate(dt);\n\t\t\t}\n\t\t}\n\n\t\tif (samples != null) {\n\t\t\tpong = perf.now();\n\t\t\tsamples.update = pong - ping;\n\t\t\tping = pong;\n\t\t}\n\n\t\t// Invoke preRender\n\t\tvar preRenders = Pool.calls.preRender;\n\t\tfor (i = 0, l = preRenders.length; i < l; i++) {\n\t\t\tif (preRenders[i].enabled) {\n\t\t\t\tpreRenders[i].preRender(dt);\n\t\t\t}\n\t\t}\n\n\t\tvar ctx = this.renderer.save();\n\t\t// Invoke render\n\t\tvar renders = Pool.calls.render;\n\t\tfor (i = 0, l = renders.length; i < l; i++) {\n\t\t\tif (renders[i].enabled) {\n\t\t\t\trenders[i].render(ctx);\n\t\t\t}\n\t\t}\n\t\tthis.renderer.restore();\n\n\t\tif (samples != null) {\n\t\t\tpong = perf.now();\n\t\t\tsamples.render = pong - ping;\n\t\t\tsamples.tick = pong - pingTick;\n\t\t}\n\n\t\tif (debug.step) {\n\t\t\t// debugger; // jshint ignore:line\n\t\t}\n\n\t\tif (debug.profileFrom) {\n\t\t\tif (!--debug.profile) {\n\t\t\t\tconsole.profileEnd('Frame ' + debug.profileFrom);\n\t\t\t\tdebug.profileFrom = 0;\n\t\t\t}\n\t\t}\n\t}\n\n\tthis.lastTime = time;\n\n\tif (samples != null) {\n\t\tsamples.next = Math.max(time + 1 / 60, perf.now() / 1000);\n\t\tthis.emit('onTimeEnd', samples);\n\t}\n\n\tif (this.running) {\n\t\tif (this.rfa) {\n\t\t\traFrame(this.tickBound);\n\t\t} else {\n\t\t\tperf.nextTick(this.tickBound);\n\t\t}\n\t}\n};\n\n// Singleton\nvar engine = new Engine();\n\n// Debugging hooks\nif ('console' in window) {\n\tconsole.m = {\n\t\tpool: function(flush) {\n\t\t\tPool.dump(flush);\n\t\t\treturn null;\n\t\t},\n\t\tprofile: function(frames) {\n\t\t\tif (frames == null) {\n\t\t\t\tframes = 60;\n\t\t\t}\n\t\t\tengine.debug.profile = frames;\n\t\t\treturn null;\n\t\t},\n\t\tstep: function() {\n\t\t\tengine.debug.step = !engine.debug.step;\n\t\t\treturn null;\n\t\t}\n\t};\n}\n\nmodule.exports = engine;\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/engine.js\n **/","/** @flow */\n\nvar Pool = require('./pool');\nvar Mathf = require('../math/mathf');\nvar ComponentMap = Pool.ComponentMap;\nvar Prefab = null;\n\n/**\n * @class Entity\n * Entities are containers that have components attached and act as event hub.\n * With parent and children, they can be organized into a hierachy\n *\n * @abstract\n * @property {Boolean} enabled False when disabled or not allocated. Never act on disabled components!\n * @property {Entity|null} parent Parent entity\n * @property {Entity|null} root Scene entity\n * @property {Number} layer Z-index\n */\nclass Entity {\n\ttype: string;\n\tuid: number;\n\tenabled: boolean;\n\tallocated: boolean;\n\tparent: ?Entity;\n\troot: ?Entity;\n\tlayer: number;\n\tcomponents: {[key:string]: any};\n\tcomponentKeys: Array<string>;\n\tevents: Object; // {[key:string]: Array<Entity|string>};\n\teventRefs: Array<any>;\n\tpool: Pool;\n\tprefab: ?string;\n\tnext: ?Entity;\n\tfirstChild: ?Entity;\n\tlastChild: ?Entity;\n\n\tconstructor() {\n\t\tthis.type = 'entity';\n\t\tthis.uid = 0;\n\t\tthis.enabled = false;\n\t\tthis.allocated = false;\n\t\tthis.layer = 0.0;\n\t\tthis.parent = null;\n\t\tthis.root = null;\n\t\tthis.components = new ComponentMap();\n\t\tthis.componentKeys = [];\n\t\tthis.events = {};\n\t\tthis.eventRefs = [];\n\t\tthis.prefab = '';\n\t\tthis.next = null;\n\t\tthis.firstChild = null;\n\t}\n\n\t/**\n\t * Brief summary\n\t * @private\n\t * @return {String}\n\t */\n\ttoString():string {\n\t\tvar comps = this.componentKeys.join(', ');\n\t\treturn 'Entity #' + this.uid + ' (' + comps + ') [^ ' +\n\t\t\tthis.parent + ']';\n\t}\n\n\t/**\n\t * Allocates entity from component/attribute hash\n\t * @private\n\t * @param {Object} attributes List of components and their attributes\n\t * @return {Entity}\n\t */\n\tallocate(attributes:?Object):void {\n\t\tvar parent = this.parent\n\t\tif (parent != null) {\n\t\t\tvar last = parent.lastChild;\n\t\t\tif (last != null) {\n\t\t\t\tlast.next = this;\n\t\t\t} else {\n\t\t\t\tparent.firstChild = this;\n\t\t\t}\n\t\t}\n\t\tthis.prefab = '';\n\t\tif (attributes != null) {\n\t\t\tfor (var type in attributes) {\n\t\t\t\tthis.createComponent(type, attributes[type]);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Add {@link Component} to Entity\n\t * @param {String} type Component type\n\t * @param  {Object} attributes (optional) Override component attributes\n\t * @return {Component}\n\t */\n\tcreateComponent(type:string, attributes:?Object):any {\n\t\tvar pool = Pool.byType[type];\n\t\tif (pool == null) {\n\t\t\tthrow new Error('Unknown component \"' + type + '\". ' + this);\n\t\t}\n\t\treturn pool.allocate(this, attributes);\n\t}\n\n\t/**\n\t * Add new Entity as child\n\t * @param {String|Object} prefabId {@link Prefab} ID or prefab attribute object\n\t * @param {Object} attributes (optional) Override {@link Prefab} attributes\n\t * @return {Entity}\n\t */\n\tcreateChild(prefabId:string|Object, attributes:?Object):Entity {\n\t\tif (typeof prefabId == 'string') {\n\t\t\tif (Prefab == null) { // Interdependent modules :(\n\t\t\t\tPrefab = require('./prefab');\n\t\t\t}\n\t\t\treturn Prefab.create(prefabId, this, attributes);\n\t\t}\n\t\treturn Entity.create(this, prefabId);\n\t}\n\n\t/**\n\t * Match Entity against a list of {@link Component} types.\n\t * @param {Array|String} selector {@link Component} type(s)\n\t * @return {Boolean}\n\t */\n\thas(selector:string|Array<string>):boolean {\n\t\tvar components = this.components;\n\t\tif (Array.isArray(selector)) {\n\t\t\tfor (var i = 0, l = selector.length; i < l; i++) {\n\t\t\t\tif (components[selector[i]]) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (components[selector] != null) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tget lastChild():?Entity {\n\t\tvar previous = this.firstChild;\n\t\tif (previous != null) {\n\t\t\twhile (previous.next != null) {\n\t\t\t\tprevious = previous.next;\n\t\t\t}\n\t\t}\n\t\treturn previous;\n\t}\n\n\t/**\n\t * Destroy Entity, including children and components.\n\t */\n\tdestroy():void {\n\t\tthis.enabled = false;\n\t\tthis.pool.destroy(this);\n\t\tvar keys = this.componentKeys;\n\t\tfor (var i = 0, l = keys.length; i < l; i++) {\n\t\t\tvar key = keys[i];\n\t\t\tif (this.components[key] != null) {\n\t\t\t\tthis.components[key].destroy();\n\t\t\t}\n\t\t}\n\t\tkeys.length = 0;\n\t\tvar child = this.firstChild;\n\t\twhile (child) {\n\t\t\tchild.destroy();\n\t\t\tchild = child.next;\n\t\t}\n\t}\n\n\tremoveChild(needle:Entity):boolean {\n\t\tvar child = this.firstChild;\n\t\tvar prev = null;\n\t\twhile (child) {\n\t\t\tif (child == needle) {\n\t\t\t\tif (prev == null) {\n\t\t\t\t\tthis.firstChild = child.next;\n\t\t\t\t} else {\n\t\t\t\t\tprev.next = child.next;\n\t\t\t\t}\n\t\t\t\tchild.next = null;\n\t\t\t\tchild.parent = null;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tprev = child;\n\t\t\tchild = child.next;\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * Free destroyed Entity.\n\t * @private\n\t */\n\tsuperFree():void {\n\t\t// Remove referenced subscribers\n\t\tvar refs = this.eventRefs;\n\t\tfor (var i = 0, l = refs.length; i < l; i++) {\n\t\t\trefs[i].off(this);\n\t\t}\n\t\trefs.length = 0;\n\t\t// Remove own subscribers\n\t\tvar events = this.events;\n\t\tfor (var event in events) {\n\t\t\tevents[event].length = 0;\n\t\t}\n\n\t\t// Eager deallocate\n\t\tvar child = this.firstChild;\n\t\tthis.firstChild = null;\n\t\tvar next = null;\n\t\twhile (child != null) {\n\t\t\tnext = child.next;\n\t\t\tchild.next = null;\n\t\t\tchild = next;\n\t\t}\n\n\t\tvar parent = this.parent;\n\t\tif (parent != null) {\n\t\t\tparent.removeChild(this);\n\t\t}\n\t\tthis.allocated = false;\n\t\tthis.root = null;\n\t\tthis.parent = null;\n\t}\n\n\tenable(state:?boolean, deep:?boolean):void {\n\t\tif (state == null) {\n\t\t\tstate = !this.enabled;\n\t\t}\n\t\tthis.emit((state ? 'onEnable' : 'onDisable'), this);\n\t\tthis.enabled = state;\n\t\tvar keys = this.componentKeys;\n\t\tfor (var i = 0, l = keys.length; i < l; i++) {\n\t\t\tvar key = keys[i];\n\t\t\tif (this.components[key] != null) {\n\t\t\t\tthis.components[key].enable(state, true);\n\t\t\t}\n\t\t}\n\t\tif (deep) {\n\t\t\tvar child = this.firstChild;\n\t\t\twhile (child != null) {\n\t\t\t\tchild.enable(state, true);\n\t\t\t\tchild = child.next;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Has subscriber\n\t * @param {String} event Event name to eventscribe to 'on*'\n\t */\n\thasEvent(name:string):boolean {\n\t\tvar events = this.events[name];\n\t\treturn events && events.length > 0;\n\t}\n\n\t/**\n\t * Subscribe to event messages\n\t * @param {Entity|null} scope Target Entity for eventscription\n\t * @param {String} name Event name to eventscribe to 'on*'\n\t * @param {String} method (optional) Local method name to call, defaults to event name\n\t */\n\ton(scope:?Entity, name:string, method?:string):void {\n\t\tif (scope == null) {\n\t\t\tscope = this;\n\t\t}\n\t\tvar events = this.events;\n\t\tvar items = (events[name] || (events[name] = []));\n\t\titems.push(scope, method);\n\t\tif (scope != this) {\n\t\t\tscope.eventRefs.push(this);\n\t\t}\n\t}\n\n\t/**\n\t * Publish a event message only for this entity\n\t * @param {String} event\n\t * @param {Object|null} payload Argument(s)\n\t */\n\temit(name:string, payload:any):void {\n\t\tvar items = this.events[name];\n\t\tif (items != null) {\n\t\t\tvar i = items.length;\n\t\t\twhile ((i -= 2) >= 0) {\n\t\t\t\tif (items[i] != null && items[i].enabled) {\n\t\t\t\t\titems[i][items[i + 1] || name](payload);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Publish a event message for this entity and it's parents\n\t * @param {String} event\n\t * @param {Object|null} payload Argument(s)\n\t */\n\temitUp(name:string, payload:any):void {\n\t\tvar entity = this;\n\t\tdo {\n\t\t\tif (entity.enabled) {\n\t\t\t\tentity.emit(name, payload);\n\t\t\t}\n\t\t\tentity = entity.parent;\n\t\t} while (entity);\n\t}\n\n\t/**\n\t * Publish a event message for all subscribed entities\n\t * @param {String} name\n\t * @param {Object|null} payload Argument(s)\n\t */\n\temitAll(name:string, payload:any):void {\n\t\tPool.call(name, payload);\n\t}\n\n\t/**\n\t * Unsubscribe scope from event\n\t * @param {Entity|Component} unscope (optional) Subscriber scope to remove\n\t * @param {String|null} needle (optional) Event to remove\n\t */\n\toff(unscope:?Entity, needle?:string):void {\n\t\tvar events = this.events;\n\t\tvar i = 0;\n\t\tfor (var name in events) {\n\t\t\tif (needle != null && needle === name) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar items = events[name];\n\t\t\tif (items == null || !(i = items.length)) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvar length = i / 2;\n\t\t\twhile ((i -= 2) >= 0) {\n\t\t\t\tif (items[i] != null && (!unscope || unscope === items[i])) {\n\t\t\t\t\titems[i] = null;\n\t\t\t\t\tlength--;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (length === 0) {\n\t\t\t\titems.length = 0;\n\t\t\t}\n\t\t}\n\t}\n\n\n}\n\nEntity.create = function(parent:Entity, attributes) {\n\treturn Entity.pool.allocate(parent, attributes);\n};\n\nEntity.prototype.pool = new Pool(Entity);\n\nmodule.exports = Entity;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/entity.js\n **/","'use strict';\n\nvar Component = require('./component');\nvar Pool = require('./pool');\nvar Vec2 = require('../math/vec2');\nvar Engine = require('./engine');\n\n/**\n * @class Input\n * Input handling for mouse, touch, keyboard and hardware sensors\n *\n * @extends Component\n */\nfunction Input() {\n  Component.call(this);\n  this.queue = [];\n  this.locks = {};\n  this.position = Vec2();\n  this.lastPos = Vec2();\n  this.touchState = '';\n  this.axis = Vec2();\n  this.mouseAxis = Vec2();\n  this.orientation = Vec2();\n  this.lastOrientation = Vec2();\n  this.baseOrientation = Vec2();\n\n  this.map = {\n    32: 'space',\n    192: 'debug',\n    38: 'up',\n    87: 'up',\n    39: 'right',\n    68: 'right',\n    40: 'bottom',\n    83: 'bottom',\n    37: 'left',\n    65: 'left',\n    219: 'squareLeft',\n    221: 'squareRight'\n  };\n  this.axisMap = {\n    left: Vec2(0, -1),\n    right: Vec2(0, 1),\n    up: Vec2(1, -1),\n    bottom: Vec2(1, 1)\n  };\n\n  this.keyNames = [];\n  this.keys = {};\n\n  var map = this.map;\n  for (var code in map) {\n    var key = map[code];\n    if (!~this.keyNames.indexOf(key)) {\n      this.keyNames.push(key);\n      this.keys[key] = null;\n    }\n  }\n\n  this.throttled = {\n    mousemove: true,\n    deviceorientation: true\n  };\n\n  this.lastEvent = '';\n  this.attached = false;\n\n  this.events = this.support.touch ? {\n    touchstart: 'startTouch',\n    touchmove: 'moveTouch',\n    touchend: 'endTouch',\n    touchcancel: 'endTouch'\n  } : {\n    mousedown: 'startTouch',\n    mousemove: 'moveTouch',\n    mouseup: 'endTouch',\n    keydown: 'keyStart',\n    keyup: 'keyEnd'\n  };\n\n  this.events.blur = 'blur';\n  this.events.deviceorientation = 'deviceOrientation';\n}\n\nInput.prototype = Object.create(Component.prototype);\n\nInput.prototype.type = 'input';\n\nInput.prototype.attach = function() {\n  if (this.attached) {\n    return;\n  }\n  this.attached = true;\n  for (var type in this.events) {\n    window.addEventListener(type, this, false);\n  }\n  this.queue.length = 0;\n};\n\nInput.prototype.detach = function() {\n  if (!this.attached) {\n    return;\n  }\n  this.attached = false;\n  for (var type in this.events) {\n    window.removeEventListener(type, this, false);\n  }\n};\n\nInput.prototype.support = {\n  touch: 'ontouchstart' in window,\n  orientation: 'ondeviceorientation' in window\n};\n\nInput.prototype.handleEvent = function(event) {\n  if (event.metaKey) {\n    return;\n  }\n  // event.preventDefault();\n  var type = event.type;\n  if (this.throttled[type] && this.lastEvent == type) {\n    this.queue[this.queue.length - 1] = event;\n    return;\n  }\n  this.lastEvent = type;\n  this.queue.push(event);\n};\n\nInput.prototype.keyStart = function(event) {\n  var key = this.map[event.keyCode];\n  if (key && !this.keys[key]) {\n    if (!this.lock('key-' + key)) {\n      return false;\n    }\n    this.keys[key] = 'began';\n    this.updateAxis(key);\n    Engine.emit('onKeyBegan', key);\n  }\n};\n\nInput.prototype.keyEnd = function(event) {\n  var key = this.map[event.keyCode];\n  if (key) {\n    if (!this.lock('key-' + key)) {\n      return false;\n    }\n    this.keys[key] = 'ended';\n    this.updateAxis(key, true);\n    Engine.emit('onKeyEnded', key);\n  }\n};\n\nInput.prototype.startTouch = function(event) {\n  if (!this.lock('touch')) {\n    return false;\n  }\n  this.resolve(event);\n  if (!this.touchState && !event.metaKey) {\n    this.touchState = 'began';\n    Engine.emit('onTouchBegan');\n  }\n};\n\nInput.prototype.moveTouch = function(event) {\n  var state = this.touchState;\n  if ((state === 'began' || state === 'ended') && !this.lock('touch')) {\n    return false;\n  }\n  this.resolve(event);\n  if (state && state !== 'ended' && state !== 'moved') {\n    this.touchState = 'moved';\n  }\n};\n\nInput.prototype.endTouch = function(event) {\n  if (!this.lock('touch')) {\n    return false;\n  }\n  this.resolve(event);\n  if (this.touchState && (!this.support.touch || !event.targetTouches.length)) {\n    Engine.emit('onTouchEnded');\n    this.touchState = 'ended';\n  }\n};\n\nInput.prototype.updateAxis = function(key, ended) {\n  var axis = this.axisMap[key];\n  if (axis) {\n    if (ended) {\n      this.axis[axis[0]] -= axis[1];\n    } else {\n      this.axis[axis[0]] += axis[1];\n    }\n  }\n};\n\nInput.prototype.blur = function() {\n  if (this.touchState && this.touchState !== 'ended') {\n    this.touchState = 'ended';\n  }\n  var keys = this.keys;\n  var names = this.keyNames;\n  for (var i = 0, l = names.length; i < l; i++) {\n    var key = names[i];\n    if (keys[key] && keys[key] !== 'ended') {\n      keys[key] = 'ended';\n      this.updateAxis(key, true);\n    }\n  }\n};\n\nInput.prototype.calibrateOrientation = function() {\n  this.baseOrientationTime = this.orientationTime;\n  Vec2.copy(this.baseOrientation, this.orientation);\n  Vec2.set(this.orientation);\n};\n\nInput.prototype.deviceOrientation = function(event) {\n  Vec2.copy(this.lastOrientation, this.orientation);\n  Vec2.sub(Vec2.set(this.orientation, event.gamma | 0, event.beta | 0), this.baseOrientation);\n  this.orientationTime = event.timeStamp / 1000;\n  if (!this.baseOrientationTime) {\n    this.calibrateOrientation();\n  }\n};\n\nInput.prototype.resolve = function(event) {\n  var coords = this.support.touch ? event.targetTouches[0] : event;\n  if (coords) {\n    this.lastTime = this.time;\n    this.time = event.timeStamp / 1000;\n    Vec2.copy(this.lastPos, this.position);\n    var renderer = Engine.renderer;\n    Vec2.set(this.position, (coords.pageX - renderer.margin[0]) / renderer.scale | 0, (coords.pageY - renderer.margin[1]) / renderer.scale | 0);\n  }\n};\n\nInput.prototype.lock = function(key) {\n  if (this.locks[key] === this.frame) {\n    return false;\n  }\n  this.locks[key] = this.frame;\n  return true;\n};\n\nInput.prototype.postUpdate = function() {\n  switch (this.touchState) {\n    case 'began':\n      this.touchState = 'stationary';\n      break;\n    case 'ended':\n      this.touchState = null;\n      break;\n  }\n\n  var keys = this.keys;\n  var names = this.keyNames;\n  for (var i = 0, l = names.length; i < l; i++) {\n    var key = names[i];\n    switch (keys[key]) {\n      case 'began':\n        keys[key] = 'pressed';\n        break;\n      case 'ended':\n        keys[key] = null;\n        break;\n    }\n  }\n\n  this.frame = Engine.frame;\n\n  var event = null;\n  var queue = this.queue;\n  while ((event = queue[0])) {\n    var type = event.type;\n    if (this[this.events[type] || type](event) != null) {\n      break;\n    }\n    queue.shift();\n  }\n  if (!queue.length) {\n    this.lastEvent = '';\n  }\n};\n\nInput.prototype.onEnginePause = function() {\n  this.detach();\n};\n\nInput.prototype.onEngineStart = function() {\n  this.attach();\n};\n\nInput.prototype.pool = new Pool(Input);\n\nmodule.exports = Input;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/input.js\n **/","'use strict';\n\nvar Component = require('./component');\nvar Pool = require('./pool');\nvar Vec2 = require('../math/vec2');\nvar Random = require('../math/random');\n\nfunction Jitter() {\n  Component.call(this);\n  this.factor = 0.0;\n  this.force = 0.0;\n}\n\nJitter.prototype = Object.create(Component.prototype);\n\nJitter.prototype.type = 'jitter';\n\nJitter.prototype.attributes = {\n  factor: 0.1,\n  force: 250\n};\n\nvar force = Vec2();\n\nJitter.prototype.fixedUpdate = function(dt) {\n  if (Random.chance(this.factor)) {\n    Vec2.variant(Vec2.zero, this.force, force);\n    this.components.kinetic.applyForce(force);\n  }\n};\n\nJitter.prototype.pool = new Pool(Jitter);\n\nmodule.exports = Jitter;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/jitter.js\n **/","/** @flow weak */\n/**\n * @module core/kinetic\n */\n\nvar Component = require('./component');\nvar Pool = require('./pool');\nvar Mathf = require('../math/mathf');\nvar Vec2 = require('../math/vec2');\n\n/**\n * @class Kinetic\n * Velocity integrator\n *\n * Related links:\n * http://hg.positiontspectacular.com/toxiclibs/src/689ddcd9bea3/src.physics/toxi/physics2d\n * @extends Component\n */\nfunction Kinetic() {\n\tComponent.call(this);\n\tthis.mass = 0.0;\n\tthis.drag = 0.0;\n\tthis.friction = 0.0;\n\tthis.fixed = false;\n\tthis.maxVelocity = 0.0;\n\tthis.maxForce = 0.0;\n\tthis.minVelocity = 0.0;\n\tthis.angularVelocity = 0.0;\n\tthis.torque = 0.0;\n\tthis.continuousTorque = 0.0;\n\tthis.angularDrag = 0.0;\n\tthis.angularFriction = 0.0;\n\tthis.angularFixed = false;\n\tthis.maxAngularVelocity = 0.0;\n\tthis.maxAngularForce = 0.0;\n\tthis.minAngularVelocity = 0.0;\n\tthis.fast = false;\n\n\tthis._velocity = Vec2();\n\tthis._force = Vec2();\n\tthis._continuousForce = Vec2();\n\tthis.sleeping = false;\n}\n\nKinetic.gravity = Vec2();\n\nKinetic.prototype = {\n\tattributes: {\n\t\tmass: 1.0,\n\t\tvelocity: Vec2(),\n\t\tforce: Vec2(),\n\t\tcontinuousForce: Vec2(),\n\t\tdrag: 0.999,\n\t\tfriction: 15.0,\n\t\tfixed: false,\n\t\tmaxVelocity: 75.0,\n\t\tmaxForce: 2000.0,\n\t\tminVelocity: 1.0,\n\t\tangularVelocity: 0.0,\n\t\ttorque: 0.0,\n\t\tcontinuousTorque: 0.0,\n\t\tangularDrag: 0.999,\n\t\tangularFriction: 1.0,\n\t\tangularFixed: false,\n\t\tmaxAngularVelocity: 0.0,\n\t\tmaxAngularForce: 0.0,\n\t\tminAngularVelocity: Mathf.TAU / 360,\n\t\tfast: false\n\t},\n\n\tcreate: function() {\n\t\tthis.sleeping = false;\n\t},\n\n\tget direction() {\n\t\treturn Vec2.rad(this._velocity);\n\t},\n\n\tset direction(rad) {\n\t\tVec2.rotateTo(this._velocity, rad);\n\t},\n\n\tget speed() {\n\t\treturn Vec2.len(this._velocity);\n\t},\n\n\tset speed(length) {\n\t\tVec2.norm(this._velocity, null, length);\n\t},\n\n\tapplyForce: function(impulse, ignoreMass, continues) {\n\t\tVec2.add(\n\t\t\t(continues) ? this._continuousForce : this._force, (!ignoreMass && this.mass !== 1) ?\n\t\t\tVec2.scale(impulse, 1 / (this.mass || 1), cache) :\n\t\t\timpulse\n\t\t);\n\t},\n\n\tapplyTorque: function(impulse, ignoreMass, continues) {\n\t\tVec2.add(\n\t\t\t(continues) ? this._continuousForce : this._force, (!ignoreMass && this.mass !== 1) ?\n\t\t\tVec2.scale(impulse, 1 / (this.mass || 1), cache) :\n\t\t\timpulse\n\t\t);\n\t}\n};\n\nVec2.defineProperty(Kinetic, 'velocity');\nVec2.defineProperty(Kinetic, 'force');\nVec2.defineProperty(Kinetic, 'continuousForce');\n\nvar velocity = Vec2();\nvar force = Vec2();\nvar velocityCache = Vec2();\nvar forceCache = Vec2();\nvar cache = Vec2();\n\nKinetic.simulate = function(dt) {\n\tvar dtSq = dt * dt;\n\tvar kinetics = this.pool.heap;\n\tfor (var i = 0, l = kinetics.length; i < l; i++) {\n\t\tvar kinetic = kinetics[i];\n\t\tif (!kinetic.enabled || kinetic.fixed) {\n\t\t\tcontinue;\n\t\t}\n\t\tvar transform = kinetic.components.transform;\n\t\tVec2.copy(velocity, kinetic._velocity);\n\t\tVec2.add(kinetic._force, kinetic._continuousForce, force);\n\n\t\t// Fast path (no mass)\n\t\tif (kinetic.fast) {\n\t\t\tif (kinetic.maxForce > 0) {\n\t\t\t\tVec2.limit(force, kinetic.maxForce);\n\t\t\t}\n\t\t\tVec2.add(velocity, Vec2.scale(force, dt));\n\t\t\tif (kinetic.maxVelocity > 0) {\n\t\t\t\tVec2.limit(velocity, kinetic.maxVelocity);\n\t\t\t}\n\t\t\tkinetic.force = Vec2.zero;\n\t\t\tkinetic.velocity = velocity;\n\t\t\ttransform.translateBy(Vec2.scale(velocity, dt));\n\t\t\tcontinue;\n\t\t}\n\n\t\t// Apply scene gravity\n\t\tvar gravity = kinetic.root.gravity || Kinetic.gravity;\n\t\tif (Vec2.lenSq(gravity) > 0 && kinetic.mass > Mathf.EPSILON) {\n\t\t\tVec2.add(\n\t\t\t\tforce, (kinetic.mass !== 1) ?\n\t\t\t\tVec2.scale(gravity, 1 / kinetic.mass, cache) :\n\t\t\t\tgravity\n\t\t\t);\n\t\t}\n\n\t\t// Apply friction\n\t\tif (kinetic.friction > 0) {\n\t\t\tVec2.add(\n\t\t\t\tforce,\n\t\t\t\tVec2.scale(\n\t\t\t\t\tVec2.norm(velocity, cache), -kinetic.friction\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\n\t\tif (kinetic.maxForce > 0) {\n\t\t\tVec2.limit(force, kinetic.maxForce);\n\t\t}\n\n\t\t/*\n\t\t// http://www.compsoc.man.ac.uk/~lucky/Democritus/Theory/verlet.html#velver\n\t\t// http://en.wikipedia.org/wiki/Verlet_integration#Velocity_Verlet\n\t\tvar lastForce = Vec2.scale(kinetic.lastForce, dt / 2);\n\t\t*/\n\n\t\tVec2.add(\n\t\t\tVec2.add(\n\t\t\t\ttransform.position,\n\t\t\t\tVec2.scale(velocity, dt, velocityCache)\n\t\t\t),\n\t\t\tVec2.scale(force, 0.5 * dtSq, forceCache)\n\t\t);\n\t\t// transform.markDirty();\n\n\t\tVec2.add(\n\t\t\tvelocity,\n\t\t\tVec2.scale(force, dt, forceCache)\n\t\t);\n\n\t\t// Apply drag\n\t\tif (kinetic.drag < 1) {\n\t\t\tVec2.scale(velocity, kinetic.drag);\n\t\t}\n\n\t\t// Limit velocity\n\t\tif (kinetic.maxVelocity > 0) {\n\t\t\tVec2.limit(velocity, kinetic.maxVelocity);\n\t\t}\n\n\t\tvar minVelocity = kinetic.minVelocity;\n\t\tif (minVelocity > 0) {\n\t\t\tif (Vec2.lenSq(velocity) <= minVelocity * minVelocity) {\n\t\t\t\tif (!kinetic.sleeping) {\n\t\t\t\t\tVec2.set(velocity);\n\t\t\t\t\tkinetic.sleeping = true;\n\t\t\t\t\tkinetic.entity.emitUp('onKineticSleep', kinetic);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (kinetic.sleeping) {\n\t\t\t\t\tkinetic.sleeping = false;\n\t\t\t\t\tkinetic.entity.emitUp('onKineticWake', kinetic);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Reset force\n\t\tkinetic.force = Vec2.zero;\n\t\tkinetic.velocity = velocity;\n\t}\n};\n\nComponent.create(Kinetic, 'kinetic');\n\nmodule.exports = Kinetic;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/kinetic.js\n **/","'use strict';\n\nvar Entity = require('./entity');\nvar Prefab = require('./prefab');\nvar Component = require('./component');\nvar Pool = require('./pool');\nvar Engine = require('./engine');\nvar Mathf = require('../math/mathf');\nvar Vec2 = require('../math/vec2');\nvar Random = require('../math/random');\nvar Tweens = require('../math/tweens');\nvar Color = require('./color');\nvar Sprite = require('./sprite');\nrequire('./transform');\nrequire('./kinetic');\n\nfunction Particle() {\n  Component.call(this);\n  this.lifetime = 0.0;\n  this.lifetimeVariant = 0.0;\n  this.radius = 0.0;\n  this.radiusVariant = 0.0;\n  this.alphaVariant = 0.0;\n  this.shrink = Tweens.linear;\n  this.fade = Tweens.linear;\n  this.age = 0.0;\n}\n\nParticle.prototype = {\n  attributes: {\n    lifetime: 1,\n    lifetimeVariant: 1,\n    radius: 1,\n    radiusVariant: 0,\n    alphaVariant: 0,\n    shrink: Tweens.quintIn,\n    fade: Tweens.quintIn\n  },\n\n  create: function(attributes) {\n    var variant = this.lifetimeVariant;\n    if (variant > 0) {\n      this.lifetime += Random.rand(-variant, variant);\n    }\n    variant = this.radiusVariant;\n    if (variant > 0) {\n      this.radius += Random.rand(-variant, variant);\n    }\n    variant = this.alphaVariant;\n    if (variant > 0) {\n      var transform = this.components.transform;\n      transform.alpha = Mathf.clamp(\n        transform.alpha + Random.rand(-variant, variant), 0, 1\n      );\n    }\n    this.age = 0;\n  },\n\n  update: function(dt) {\n    this.age += dt;\n    var age = this.age;\n    var lifetime = this.lifetime;\n    if (age > lifetime) {\n      this.entity.destroy();\n      return;\n    }\n    if (this.shrink) {\n      this.radius *= 1 - this.shrink(age / lifetime);\n      if (this.radius < 1) {\n        this.entity.destroy();\n        return;\n      }\n    }\n    if (this.fade) {\n      var transform = this.components.transform;\n      transform.alpha *= 1 - this.fade(age / lifetime);\n      if (transform.alpha <= 0.02) {\n        this.entity.destroy();\n        return;\n      }\n    }\n    this.components.spriteTween.frame = this.radius - 1 | 0;\n  }\n};\n\nParticle.generateSpriteAsset = function(attributes) {\n  attributes = attributes || {};\n  var color = Color(attributes.color || Color.gray);\n  var alpha = attributes.alpha || 1;\n  var max = attributes.max = attributes.max || 25;\n  var size = max * 2;\n  var center = attributes.center || 0.5;\n  var shape = attributes.shape || 'circle';\n\n  return new Sprite.Asset(function(ctx) {\n    for (var radius = 1; radius <= max; radius++) {\n      var top = max + size * (radius - 1);\n\n      if (center < 1) {\n        var grad = ctx.createRadialGradient(max, top, 0, max, top, radius);\n        color[3] = alpha;\n        grad.addColorStop(0, Color.rgba(color));\n        if (center != 0.5) {\n          color[3] = alpha / 2;\n          grad.addColorStop(center, Color.rgba(color));\n        }\n        color[3] = 0;\n        grad.addColorStop(1, Color.rgba(color));\n        ctx.fillStyle = grad;\n      } else {\n        ctx.fillStyle = Color.rgba(color);\n      }\n\n      if (shape == 'rect') {\n        ctx.fillRect(max - radius / 2 | 0, top - radius / 2, radius, radius);\n      } else {\n        ctx.beginPath();\n        ctx.arc(max, top, radius, 0, Mathf.TAU, true);\n        ctx.closePath();\n        ctx.fill();\n      }\n    }\n  }, Vec2(size, size * max));\n};\n\nParticle.generateSpriteSheet = function(attributes) {\n  attributes = attributes || {};\n  var sprite = Particle.generateSpriteAsset(attributes);\n  var size = attributes.max * 2;\n  return new Sprite.Sheet({\n    size: Vec2(size, size),\n    sprites: sprite\n  });\n};\n\nParticle.defaultSpriteSheet = Particle.generateSpriteSheet();\n\nComponent.create(Particle, 'particle');\n\nParticle.Prefab = new Prefab('particle', {\n  transform: null,\n  kinetic: {\n    mass: 0,\n    fast: true\n  },\n  particle: null,\n  spriteTween: {\n    asset: Particle.defaultSpriteSheet\n  }\n});\n\nmodule.exports = Particle;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/particle.js\n **/","/* @flow weak */\n\nvar Mathf = require('../math/mathf');\nrequire('../core/shims');\n\ntype BasePoolable = {\n\tpool: Pool;\n\tenabled: boolean;\n\tuid: number;\n\tallocated: boolean;\n\tallocate: (attributes:?Object) => void;\n\tsuperFree: () => void;\n\tparent: any;\n\troot: any;\n\ttype: string;\n\tlayer: number;\n};\n\ntype ComponentLike = any; // BasePoolable & {\n// \tattributes: ?Object;\n// } & {[key:string]: (payload:any) => void};\n\ntype EntityLike = any; // BasePoolable & {\n// \ton: (scope:?Entity, name:string, method:?string) => void;\n// }\n\ntype Poolable = BasePoolable; // EntityLike | ComponentLike;\n\n/**\n * Pool\n * @class\n * @param {Object} cls Class to pool\n */\nclass Pool {\n\tcls: any;\n\theap: Array<any>;\n\tenabled: boolean;\n\tallocated: number;\n\ttype: string;\n\tlayer: number;\n\tevents: Array<string>;\n\tcalls: Array<string>;\n\tattributes: Object;\n\tattributeKeys: Array<string>;\n\tisComponent: boolean;\n\n\tconstructor(cls:any) {\n\t\tthis.cls = cls;\n\t\tcls.pool = this;\n\t\tcls.enabled = false;\n\t\tvar proto = cls.prototype;\n\t\tproto.pool = this;\n\t\tthis.heap = [];\n\t\tthis.enabled = false;\n\t\tthis.allocated = 0;\n\t\tvar type = proto.type;\n\t\tthis.type = type;\n\t\tif (Pool.byType[type] != null) {\n\t\t\tconsole.warn('Pool \"%s\" was overridden with ', type, cls);\n\t\t}\n\t\tPool.byType[type] = this;\n\n\t\tthis.layer = 0.0;\n\t\tthis.events = [];\n\t\tthis.calls = [];\n\t\tthis.attributes = {};\n\t\tthis.attributeKeys = [];\n\n\t\tthis.isComponent = (type != 'entity');\n\t\tif (this.isComponent) {\n\t\t\tvar attributes = proto.attributes;\n\t\t\tif (attributes != null) {\n\t\t\t\tthis.attributes = attributes;\n\t\t\t\tthis.attributeKeys = Object.keys(attributes);\n\t\t\t}\n\t\t\tvar types = Pool.typedCalls;\n\t\t\tvar keys = Object.keys(proto).concat(Object.keys(cls));\n\t\t\tvar fn = '';\n\t\t\tfor (var i = 0, l = keys.length; i < l; i++) {\n\t\t\t\tfn = keys[i];\n\t\t\t\tif (callRegex.test(fn)) {\n\t\t\t\t\tif (!~types.indexOf(fn)) {\n\t\t\t\t\t\ttypes.push(fn);\n\t\t\t\t\t\tPool.calls[fn] = [];\n\t\t\t\t\t}\n\t\t\t\t\tthis.events.push(fn);\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (i = 0, l = types.length; i < l; i++) {\n\t\t\t\tfn = types[i];\n\t\t\t\tif (cls[fn] != null) {\n\t\t\t\t\tPool.calls[fn].push(cls);\n\t\t\t\t} else if (proto[fn] != null) {\n\t\t\t\t\tthis.calls.push(fn);\n\t\t\t\t}\n\t\t\t}\n\t\t\tComponentMap.prototype[type] = null;\n\t\t}\n\t}\n\n\t/**\n\t * Brief summary.\n\t *\n\t * @return {String}\n\t */\n\ttoString():string {\n\t\treturn 'Pool ' + this.type +\n\t\t\t' [' + this.allocated + '/' + this.heap.length + ']';\n\t}\n\n\tpushInstance():any {\n\t\tvar entity = new this.cls();\n\t\tthis.heap.push(entity);\n\t\t// Register entity callbacks\n\t\tvar calls = this.calls;\n\t\tfor (var i = 0, l = calls.length; i < l; i++) {\n\t\t\tPool.calls[calls[i]].push(entity);\n\t\t}\n\t\treturn entity;\n\t}\n\n\tpopInstance():any {\n\t\tvar heap = this.heap;\n\t\tvar l = heap.length;\n\t\tif (this.allocated == l) {\n\t\t\treturn this.pushInstance();\n\t\t}\n\t\tfor (var i = 0; i < l; i++) {\n\t\t\tif (!heap[i].allocated) {\n\t\t\t\treturn heap[i];\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Allocate a new instance from free pool or by creating. The provided attributes are merged with the default attributes.\n\t * @param {Entity} parent (optional) Parent class\n\t * @param {Object} attributes (optional) Attributes object\n\t * @return {Object}\n\t */\n\tallocate(parent:EntityLike, attributes:?Object):any {\n\t\t// Get free or create new entity\n\t\tvar entity = this.popInstance();\n\t\tthis.allocated++;\n\t\tthis.enabled = true;\n\t\tthis.cls.enabled = true;\n\t\tvar uid = Mathf.uid();\n\t\tentity.uid = uid;\n\t\tentity.enabled = true;\n\t\tentity.allocated = true;\n\t\tentity.parent = parent;\n\t\tentity.root = (parent != null) ? (parent.root || parent) : null;\n\t\t// Set layer, combined from parent layer, pool layer and uid\n\t\tentity.layer = ((parent != null) ? parent.layer : 0) + this.layer + 2 - 1 / uid;\n\n\t\tif (this.isComponent) {\n\t\t\tvar i = 0;\n\t\t\tvar defaults = this.attributes;\n\t\t\tvar keys = this.attributeKeys;\n\t\t\tvar l = keys.length;\n\t\t\tif (l > 0) {\n\t\t\t\tif (attributes == null) {\n\t\t\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\t\t\tentity[keys[i]] = defaults[keys[i]];\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tfor (i = 0; i < l; i++) {\n\t\t\t\t\t\tvar key = keys[i];\n\t\t\t\t\t\tif (Pool.verbose) {\n\t\t\t\t\t\t\tif (this.allocated == 1 && !(key in entity)) {\n\t\t\t\t\t\t\t\tconsole.warn('Component \"%s\" did not pre-allocate have attribute \"%s\"', this.type, key);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tentity[key] = (attributes[key] !== undefined) ? attributes[key] :\n\t\t\t\t\t\t\tdefaults[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Add events\n\t\t\tvar events = this.events;\n\t\t\tfor (i = 0, l = events.length; i < l; i++) {\n\t\t\t\tparent.on(entity, events[i], events[i]);\n\t\t\t}\n\t\t}\n\t\tif (entity.allocate != null) {\n\t\t\tentity.allocate(attributes);\n\t\t}\n\t\treturn entity;\n\t}\n\n\t/**\n\t * Destroy given instance.\n\t * @param {Object} entity Pooled object\n\t */\n\tdestroy(entity:Poolable) {\n\t\tPool.calls.free.push(entity);\n\t}\n\n\t/**\n\t * Free destroyed object.\n\t * @param {Object} entity Pooled object\n\t */\n\tfree(entity:Poolable) {\n\t\tvar allocated = this.allocated--;\n\t\tthis.enabled = !!allocated;\n\t\tthis.cls.enabled = !!allocated;\n\t}\n\n\t/**\n\t * Invoke method on all enabled pooled object instances.\n\t * @param {String} fn Method name\n\t * @param {Mixed} payload (optional) Argument(s)\n\t */\n\tcall(fn:string, payload?:any) {\n\t\tvar heap = this.heap;\n\t\tvar i = this.heap.length;\n\t\twhile (i--) {\n\t\t\tif (heap[i].enabled) {\n\t\t\t\theap[i][fn](payload);\n\t\t\t}\n\t\t}\n\t}\n}\n\nPool.verbose = false;\n\nPool.calls = {};\nPool.typedCalls = [\n\t'fixedUpdate',\n\t'simulate',\n\t'update',\n\t'postUpdate',\n\t'preRender',\n\t'render'\n];\nvar callRegex = /^on[A-Z]/;\n\n// Create call array\nPool.reset = function() {\n\tPool.calls = {\n\t\tfree: []\n\t};\n\tfor (var i = 0, l = Pool.typedCalls.length; i < l; i++) {\n\t\tPool.calls[Pool.typedCalls[i]] = [];\n\t}\n\tPool.byType = {};\n};\n\nPool.reset();\n\n/**\n * Dump debugging details and optionally flush freed objects.\n *\n * @param {Boolean} flush (optional) Flush after debug.\n */\nPool.dump = function(flush) {\n\tvar byType = Pool.byType;\n\tfor (var type in byType) {\n\t\tvar pool = byType[type];\n\t\tconsole.log('%s: %d/%d in use', type, pool.allocated, pool.heap.length);\n\t}\n\tif (flush) {\n\t\tPool.flush();\n\t}\n};\n\nPool.free = function() {\n\tvar calls = this.calls.free;\n\tfor (var i = 0, l = calls.length; i < l; i++) {\n\t\tcalls[i].superFree();\n\t\tcalls[i].pool.free();\n\t}\n\tcalls.length = 0;\n};\n\nPool.flush = function() {\n\tvar byType = Pool.byType;\n\tfor (var type in byType) {\n\t\tvar collected = 0;\n\t\tvar heap = byType[type].heap;\n\t\tvar i = heap.length;\n\t\twhile (i--) {\n\t\t\tif (heap[i].allocated) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\theap.splice(i, 1);\n\t\t\tcollected++;\n\t\t}\n\t\tconsole.log('%s: %d/%d flushed', type, collected, heap.length);\n\t}\n};\n\nPool.call = function(fn, arg) {\n\tvar calls = this.calls[fn];\n\tif (calls == null) {\n\t\treturn;\n\t}\n\tvar i = calls.length;\n\tif (i === 0) {\n\t\treturn;\n\t}\n\twhile (i--) {\n\t\tif (calls[i].enabled) {\n\t\t\t// BAILOUT after callelem\n\t\t\tcalls[i][fn](arg);\n\t\t}\n\t}\n};\n\nclass ComponentMap {}\nPool.ComponentMap = ComponentMap;\n\nmodule.exports = Pool;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/pool.js\n **/","/** @flow */\n\nvar Mathf = require('../math/mathf');\nvar Entity = require('./entity');\n\n/**\n * @class\n * @constructor\n * @param {String} id Prefab Id\n * @param {Object} components Default attributes\n */\nclass Prefab {\n\tid: string;\n\tcomponents: Object;\n\ttypes: Array<string>;\n\tsubKeys: {[key:string]: Array<string>};\n\n\tconstructor(id:string, components:Object) {\n\t\tthis.id = id;\n\t\tPrefab.byId[this.id] = this;\n\t\tthis.components = components;\n\t\tthis.types = [];\n\t\tthis.subKeys = {};\n\t\tfor (var type in components) {\n\t\t\tthis.types.push(type);\n\t\t\tif (components[type] == null) {\n\t\t\t\tcomponents[type] = {};\n\t\t\t}\n\t\t\tthis.subKeys[type] = Object.keys(components[type]);\n\t\t}\n\t}\n\n\t/**\n\t * Allocate {@link Entity} from Prefab\n\t * @param {Entity} parent Parent entity\n\t * @param {Object} components Override prefab components\n\t * @return {Entity}\n\t */\n\tcreate(parent:Entity, components:?Object):Entity {\n\t\tvar entity = Entity.create(parent,\n\t\t\t(components == null) ? this.components : null\n\t\t);\n\t\tentity.prefab = this.id;\n\t\tif (components != null) {\n\t\t\tvar types = this.types;\n\t\t\tvar type = '';\n\t\t\tfor (var i = 0, l = types.length; i < l; i++) {\n\t\t\t\ttype = types[i];\n\t\t\t\tvar defaults = this.components[type];\n\t\t\t\tvar overrides = components[type];\n\t\t\t\tif (overrides != null) {\n\t\t\t\t\tdelete components[type];\n\t\t\t\t\tvar subKeys = this.subKeys[type];\n\t\t\t\t\tvar k = subKeys.length;\n\t\t\t\t\tif (k > 0) {\n\t\t\t\t\t\tfor (var j = 0; j < k; j++) {\n\t\t\t\t\t\t\tvar subKey = subKeys[j];\n\t\t\t\t\t\t\tif (overrides[subKey] === undefined) {\n\t\t\t\t\t\t\t\toverrides[subKey] = defaults[subKey];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\toverrides = defaults;\n\t\t\t\t}\n\t\t\t\tentity.createComponent(type, overrides);\n\t\t\t}\n\t\t\tfor (type in components) {\n\t\t\t\tentity.createComponent(type, components[type]);\n\t\t\t}\n\t\t}\n\t\treturn entity;\n\t}\n\n\t/**\n\t * Brief summary\n\t * @private\n\t * @return {String}\n\t */\n\ttoString():string {\n\t\tvar comps = Object.keys(this.components).join(', ');\n\t\treturn 'Prefab #' + this.id;\n\t}\n};\n\nPrefab.reset = function() {\n\tPrefab.byId = {};\n};\n\nPrefab.reset();\n\n/**\n * Allocate Prefab by Id\n * @static\n * @param {String} id Prefab Id\n * @param {Entity} parent Parent entity\n * @param {Object} components Override components\n * @return {Entity}\n */\nPrefab.create = function(id, parent, components) {\n\tvar prefab = Prefab.byId[id];\n\tif (prefab == null) {\n\t\tthrow new Error('Prefab \"' + id + '\" not found.');\n\t}\n\treturn prefab.create(parent, components);\n};\n\nmodule.exports = Prefab;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/prefab.js\n **/","'use strict';\n\nvar Entity = require('./entity');\nvar Bounds = require('./bounds');\nvar Vec2 = require('../math/vec2');\nvar Color = require('./color');\n\nfunction Renderer(element, size) {\n\tthis.element = element || document.body;\n\tthis.size = Vec2(size);\n\tthis.color = Color.white;\n\tthis.content = Vec2(size);\n\tthis.browser = Vec2();\n\tthis.margin = Vec2();\n\tthis.position = Vec2();\n\tthis.scale = 0;\n\tthis.orientation = 'landscape';\n\n\tthis.canvas = document.createElement('canvas');\n\tif (this.color != null) {\n\t\tthis.canvas.mozOpaque = true;\n\t}\n\tthis.ctx = this.canvas.getContext('2d');\n\n\t// var deviceRatio = window.devicePixelRatio || 1;\n\t// var backingStoreRatio = this.ctx.backingStorePixelRatio ||\n\t// \tthis.ctx.webkitBackingStorePixelRatio ||\n\t// \tthis.ctx.mozBackingStorePixelRatio || 1;\n\t// this.ratio = deviceRatio / backingStoreRatio;\n\tthis.ratio = 1;\n\n\t// var oldSave = this.ctx.save;\n\t// var oldRestore = this.ctx.restore;\n\t// this.ctx.save = function() {\n\t// \tthis.saved++;\n\t// \t// console.log('SAVE');\n\t// \t// debugger;\n\t// \toldSave.call(this);\n\t// };\n\t// this.ctx.restore = function() {\n\t// \tthis.saved--;\n\t// \t// console.log('RESTORE');\n\t// \t// debugger;\n\t// \toldRestore.call(this);\n\t// }\n\t// this.ctx.saved = 0;\n\n\tthis.canvas.width = this.content[0] * this.ratio;\n\tthis.canvas.height = this.content[1] * this.ratio;\n\tthis.element.style.width = this.content[0] + 'px';\n\tthis.element.style.height = this.content[1] + 'px';\n\tthis.element.appendChild(this.canvas);\n\n\tvar style = this.element.style;\n\tthis.transformProp = ['transform', 'webkitTransform'].filter(function(key) {\n\t\treturn style[key] != null;\n\t})[0];\n\n\twindow.addEventListener('resize', this, false);\n\tthis.reflow();\n}\n\nRenderer.prototype = {\n\n\thandleEvent: function(evt) {\n\t\tthis.reflow();\n\t},\n\n\treflow: function() {\n\t\tvar browser = this.browser;\n\t\tVec2.set(browser, window.innerWidth, window.innerHeight);\n\t\tvar scale = Math.min(browser[0] / this.content[0],\n\t\t\tbrowser[1] / this.content[1]);\n\t\tif (scale !== this.scale) {\n\t\t\tthis.scale = scale;\n\t\t\tVec2.scale(this.content, this.scale, this.size);\n\t\t}\n\t\tvar offset = Vec2.scale(Vec2.sub(browser, this.size, this.margin), 0.5);\n\t\tthis.element.style[this.transformProp] = 'translate(' + (offset[0] | 0) +\n\t\t\t'px, ' + (offset[1] | 0) + 'px) scale(' + scale + ')';\n\t},\n\n\tsave: function() {\n\t\tvar ctx = this.ctx;\n\t\tthis.ctx.save();\n\t\tif (this.color != null) {\n\t\t\tctx.fillStyle = Color.rgba(this.color);\n\t\t\tctx.fillRect(0, 0, this.content[0], this.content[1]);\n\t\t} else {\n\t\t\tctx.clearRect(0, 0, this.content[0], this.content[1]);\n\t\t}\n\t\tctx.scale(this.ratio, this.ratio);\n\t\treturn ctx;\n\t},\n\n\trestore: function() {\n\t\tthis.ctx.restore();\n\t\t// TODO: Filters?\n\t}\n\n\t// cull: function(entity) {\n\t//   var bounds = entity.bounds;\n\t//   if (!bounds) {\n\t//     return false;\n\t//   }\n\t//   if (bounds.withinRect(this.position, this.content)) {\n\t//     if (bounds.culled) {\n\t//       bounds.culled = false;\n\t//     }\n\t//     return false;\n\t//   }\n\t//   if (!bounds.culled) {\n\t//     bounds.culled = true;\n\t//   }\n\t//   return true;\n\t// },\n\n\t// isFullscreen: function() {\n\t//   var doc = document;\n\t//   return doc.fullscreen || doc.mozFullScreen || doc.webkitIsFullScreen;\n\t// },\n\n\t// requestFullscreen: function() {\n\t//   if (!this.isFullscreen()) {\n\t//     var target = this.element.parentNode;\n\t//     if ('webkitRequestFullScreen' in target) {\n\t//       target.webkitRequestFullScreen();\n\t//     } else if ('mozRequestFullScreen' in target) {\n\t//       target.mozRequestFullScreen();\n\t//     }\n\t//   }\n\t// },\n\n\t// fullscreenChange: function() {\n\t//   if (this.orientation) {\n\t//     this.lockOrientation(this.orientation);\n\t//   }\n\t// },\n\n\t// lockOrientation: function(format) {\n\t//   if (format == null) {\n\t//     format = this.orientation;\n\t//   }\n\t//   var target = window.screen;\n\t//   if ('lockOrientation' in target) {\n\t//     screen.lockOrientation(format);\n\t//   } else if ('mozLockOrientation' in target) {\n\t//     screen.mozLockOrientation(format);\n\t//   }\n\t// }\n\n};\n\nmodule.exports = Renderer;\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/renderer.js\n **/","/* @flow */\n/**\n * @module core/shims\n */\n\nif (typeof window != 'undefined') {\n\t// performance.now\n\tvar perf = window.performance || (window.performance = {});\n\tperf.now = perf.now || perf.webkitNow || perf.msNow || perf.mozNow || Date.now;\n\n\tperf.nextTick = (function() {\n\t\tvar queue = [];\n\t\tfunction nextTick(fn) {\n\t\t\tqueue.push(fn);\n\t\t\twindow.postMessage('nexttick', '*');\n\t\t}\n\t\tfunction handleMessage(event) {\n\t\t\tif (event.source != window || event.data != 'nexttick') {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tevent.stopPropagation();\n\t\t\tif (queue.length > 0) {\n\t\t\t\tqueue.shift()();\n\t\t\t}\n\t\t}\n\n\t\twindow.addEventListener('message', handleMessage, true);\n\t\treturn nextTick;\n\t})();\n\n\twindow.requestAnimationFrame = window.requestAnimationFrame ||\n\t\twindow.mozRequestAnimationFrame || window.webkitRequestAnimationFrame;\n}\n\n/* Unused\n// Object.setPrototypeOf\n// http://people.mozilla.org/~jorendorff/es6-draft.html#sec-object.setprototypeof\nObject.setPrototypeOf = Object.setPrototypeOf || function(obj, proto) {\n\tobj.__proto__ = proto;\n\treturn obj;\n};\n\n// Object.mixin\nObject.mixin = Object.mixin || function(obj, properties) {\n\tfor (var key in properties) {\n\t\tobj[key] = properties[key];\n\t}\n\treturn obj;\n};\n*/\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/shims.js\n **/","'use strict';\n/**\n * @module core/sprite\n */\n\nvar Vec2 = require('../math/vec2');\nvar Component = require('./component');\nvar Pool = require('./pool');\n\n/**\n * Loads and paints a single image file. Either loaded from source or drawn via callback, created from given width/height.\n * @class\n * @param {String|Function} srcOrRepaint URL or callback to draw image on demand\n * @param {Number[]} size (optional) Override size for drawing canvas\n * @param {Number} baseScale (optional) Base scale applied to all draws, defaults to 1\n */\nfunction SpriteAsset(srcOrRepaint, size, baseScale) {\n\tthis.baseScale = (baseScale != null) ? baseScale : 1;\n\tthis.size = Vec2(size);\n\tthis.bufferSize = Vec2(size);\n\tthis.defaultAnchor = Vec2.topLeft;\n\tthis.defaultOffset = Vec2();\n\tthis.defaultScale = Vec2(1, 1);\n\tthis.buffer = document.createElement('canvas');\n\tthis.bufferCtx = this.buffer.getContext('2d');\n\tthis.scale = 1;\n\tthis.ready = false;\n\tthis.repaintSrc = null;\n\tthis.customRepaint = null;\n\tthis.src = '';\n\tthis.loading = false;\n\n\t// console.log(typeof srcOrRepaint);\n\n\tswitch (typeof srcOrRepaint) {\n\t\tcase 'string':\n\t\t\tthis.src = srcOrRepaint;\n\t\t\tvar img = new Image();\n\t\t\tthis.img = img;\n\t\t\timg.addEventListener('load', this);\n\t\t\tthis.loading = true;\n\t\t\timg.src = srcOrRepaint;\n\t\t\tif (this.loading && img.width && img.height) {\n\t\t\t\tthis.handleEvent();\n\t\t\t}\n\t\t\tbreak;\n\t\tcase 'function':\n\t\t\tthis.customRepaint = srcOrRepaint;\n\t\t\tthis.refresh();\n\t\t\tbreak;\n\t\tcase 'object':\n\t\t\tthis.repaintSrc = srcOrRepaint;\n\t\t\tthis.refresh();\n\t\t\tbreak;\n\t}\n}\n\nSpriteAsset.prototype = {\n\n\ttoString: function() {\n\t\tvar url = (this.buffer) ? this.buffer.toDataURL() : 'Pending';\n\t\treturn 'SpriteAsset ' + (Vec2.toString(this.size)) + ' ' +\n\t\t\t(Vec2.toString(this.bufferSize)) + '\\n' +\n\t\t\t(this.src || this.repaint) + '\\n' +\n\t\t\turl;\n\t},\n\n\trepaintOnComponent: function() {\n\t\tthis.repaintSrc.onRepaint(this.bufferCtx, this);\n\t},\n\n\thandleEvent: function() {\n\t\t// console.log('Loaded ' + this);\n\t\tif (!this.loading) {\n\t\t\treturn;\n\t\t}\n\t\tthis.loading = false;\n\t\tVec2.set(this.size, this.img.width, this.img.height);\n\t\tthis.refresh();\n\t},\n\n\t/**\n\t * Draw whole or sprite of image to canvas. Draws only if image is loaded.\n\t * @param {Object} ctx 2d-canvas context\n\t * @param {Number[]} toPos (optional) Position to draw to.\n\t * @param {Number[]} anchor (optional) anchor draw position, between\n\t *   lower-left [-1, -1] and upper-right [1, 1]\n\t * @param {Number[]} size (optional) Target size\n\t * @param {Number[]} fromPos (optional) Source position (for sprites)\n\t * @param {Number[]} scale (optional) Target scaling, applied to size\n\t */\n\tdraw: function(ctx, toPos, anchor, size, fromPos, scale) {\n\t\tif (!this.ready) {\n\t\t\treturn;\n\t\t}\n\t\tif (toPos == null) {\n\t\t\ttoPos = Vec2.zero;\n\t\t}\n\t\tif (anchor == null) {\n\t\t\tanchor = this.defaultAnchor;\n\t\t}\n\t\tif (size == null) {\n\t\t\tsize = this.bufferSize;\n\t\t}\n\t\tif (fromPos == null) {\n\t\t\tfromPos = this.defaultOffset;\n\t\t}\n\t\tif (scale == null) {\n\t\t\tscale = this.defaultScale;\n\t\t}\n\t\tctx.drawImage(this.buffer,\n\t\t\tfromPos[0] | 0, fromPos[1] | 0,\n\t\t\tsize[0], size[1],\n\t\t\ttoPos[0] - size[0] * anchor[0] + 0.5 | 0,\n\t\t\ttoPos[1] - size[1] * anchor[1] + 0.5 | 0,\n\t\t\tsize[0] * scale[0], size[1] * scale[1]\n\t\t);\n\t},\n\n\trepaint: function() {\n\t\tvar size = this.size;\n\t\tthis.buffer.width = size[0];\n\t\tthis.buffer.height = size[1];\n\t\tthis.bufferCtx.drawImage(this.img, 0, 0, size[0], size[1]);\n\t\tthis.sample();\n\t},\n\n\tsample: function() {\n\t\tvar scale = this.scale;\n\t\tvar size = this.size;\n\t\tvar bufferCtx = this.bufferCtx;\n\t\tvar data = bufferCtx.getImageData(0, 0, size[0], size[1]).data;\n\t\tthis.buffer.width = this.bufferSize[0];\n\t\tthis.buffer.height = this.bufferSize[1];\n\t\tfor (var x = 0, w = size[0], h = size[1]; x <= w; x += 1) {\n\t\t\tfor (var y = 0; y <= h; y += 1) {\n\t\t\t\tvar i = (y * size[0] + x) * 4;\n\t\t\t\tbufferCtx.fillStyle = 'rgba(' + data[i] + ', ' + data[i + 1] + ', ' +\n\t\t\t\t\tdata[i + 2] + ', ' + (data[i + 3] / 255) + ')';\n\t\t\t\tbufferCtx.fillRect(x * scale, y * scale, scale, scale);\n\t\t\t}\n\t\t}\n\t},\n\n\trefresh: function(scale) {\n\t\t// console.log('Refresh');\n\t\tscale = (scale || 1) * this.baseScale;\n\t\tif (this.ready && this.scale == scale) {\n\t\t\treturn;\n\t\t}\n\t\tthis.scale = scale;\n\t\tthis.buffer.width = this.bufferSize[0] = this.size[0] * scale | 0;\n\t\tthis.buffer.height = this.bufferSize[1] = this.size[1] * scale | 0;\n\t\t// Vec2.scale(this.bufferSize, -0.5, this.defaultOffset);\n\t\tif (this.repaintSrc) {\n\t\t\tthis.repaintOnComponent();\n\t\t} else if (this.customRepaint) {\n\t\t\tthis.customRepaint(this.bufferCtx, this);\n\t\t} else {\n\t\t\tthis.repaint();\n\t\t}\n\t\tthis.ready = true;\n\t}\n\n};\n\n/**\n * Sprite-sheet for animations.\n * @class\n * @param {Object} attributes sprites, frames, speed, size, anchor, sequences\n */\nfunction SpriteSheet(attributes) {\n\tvar sprites = attributes.sprites || [];\n\tthis.sprites = Array.isArray(sprites) ? sprites : [sprites];\n\tthis.frames = [];\n\tif (Array.isArray(attributes.frames)) {\n\t\tvar frames = attributes.frames;\n\t\tfor (var i = 0, l = frames.length; i < l; i++) {\n\t\t\tthis.frames.push(frames[i]);\n\t\t}\n\t}\n\tthis.defaults = {\n\t\tspeed: (attributes.speed != null) ? attributes.speed : 0,\n\t\tsize: attributes.size || Vec2(1, 1),\n\t\tanchor: attributes.anchor || Vec2.center\n\t};\n\tthis.sequences = {};\n\tvar sequences = attributes.sequences || {};\n\tfor (var id in sequences) {\n\t\tthis.addSequence(id, sequences[id]);\n\t}\n}\n\nSpriteSheet.prototype = {\n\t/**\n\t * Add sequence to spritesheet.\n\t * Sequences are defined as short-form by Array:\n\t *   [frameIndexes, next || null, speed || defaultSpeed || sprite || 0]\n\t * or Object:\n\t *   {frames: [], next: 'id', speed: seconds, sprite: 0}\n\t * @param {String} id       Sequence name (walk, jump, etc)\n\t * @param {Array|Object} sequence Array or object\n\t */\n\taddSequence: function(id, sequence) {\n\t\tif (Array.isArray(sequence)) {\n\t\t\t// Convert short form Array to Object\n\t\t\tvar frames = [];\n\t\t\tfor (var frame = sequence[0], l = sequence[1]; frame <= l; frame++) {\n\t\t\t\tframes.push(frame);\n\t\t\t}\n\t\t\tsequence = {\n\t\t\t\tframes: frames,\n\t\t\t\tnext: sequence[2] || null,\n\t\t\t\tspeed: sequence[3] || this.defaults.speed,\n\t\t\t\tname: id,\n\t\t\t\tsprite: sequence[4] || 0\n\t\t\t};\n\t\t}\n\t\tif (sequence.next === true) {\n\t\t\tsequence.next = id;\n\t\t}\n\t\tif (!sequence.speed) {\n\t\t\tsequence.speed = this.defaults.speed;\n\t\t}\n\n\t\tthis.sequences[id] = sequence;\n\t\tif (!this.defaultSequence) {\n\t\t\tthis.defaultSequence = id;\n\t\t}\n\t},\n\n\tprepare: function() {\n\t\tvar sprites = this.sprites;\n\t\tfor (var i = 0, l = sprites.length; i < l; i++) {\n\t\t\tif (!sprites[i].ready) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\tif (!this.frames.length) {\n\t\t\tvar defaults = this.defaults;\n\t\t\tvar size = defaults.size;\n\t\t\tvar anchor = defaults.anchor || Vec2.center;\n\t\t\tfor (i = 0, l = sprites.length; i < l; i++) {\n\t\t\t\tvar sprite = sprites[i];\n\t\t\t\tvar cols = sprite.size[0] / size[0] | 0;\n\t\t\t\tvar rows = sprite.size[1] / size[1] | 0;\n\t\t\t\t// debugger;\n\t\t\t\tfor (var y = 0; y < rows; y++) {\n\t\t\t\t\tfor (var x = 0; x < cols; x++) {\n\t\t\t\t\t\tthis.frames.push({\n\t\t\t\t\t\t\tsprite: sprite,\n\t\t\t\t\t\t\tposition: Vec2(x * size[0], y * size[1]),\n\t\t\t\t\t\t\tsize: size,\n\t\t\t\t\t\t\tanchor: anchor\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.ready = true;\n\t\treturn true;\n\t},\n\n\tdraw: function(ctx, idx) {\n\t\tif (!this.ready && !this.prepare()) {\n\t\t\treturn;\n\t\t}\n\t\tvar frame = this.frames[idx || 0];\n\t\tframe.sprite.draw(ctx, null, frame.anchor, frame.size, frame.position);\n\t}\n};\n\n/**\n * Sprite Tween lets components draw animation sequences from Sheets.\n * @class\n * @extends Component\n */\nfunction SpriteTween() {\n\tComponent.call(this);\n\tthis.asset = null;\n\tthis.sequence = null;\n\tthis.speed = 0.0;\n\tthis.offset = 0.0;\n\tthis.isSheet = false;\n\tthis.paused = false;\n\tthis.dtime = 0.0;\n\tthis.frame = 0;\n}\n\nSpriteTween.prototype = {\n\tattributes: {\n\t\tasset: null,\n\t\tspeed: 0,\n\t\tsequence: null,\n\t\toffset: 0\n\t},\n\n\tcreate: function() {\n\t\t// this.asset = attributes.asset;\n\t\t// this.sequence = attributes.sequence;\n\t\t// this.speed = attributes.speed;\n\t\tthis.isSheet = this.asset instanceof SpriteSheet;\n\t\tif (this.isSheet) {\n\t\t\tthis.frame = 0;\n\t\t\tif (!this.speed) {\n\t\t\t\tthis.speed = this.asset.defaults.speed;\n\t\t\t}\n\t\t\tthis.dtime = this.offset;\n\t\t\tif (!this.sequence) {\n\t\t\t\tthis.sequence = this.asset.defaultSequence;\n\t\t\t}\n\t\t}\n\t\tthis.paused = !this.speed;\n\t},\n\n\tpreRender: function(dt) {\n\t\tif (!this.isSheet || this.paused) {\n\t\t\treturn;\n\t\t}\n\t\tvar frames = null;\n\t\tvar speed = 0.0;\n\t\tvar frameCount = 0;\n\t\tvar dtime = (this.dtime += dt);\n\t\tif (this.sequence) {\n\t\t\tvar sequence = this.asset.sequences[this.sequence];\n\t\t\tspeed = sequence.speed;\n\t\t\tframes = sequence.frames;\n\t\t\tframeCount = frames.length;\n\t\t\tif (dtime >= frameCount * speed) {\n\t\t\t\tthis.entity.emit('onSequenceEnd');\n\t\t\t\tif (sequence.next) {\n\t\t\t\t\tif (sequence.next !== this.sequence) {\n\t\t\t\t\t\tthis.goto(sequence.next);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.pause();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tdtime = dtime % (frameCount * speed);\n\t\t\t}\n\t\t\tthis.frame = frames[dtime / speed | 0];\n\t\t} else {\n\t\t\tframes = this.asset.frames;\n\t\t\tframeCount = frames.length;\n\t\t\tspeed = this.speed;\n\t\t\tdtime = dtime % (frameCount * speed);\n\t\t\tvar frame = dtime / speed | 0;\n\t\t\tif (frame < this.frame) {\n\t\t\t\tthis.entity.emit('onSequenceEnd');\n\t\t\t}\n\t\t\tthis.frame = dtime / speed | 0;\n\t\t}\n\t},\n\n\tpause: function() {\n\t\tthis.paused = true;\n\t\treturn this;\n\t},\n\n\tplay: function() {\n\t\tthis.paused = false;\n\t\treturn this;\n\t},\n\n\tgoto: function(id) {\n\t\tif (isNaN(id)) {\n\t\t\tif (this.sequence != id) {\n\t\t\t\tthis.dtime = 0;\n\t\t\t\tthis.sequence = id;\n\t\t\t\tif (this.paused) {\n\t\t\t\t\tthis.paused = false;\n\t\t\t\t\tthis.preRender(0);\n\t\t\t\t\tthis.paused = true;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.sequence = null;\n\t\t\tthis.frame = id;\n\t\t}\n\t\treturn this;\n\t}\n};\n\nComponent.create(SpriteTween, 'spriteTween');\n\n/**\n * @class\n * @extends Component\n */\nfunction SpriteCanvasRenderer() {\n\tComponent.call(this);\n}\n\nvar compositeLevels = {};\ncompositeLevels[0] = 'source-over';\nvar alphaLevels = {};\nalphaLevels[0] = 1.0;\n\nSpriteCanvasRenderer.prototype = {\n\trender: function(ctx) {\n\t\tvar scene = this.entity.scene;\n\t\tvar child = scene.firstChild;\n\t\tif (child == null) {\n\t\t\treturn;\n\t\t}\n\t\tvar composite = 'source-over';\n\t\tvar alpha = 1.0;\n\t\tvar level = 0;\n\t\tctx.save();\n\t\twhile (child) {\n\t\t\tvar tween = child.components.spriteTween;\n\t\t\tif (tween != null && tween.enabled) {\n\t\t\t\tvar transform = child.components.transform;\n\t\t\t\ttransform.applyMatrixWorld(ctx);\n\t\t\t\tif (transform.composite != composite) {\n\t\t\t\t\tcomposite = transform.composite;\n\t\t\t\t\tctx.globalCompositeOperation = composite;\n\t\t\t\t}\n\t\t\t\tif (transform.alpha != alpha) {\n\t\t\t\t\talpha = transform.alpha;\n\t\t\t\t\tctx.globalAlpha = alpha;\n\t\t\t\t}\n\t\t\t\ttween.asset.draw(ctx, tween.frame);\n\t\t\t}\n\t\t\tif (child.firstChild != null) {\n\t\t\t\tlevel++;\n\t\t\t\tchild = child.firstChild;\n\t\t\t} else {\n\t\t\t\twhile (child.next == null) {\n\t\t\t\t\tlevel--;\n\t\t\t\t\tchild = child.parent;\n\t\t\t\t\tif (child == scene) {\n\t\t\t\t\t\tctx.restore();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tchild = child.next;\n\t\t\t}\n\t\t}\n\t\tctx.restore();\n\t}\n};\n\nComponent.create(SpriteCanvasRenderer, 'spriteCanvasRenderer');\n\nmodule.exports.Asset = SpriteAsset;\nmodule.exports.Tween = SpriteTween;\nmodule.exports.Sheet = SpriteSheet;\nmodule.exports.CanvasRenderer = SpriteCanvasRenderer;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/sprite.js\n **/","'use strict';\n\nvar Component = require('./component');\nvar Pool = require('./pool');\nvar Vec2 = require('../math/vec2');\nvar Mat2 = require('../math/mat2');\n\n/**\n * Transform keeps track of transformation (position, rotation and scale) and\n * composite, alpha.\n * @extends Component\n * @class\n */\nfunction Transform() {\n\tComponent.call(this);\n\tthis.rotation = 0.0;\n\tthis.alpha = 1.0;\n\tthis.composite = '';\n\tthis._position = Vec2();\n\tthis._scale = Vec2();\n\tthis._matrix = Mat2();\n\tthis._matrixWorld = Mat2();\n\tthis.dirty = false;\n\tthis.dirtyWorld = false;\n\tthis.matrixAutoUpdate = false;\n\tthis.parentTransform = null;\n}\n\nTransform.prototype = {\n\tattributes: {\n\t\tposition: Vec2(),\n\t\tscale: Vec2(1, 1),\n\t\trotation: 0.0,\n\t\talpha: 1.0,\n\t\tcomposite: 'source-over'\n\t},\n\n\tcreate: function() {\n\t\tthis.dirty = true;\n\t\tthis.dirtyWorld = true;\n\t\tthis.matrixAutoUpdate = true;\n\t\tvar parent = this.entity.parent;\n\t\tthis.parentTransform = parent ? parent.components.transform : null;\n\t},\n\n\tget matrix() {\n\t\tvar matrix = this._matrix;\n\t\tif (this.dirty || this.matrixAutoUpdate) {\n\t\t\tMat2.translate(Mat2.identity, this._position, matrix);\n\t\t\tMat2.rotate(matrix, this.rotation);\n\t\t\tMat2.scale(matrix, this._scale);\n\t\t\tthis.markDirty();\n\t\t\tthis.dirty = false;\n\t\t}\n\t\treturn matrix;\n\t},\n\n\tget matrixWorld() {\n\t\tvar matrix = this.matrix;\n\t\tvar parent = this.parentTransform;\n\t\tif (parent == null) {\n\t\t\treturn matrix;\n\t\t}\n\t\tvar matrixWorld = this._matrixWorld;\n\t\tif (this.dirtyWorld) {\n\t\t\tMat2.multiply(parent.matrixWorld, matrix, matrixWorld);\n\t\t\tthis.dirtyWorld = false;\n\t\t}\n\t\treturn matrixWorld;\n\t},\n\n\tget alphaWorld() {\n\t\tvar alpha = this.alpha;\n\t\tvar parent = this.parentTransform;\n\t\tif (parent == null) {\n\t\t\treturn alpha;\n\t\t}\n\t\treturn parent.alphaWorld * alpha;\n\t},\n\n\tget positionOnly() {\n\t\tvar parent = this.parentTransform;\n\t\treturn (parent == null || parent.positionOnly) && this.rotation === 0 &&\n\t\t\tthis._scale[0] == 1 && this._scale[1] == 1;\n\t},\n\n\tset positionOnly(to) {\n\t\tif (to) {\n\t\t\tthis.rotation = 0;\n\t\t\tthis.scale = Vec2.one;\n\t\t\tthis.parentTransform.positionOnly = true;\n\t\t}\n\t},\n\n\tdealloc: function() {\n\t\tthis.parentTransform = null;\n\t},\n\n\tmarkDirty: function(force) {\n\t\tif (this.dirty && !force) {\n\t\t\treturn;\n\t\t}\n\t\tthis.dirty = true;\n\t\tthis.dirtyWorld = true;\n\t\tvar start = this.entity;\n\t\tvar child = start.firstChild;\n\t\twhile (child != null) {\n\t\t\tchild.components.transform.dirtyWorld = true;\n\t\t\tif (child.firstChild != null) {\n\t\t\t\tchild = child.firstChild;\n\t\t\t} else if (child.next == null) {\n\t\t\t\tdo {\n\t\t\t\t\tchild = child.parent;\n\t\t\t\t\tif (child == start) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t} while (child.next == null);\n\t\t\t}\n\t\t\tchild = child.next;\n\t\t}\n\t},\n\n\tcompose: function(position, rotation, scale) {\n\t\tif (position != null) {\n\t\t\tthis.position = position;\n\t\t}\n\t\tif (rotation != null) {\n\t\t\tthis.rotation = rotation;\n\t\t}\n\t\tif (scale != null) {\n\t\t\tthis.scale = scale;\n\t\t}\n\t\tthis.markDirty();\n\t},\n\n\ttranslateBy: function(by) {\n\t\tVec2.add(this._position, by);\n\t\tthis.markDirty();\n\t},\n\n\ttranslateTo: function(to) {\n\t\tthis.position = to;\n\t\tthis.markDirty();\n\t},\n\n\ttranslateXBy: function(by) {\n\t\tthis._position[0] += by;\n\t\tthis.markDirty();\n\t},\n\n\ttranslateXTo: function(to) {\n\t\tthis._position[0] = to;\n\t\tthis.markDirty();\n\t},\n\n\ttranslateYBy: function(by) {\n\t\tthis._position[1] += by;\n\t\tthis.markDirty();\n\t},\n\n\ttranslateYTo: function(to) {\n\t\tthis._position[1] = to;\n\t\tthis.markDirty();\n\t},\n\n\tscaleBy: function(by) {\n\t\tVec2.add(this._scale, by);\n\t\tthis.markDirty();\n\t},\n\n\tscaleTo: function(to) {\n\t\tthis.scale = to;\n\t\tthis.markDirty();\n\t},\n\n\tscaleXBy: function(by) {\n\t\tthis._scale[0] += by;\n\t\tthis.markDirty();\n\t},\n\n\tscaleXTo: function(to) {\n\t\tthis._scale[0] = to;\n\t\tthis.markDirty();\n\t},\n\n\tscaleYBy: function(by) {\n\t\tthis._scale[1] += by;\n\t\tthis.markDirty();\n\t},\n\n\tscaleYTo: function(to) {\n\t\tthis._scale[1] = to;\n\t\tthis.markDirty();\n\t},\n\n\trotateBy: function(by) {\n\t\tthis.rotation += by;\n\t\tthis.markDirty();\n\t},\n\n\trotateTo: function(to) {\n\t\tthis.rotation = to;\n\t\tthis.markDirty();\n\t},\n\n\tapplyMatrixWorld: function(ctx) {\n\t\tvar mtx = this.matrixWorld;\n\t\tctx.setTransform(\n\t\t\tmtx[0], mtx[1], mtx[2], mtx[3],\n\t\t\tmtx[4] + 0.5 | 0, mtx[5] + 0.5 | 0\n\t\t);\n\t},\n\n\tapplyMatrix: function(ctx) {\n\t\tif (this.positionOnly) {\n\t\t\tctx.translate(this.position[0], this.position[1]);\n\t\t} else {\n\t\t\tvar mtx = this.matrix;\n\t\t\tctx.transform(\n\t\t\t\tmtx[0], mtx[1], mtx[2], mtx[3],\n\t\t\t\tmtx[4] + 0.5 | 0, mtx[5] + 0.5 | 0\n\t\t\t);\n\t\t}\n\t}\n};\n\nVec2.defineProperty(Transform, 'position');\nVec2.defineProperty(Transform, 'scale');\n\nComponent.create(Transform, 'transform');\n\nmodule.exports = Transform;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/core/transform.js\n **/","'use strict';\n/**\n * Heightmap\n *\n * http://www.float4x4.net/index.php/2010/06/\n *   generating-realistic-and-playable-terrain-height-maps/\n */\n\nvar Perlin = require('./perlin');\n\nvar Heightmap = function(size, scale) {\n\tthis.size = size || 256;\n\tthis.scale = scale || 1;\n\n\tthis.perlin = new Perlin();\n\tthis.heights = new Float32Array(size * size);\n};\n\nHeightmap.prototype = {\n\n\tadd: function(scale, ratio) {\n\t\tvar size = this.size;\n\t\tvar perlin = this.perlin;\n\t\tvar heights = this.heights;\n\t\tvar baseScale = this.scale;\n\n\t\tvar x = size;\n\t\twhile (x--) {\n\t\t\tvar y = size;\n\t\t\twhile (y--) {\n\t\t\t\tvar factor = (baseScale + scale) / size;\n\t\t\t\tvar value = perlin.get(x * factor, y * factor, 0) * ratio;\n\t\t\t\theights[x * size + y] += value;\n\t\t\t}\n\t\t}\n\t},\n\n\terode: function(smoothness) {\n\t\tsmoothness = smoothness || 1;\n\t\tvar size = this.size;\n\t\tvar heights = this.heights;\n\n\t\tvar x = size;\n\t\twhile (x--) {\n\t\t\tvar y = size;\n\t\t\twhile (y--) {\n\t\t\t\tvar key = x * size + y;\n\t\t\t\tvar dmax = 0;\n\t\t\t\tvar matchX = 0;\n\t\t\t\tvar matchY = 0;\n\t\t\t\tfor (var u = -1; u <= 1; u++) {\n\t\t\t\t\tvar xu = x + u;\n\t\t\t\t\tif (xu < 0 || xu >= size) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tfor (var v = -1; v <= 1; v++) {\n\t\t\t\t\t\tvar yv = y + v;\n\t\t\t\t\t\tif (yv < 0 || yv >= size) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (Math.abs(u) + Math.abs(v) > 0) {\n\t\t\t\t\t\t\tvar d = heights[key] - heights[(x + u) * size + (y + v)];\n\t\t\t\t\t\t\tif (d > dmax) {\n\t\t\t\t\t\t\t\tdmax = d;\n\t\t\t\t\t\t\t\tmatchX = u;\n\t\t\t\t\t\t\t\tmatchY = v;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (dmax > 0 && dmax <= (smoothness / size)) {\n\t\t\t\t\tvar h = 0.5 * dmax;\n\t\t\t\t\theights[key] -= h;\n\t\t\t\t\theights[(x + matchX) * size + (y + matchY)] += h;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// 33 box filter\n\tsmoothen: function(factor) {\n\t\tfactor = factor || 1;\n\t\tvar size = this.size;\n\t\tvar heights = this.heights;\n\n\t\tvar x = size;\n\t\twhile (x--) {\n\t\t\tvar y = size;\n\t\t\twhile (y--) {\n\t\t\t\tvar total = 0;\n\t\t\t\tvar count = 0;\n\t\t\t\tfor (var u = -1; u <= 1; u++) {\n\t\t\t\t\tvar xu = x + u;\n\t\t\t\t\tif (xu < 0 || xu >= size) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tfor (var v = -1; v <= 1; v++) {\n\t\t\t\t\t\tvar yv = y + v;\n\t\t\t\t\t\tif (yv < 0 || yv >= size) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar height = heights[xu * size + yv];\n\t\t\t\t\t\tif (u === 0 && v === 0) {\n\t\t\t\t\t\t\theight *= factor;\n\t\t\t\t\t\t\tcount += factor;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcount++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttotal += height || 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\theights[x * size + y] = total / count;\n\t\t\t}\n\t\t}\n\t},\n\n\tget: function(x, y) {\n\t\treturn this.heights[x * this.size + y];\n\t}\n\n};\n\nmodule.exports = Heightmap;\n\n\n/** WEBPACK FOOTER **\n ** ./lib/labs/heightmap.js\n **/","'use strict';\n\n/**\n * @class\n *\n * Improved Perlin Noise\n *\n * http://cs.nyu.edu/~perlin/noise/\n * https://github.com/louisstow/pixelminer/blob/master/lib/perlin.js\n */\n\nfunction Perlin() {\n\tvar permutation = [];\n\tfor (var i = 0; i <= 255; i++) {\n\t\tpermutation[i] = (Math.random() * 255) | 0;\n\t}\n\tthis.permutation = new Uint8Array(permutation.concat(permutation));\n\tconsole.log(this.permutation.length);\n}\n\nPerlin.prototype.get = function(x, y, z) {\n\tvar p = this.permutation;\n\n\tvar floorX = ~~x;\n\tvar floorY = ~~y;\n\tvar floorZ = ~~z;\n\n\tvar X = floorX & 255; // FIND UNIT CUBE THAT\n\tvar Y = floorY & 255; // CONTAINS POINT.\n\tvar Z = floorZ & 255;\n\tx -= floorX; // FIND RELATIVE X,Y,Z\n\ty -= floorY; // OF POINT IN CUBE.\n\tz -= floorZ;\n\n\tvar u = fade(x); // COMPUTE FADE CURVES\n\tvar v = fade(y); // FOR EACH OF X,Y,Z.\n\tvar w = fade(z);\n\n\tvar A = p[X] + Y;\n\tvar AA = p[A] + Z;\n\tvar AB = p[A + 1] + Z; // HASH COORDINATES OF\n\tvar B = p[X + 1] + Y;\n\tvar BA = p[B] + Z;\n\tvar BB = p[B + 1] + Z; // THE 8 CUBE CORNERS,\n\n\treturn lerp(w, lerp(v, lerp(u, grad(p[AA], x, y, z), // AND ADD\n\t\t\t\tgrad(p[BA], x - 1, y, z)), // BLENDED\n\t\t\tlerp(u, grad(p[AB], x, y - 1, z), // RESULTS\n\t\t\t\tgrad(p[BB], x - 1, y - 1, z))), // FROM 8\n\t\tlerp(v, lerp(u, grad(p[AA + 1], x, y, z - 1), // CORNERS\n\t\t\t\tgrad(p[BA + 1], x - 1, y, z - 1)), // OF CUBE\n\t\t\tlerp(u, grad(p[AB + 1], x, y - 1, z - 1),\n\t\t\t\tgrad(p[BB + 1], x - 1, y - 1, z - 1)))) + 0.5;\n};\n\nfunction fade(t) {\n\treturn t * t * t * (t * (t * 6 - 15) + 10);\n}\n\nfunction lerp(t, a, b) {\n\treturn a + t * (b - a);\n}\n\nfunction grad(hash, x, y, z) {\n\tvar h = hash & 15; // CONVERT LO 4 BITS OF HASH CODE\n\tvar u = h < 8 ? x : y; // INTO 12 GRADIENT DIRECTIONS.\n\tvar v = h < 4 ? y : h == 12 || h == 14 ? x : z;\n\treturn ((h & 1) === 0 ? u : -u) + ((h & 2) === 0 ? v : -v);\n}\n\nmodule.exports = Perlin;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/labs/perlin.js\n **/","'use strict';\n/**\n * @module math/mat2\n */\n\n/*\n * 2x3 Matrix\n * @class\n * @classdesc Float32Array representation of 2x3 transformation matrix.\n * [a, c, tx,\n *  b, d, ty,\n *  0, 0, 1]\n * https://github.com/toji/gl-matrix/blob/master/src/gl-matrix/mat2d.js\n * https://github.com/simonsarris/Canvas-tutorials/blob/master/transform.js\n * @param {Number[]|Number} fromOrA\n * @param {Number} b\n * @param {Number} c\n * @param {Number} d\n * @param {Number} tx\n * @param {Number} ty\n * @returns {Mat2} mat2 New 2D Matrix\n */\nfunction Mat2(fromOrA, b, c, d, tx, ty) {\n\tif (b != null) {\n\t\treturn new Float32Array([fromOrA, b, c, d, tx, ty]);\n\t}\n\treturn new Float32Array(fromOrA || Mat2.identity);\n}\n\nMat2.identity = Mat2(1, 0, 0, 1, 0, 0);\n\n/**\n * Set Matrix from a, b, c, d, tx, ty\n * @param {Mat2} result [description]\n * @param {Number} a\n * @param {Number} b\n * @param {Number} c\n * @param {Number} d\n * @param {Number} tx\n * @param {Number} ty\n */\nMat2.set = function(result, a, b, c, d, tx, ty) {\n\tresult[0] = a || 0;\n\tresult[1] = b || 0;\n\tresult[2] = (c != null) ? c : 1;\n\tresult[3] = d || 0;\n\tresult[4] = tx || 0;\n\tresult[5] = (ty != null) ? ty : 1;\n\treturn result;\n};\n\nMat2.reset = function(result) {\n\tresult.set(Mat2.identity);\n};\n\nMat2.toString = function(a) {\n\treturn '[' + a[0] + ', ' + a[1] + ' | ' + a[2] + ', ' + a[3] +\n\t' | ' + a[4] + ', ' + a[5] + ']';\n};\n\nMat2.copy = function(result, b) {\n\tresult.set(b || Mat2.identity);\n\treturn result;\n};\n\nMat2.valid = function(a) {\n\treturn !(isNaN(a[0]) || isNaN(a[1]) || isNaN(a[2]) ||\n\t\tisNaN(a[3]) || isNaN(a[4]) || isNaN(a[5]));\n};\n\nMat2.isIdentity = function(a) {\n\treturn a[0] == 1 && a[1] === 0 && a[2] === 0 &&\n\t\ta[3] == 1 && a[4] === 0 && a[5] === 0;\n};\n\nMat2.multiply = function(a, b, result) {\n\tresult = result || a;\n\tvar aa = a[0];\n\tvar ab = a[1];\n\tvar ac = a[2];\n\tvar ad = a[3];\n\tvar atx = a[4];\n\tvar aty = a[5];\n\tvar ba = b[0];\n\tvar bb = b[1];\n\tvar bc = b[2];\n\tvar bd = b[3];\n\tvar btx = b[4];\n\tvar bty = b[5];\n\tresult[0] = aa * ba + ab * bc;\n\tresult[1] = aa * bb + ab * bd;\n\tresult[2] = ac * ba + ad * bc;\n\tresult[3] = ac * bb + ad * bd;\n\tresult[4] = ba * atx + bc * aty + btx;\n\tresult[5] = bb * atx + bd * aty + bty;\n\treturn result;\n};\n\nMat2.rotate = function(a, rad, result) {\n\tresult = result || a;\n\tif (!rad) {\n\t\treturn result;\n\t}\n\tvar aa = a[0];\n\tvar ab = a[1];\n\tvar ac = a[2];\n\tvar ad = a[3];\n\tvar atx = a[4];\n\tvar aty = a[5];\n\tvar st = Math.sin(rad);\n\tvar ct = Math.cos(rad);\n\tresult[0] = aa * ct + ab * st;\n\tresult[1] = -aa * st + ab * ct;\n\tresult[2] = ac * ct + ad * st;\n\tresult[3] = -ac * st + ct * ad;\n\tresult[4] = ct * atx + st * aty;\n\tresult[5] = ct * aty - st * atx;\n\treturn result;\n};\n\nMat2.scale = function(a, v, result) {\n\tresult = result || a;\n\tvar vx = v[0];\n\tvar vy = v[1];\n\tif (vx == 1 && vy == 1) {\n\t\treturn result;\n\t}\n\tresult[0] = a[0] * vx;\n\tresult[1] = a[1] * vy;\n\tresult[2] = a[2] * vx;\n\tresult[3] = a[3] * vy;\n\tresult[4] = a[4] * vx;\n\tresult[5] = a[5] * vy;\n\treturn result;\n};\n\nMat2.translate = function(a, v, result) {\n\tif (!result) {\n\t\tresult = a;\n\t} else {\n\t\tresult[0] = a[0];\n\t\tresult[1] = a[1];\n\t\tresult[2] = a[2];\n\t\tresult[3] = a[3];\n\t}\n\tresult[4] = a[4] + v[0];\n\tresult[5] = a[5] + v[1];\n\treturn result;\n};\n\nMat2.apply = function(a, v, result) {\n\tresult = result || v;\n\tvar x = v[0];\n  var y = v[1];\n  result[0] = x * a[0] + y * a[2] + a[4];\n  result[1] = x * a[1] + y * a[3] + a[5];\n  return result;\n};\n\nmodule.exports = Mat2;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/math/mat2.js\n **/","/** @flow */\n/**\n * @exports math/mathf\n */\nvar Mathf = {};\n\n/*\n * http://docs.unity3d.com/Documentation/ScriptReference/Mathf.html\n * https://github.com/secretrobotron/gladius.math/\n * https://github.com/toji/gl-matrix/tree/master/src/gl-matrix\n *\n * TODO: https://github.com/photonstorm/phaser/blob/master/Phaser/GameMath.ts\n */\nvar EPSILON = 0.01;\nMathf.EPSILON = EPSILON;\n\nvar PI = Math.PI;\nvar TAU = PI * 2;\nvar HALF_PI = PI / 2;\nvar RAD2DEG = 180 / PI;\nvar DEG2RAD = PI / 180;\nMathf.TAU = TAU;\nMathf.HALF_PI = HALF_PI;\nMathf.RAD2DEG = RAD2DEG;\nMathf.DEG2RAD = DEG2RAD;\n\nvar uid:number = 1;\n\n/**\n * Generate UID\n * @function uid\n * @return {Number} Unique ID\n */\nMathf.uid = function():number {\n\treturn uid++;\n};\n\nMathf.clamp = function(a:number, low:number, high:number):number {\n\tif (a < low) {\n\t\treturn low;\n\t}\n\tif (a > high) {\n\t\treturn high;\n\t}\n\treturn a;\n};\n\nMathf.map = function(a:number, fromLow:number, fromHigh:number, toLow:number, toHigh:number):number {\n\treturn toLow + (((a - fromLow) / (fromHigh - fromLow)) * (toHigh - toLow));\n};\n\n/**\n * Correct modulo behavior\n * @param {Number} a Dividend\n * @param {Number} b Divisor\n * @return {Number} a % b where the result is between 0 and b (either\n *   0 <= x < b or b < x <= 0, depending on the sign of b).\n */\nMathf.mod = function(a:number, b:number):number {\n\ta %= b;\n\treturn (a * b < 0) ? a + b : a;\n};\n\n/**\n * Loops the value t, so that it is never larger than length and never\n * smaller than 0.\n * @param {Number} t\n * @param {Number} length\n * @return {Number}\n */\nMathf.repeat = function(t:number, length:number):number {\n\treturn t - Math.floor(t / length) * length;\n};\n\nMathf.toDeg = function(rad:number):number {\n\treturn rad * RAD2DEG;\n};\n\nMathf.toRad = function(deg:number):number {\n\treturn deg * DEG2RAD;\n};\n\nMathf.normDeg = function(deg:number):number {\n\tdeg %= 360;\n\treturn (deg * 360 < 0) ? deg + 360 : deg;\n};\n\nMathf.normRad = function(rad:number):number {\n\trad %= TAU;\n\treturn (rad * TAU < 0) ? rad + TAU : rad;\n};\n\nMathf.distRad = function(a:number, b:number):number {\n\tvar d = Mathf.normRad(b) - Mathf.normRad(a);\n\tif (d > PI) {\n\t\treturn d - TAU;\n\t}\n\tif (d <= -PI) {\n\t\treturn d + TAU;\n\t}\n\treturn d;\n};\n\nMathf.distDeg = function(a:number, b:number):number {\n\tvar d = Mathf.normDeg(b) - Mathf.normDeg(a);\n\tif (d > 180) {\n\t\treturn d - 360;\n\t}\n\tif (d <= -180) {\n\t\treturn d + 360;\n\t}\n\treturn d;\n};\n\n/**\n * Performs linear interpolation between values a and b.\n * @param {Number} a\n * @param {Number} b\n * @param {Number} scalar The proportion between a and b.\n * @return {Number} The interpolated value between a and b.\n */\nMathf.lerp = function(a:number, b:number, scalar:number):number {\n\treturn a + scalar * (b - a);\n};\n\nvar dampResult = {\n\tvalue: 0,\n\tvelocity: 0\n};\n\n/**\n * Gradually changes a value towards a desired goal over time.\n *\n * http://docs.unity3d.com/Documentation/ScriptReference/Mathf.SmoothDamp.html\n * http://answers.unity3d.com/questions/24756/formula-behind-smoothdamp.html\n */\nMathf.smoothDamp = function(a:number, b:number, velocity:number, time:number, maxVelocity:number, delta:number):{value: number; velocity: number} {\n\ttime = Math.max(EPSILON, time);\n\tdelta = delta || 0.02;\n\tvar num = 2 / time;\n\tvar num2 = num * delta;\n\tvar num3 = 1 / (1 + num2 + 0.48 * num2 * num2 + 0.235 * num2 * num2 * num2);\n\tvar num4 = a - b;\n\tvar num5 = b;\n\tvar num6 = (maxVelocity || Number.POSITIVE_INFINITY) * time;\n\tnum4 = Mathf.clamp(num4, -num6, num6);\n\tb = a - num4;\n\tvar num7 = (velocity + num * num4) * delta;\n\tvelocity = (velocity - num * num7) * num3;\n\tvar value = b + (num4 + num7) * num3;\n\tif (num5 - a > 0 == value > num5) {\n\t\tvalue = num5;\n\t\tvelocity = (value - num5) / delta;\n\t}\n\tdampResult.value = value;\n\tdampResult.velocity = velocity;\n\treturn dampResult;\n};\n\nMathf.distAng = function(a:number, b:number):number {\n\tif (a == b) {\n\t\treturn 0;\n\t}\n\tvar ab = (a < b);\n\tvar l = ab ? (-a - TAU + b) : (b - a);\n\tvar r = ab ? (b - a) : (TAU - a + b);\n\treturn (Math.abs(l) > Math.abs(r)) ? r : l;\n};\n\nmodule.exports = Mathf;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/math/mathf.js\n **/","/* @flow */\n/**\n * @exports math/random\n */\nvar Random = {};\n\n// API ideas: http://docs.python.org/2/library/random.html\n// http://weblog.bocoup.com/random-numbers/\n// https://gist.github.com/Protonk/5367430\n\n// Linear Congruential Generator\n// Variant of a Lehman Generator\n\n// Set to values from http://en.wikipedia.org/wiki/Numerical_Recipes\n// m is basically chosen to be large (as it is the max period)\n// and for its relationships to a and c\nvar m = 4294967296;\n// a - 1 should be divisible by m's prime factors\nvar a = 1664525;\n// c and m should be co-prime\nvar c = 1013904223;\nvar z = 0;\n\n/**\n * Seed based Math.random()\n * Inspired by http://processing.org/reference/random_.html\n * @param  {Number} low\n * @param  {Number} high\n * @return {Number} Number between 0 and 1\n */\nRandom.rand = function(low:number, high:number):number {\n\t// define the recurrence relationship\n\tz = (a * z + c) % m;\n\t// return a float in [0, 1)\n\t// if z = m then z / m = 0 therefore (z % m) / m < 1 always\n\treturn z / m * (high - low) + low;\n};\n\n/**\n * Set seed\n * @param  {Number} seed\n */\nRandom.srand = function(seed:number):void {\n\tz = seed | 0;\n};\n\nRandom.values = function(values:Array<number>):number {\n\treturn values[Random.rand(0, values.length) | 0];\n};\n\nRandom.chance = function(chance:number):boolean {\n\treturn Random.rand(0, 1) <= chance;\n};\n\n/**\n// http://www.protonfish.com/random.shtml\nfunction rnd_snd() {\n\treturn (Math.random()*2-1)+(Math.random()*2-1)+(Math.random()*2-1);\n}\n\nfunction rnd(mean, stdev) {\n\treturn Math.round(rnd_snd()*stdev+mean);\n}\n */\n\nmodule.exports = Random;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/math/random.js\n **/","/* @flow */\n/**\n * @module math/tweens\n */\nvar Tweens = {\n\tlinear: function(t:number):number {\n\t\treturn t;\n\t}\n};\n\n// http://greweb.me/2012/02/bezier-curve-based-easing-functions-from-concept-to-implementation/\n// https://github.com/petehunt/react-touch/blob/gh-pages/src/math/EasingFunctions.js\n// https://gist.github.com/gre/1650294\n// http://joshondesign.com/2013/03/01/improvedEasingEquations\n\nfunction powIn(exp:number) {\n\treturn function(t:number):number {\n\t\treturn Math.pow(t, exp);\n\t};\n}\n\nfunction toOut(exp:number) {\n\treturn function(t:number):number {\n\t\treturn 1 - Math.pow(1 - t, exp);\n\t};\n}\n\nfunction toInOut(exp:number) {\n\treturn function(t:number):number {\n\t\treturn ((t < 0.5) ? Math.pow(t * 2, exp) : 2 - Math.pow(2 * (1 - t), exp)) / 2;\n\t};\n}\n\nvar transitions = ['quad', 'cubic', 'quart', 'quint'];\nfor (var i = 0, l = transitions.length; i < l; i++) {\n\tvar transition = transitions[i];\n\tTweens[transition + 'In'] = powIn(i + 2);\n\tTweens[transition + 'Out'] = toOut(i + 2);\n\tTweens[transition + 'InOut'] = toInOut(i + 2);\n}\n\nmodule.exports = Tweens;\n\n\n\n/** WEBPACK FOOTER **\n ** ./lib/math/tweens.js\n **/","/**\n * @module math/vec2\n */\n\nvar rand = require('./random').rand;\nvar Mathf = require('./mathf');\nvar EPSILON = Mathf.EPSILON;\nvar TAU = Mathf.TAU;\n\n/**\n * Initialize from Vec2 array or x/y values. Returns a new (typed) array.\n * @class\n * @classdesc Float32Array representation of 2D vectors and points.\n * @param {Vec2|Number} [fromOrX=Vec2.zero] Typed array to copy from or x\n * @param {Number} y y, when x was provided as first argument\n * @returns {Vec2} vec2 New 2D Vector\n */\nfunction Vec2(fromOrX, y) {\n\tif (y != null) {\n\t\treturn new Float32Array([fromOrX, y]);\n\t}\n\treturn new Float32Array(fromOrX || Vec2.zero);\n}\n\nVec2.zero = Vec2(0, 0);\nVec2.one = Vec2(1, 1);\nVec2.center = Vec2(0.5, 0.5);\nVec2.topLeft = Vec2(0, 0);\nVec2.topCenter = Vec2(0.5, 0);\nVec2.topRight = Vec2(1, 0);\nVec2.centerLeft = Vec2(0, 0.5);\nVec2.centerRight = Vec2(1, 0.5);\nVec2.bottomLeft = Vec2(1, 1);\nVec2.bottomCenter = Vec2(0.5, 1);\nVec2.bottomRight = Vec2(0.5, 0.5);\n\n/**\n * Set vector from x and y value\n * @param {Vec2} result Vec2 to mutate\n * @param {Number} [x=0]\n * @param {Number} [y=0]\n * @return {Vec2} result\n */\nVec2.set = function(result, x, y) {\n\tresult[0] = x || 0;\n\tresult[1] = y || 0;\n\treturn result;\n};\n\nVec2.copy = function(result, b) {\n\tresult[0] = b[0];\n\tresult[1] = b[1];\n\treturn result;\n};\n\nVec2.reset = function(result) {\n\tresult[0] = 0;\n\tresult[1] = 0;\n\treturn result;\n};\n\nVec2.valid = function(a) {\n\treturn !(isNaN(a[0]) || isNaN(a[1]));\n};\n\nVec2.toString = function(a) {\n\treturn '[' + a[0] + ', ' + a[1] + ']';\n};\n\nvar objVecCache = Vec2();\n\nVec2.fromObj = function(obj, a) {\n\ta = a || objVecCache;\n\ta[0] = obj.x;\n\ta[1] = obj.y;\n\treturn a;\n};\n\nvar objCache = {\n\tx: 0,\n\ty: 0\n};\nVec2.toObj = function(a, obj) {\n\tobj = obj || objCache;\n\tobj.x = a[0];\n\tobj.y = a[1];\n\treturn obj;\n};\n\nVec2.equals = function(a, b) {\n\treturn a[0] == b[0] && a[1] == b[1];\n};\n\nVec2.approx = function(a, b) {\n\treturn Math.abs(a[0] - b[0]) < EPSILON && Math.abs(a[1] - b[1]) < EPSILON;\n};\n\nVec2.isZero = function(a, b) {\n\treturn a[0] === 0 && a[1] === 0;\n};\n\nVec2.approxZero = function(a, b) {\n\treturn a[0] < EPSILON && a[0] > -EPSILON && a[1] < EPSILON && a[1] > -EPSILON;\n};\n\nVec2.add = function(a, b, result) {\n\tresult = result || a;\n\tresult[0] = a[0] + b[0];\n\tresult[1] = a[1] + b[1];\n\treturn result;\n};\n\nVec2.sub = function(a, b, result) {\n\tresult = result || a;\n\tresult[0] = a[0] - b[0];\n\tresult[1] = a[1] - b[1];\n\treturn result;\n};\n\nVec2.mul = function(a, b, result) {\n\tresult = result || a;\n\tresult[0] = a[0] * b[0];\n\tresult[1] = a[1] * b[1];\n\treturn result;\n};\n\nVec2.scale = function(a, scalar, result) {\n\tresult = result || a;\n\tresult[0] = a[0] * scalar;\n\tresult[1] = a[1] * scalar;\n\treturn result;\n};\n\nVec2.norm = function(a, result, scalar) {\n\tresult = result || a;\n\tvar x = a[0];\n\tvar y = a[1];\n\tvar len = (scalar || 1) / (Math.sqrt(x * x + y * y) || 1);\n\tresult[0] = x * len;\n\tresult[1] = y * len;\n\treturn result;\n};\n\nVec2.lenSq = function(a) {\n\treturn a[0] * a[0] + a[1] * a[1];\n};\n\nVec2.len = function(a) {\n\treturn Math.sqrt(a[0] * a[0] + a[1] * a[1]);\n};\n\nVec2.dot = function(a, b) {\n\treturn a[0] * b[0] + a[1] * b[1];\n};\n\nVec2.cross = function(a, b) {\n\treturn a[0] * b[1] - a[1] * b[0];\n};\n\n/**\n * Linear interpolation\n * http://en.wikipedia.org/wiki/Lerp_%28computing%29\n * @param  {Vec2} a\n * @param  {Vec2} b\n * @param  {Number} scalar Interpolation parameter between 0 and 1\n * @return {Vec2} Result\n */\nVec2.lerp = function(a, b, scalar, result) {\n\tresult = result || a;\n\tresult[0] = a[0] + scalar * (b[0] - a[0]);\n\tresult[1] = a[1] + scalar * (b[1] - a[1]);\n\treturn result;\n};\n\nvar slerpCacheA = Vec2();\nvar slerpCacheB = Vec2();\n\n/**\n * Spherical linear interpolation\n * http://en.wikipedia.org/wiki/Slerp\n * @param  {Vec2} a\n * @param  {Vec2} b\n * @param  {Number} scalar Interpolation parameter between 0 and 1\n * @return {Vec2} Result\n */\nVec2.slerp = function(a, b, scalar, result) {\n\tresult = result || a;\n\tvar omega = Math.acos(Mathf.clamp(Vec2.dot(\n\t\tVec2.norm(a, slerpCacheA),\n\t\tVec2.norm(b, slerpCacheB)\n\t), -1, 1));\n\treturn Vec2.lerp(a, b, Math.min(scalar, omega) / omega, result);\n};\n\nVec2.max = function(a, b, axis) {\n\tif (axis != null) {\n\t\treturn (a[axis] > b[axis]) ? a : b;\n\t}\n\treturn (Vec2.lenSq(a) > Vec2.lenSq(b)) ? a : b;\n};\n\nVec2.perp = function(a, result) {\n\tresult = result || a;\n\tvar x = a[0];\n\tresult[0] = a[1];\n\tresult[1] = -x;\n\treturn result;\n};\n\nVec2.dist = function(a, b) {\n\tvar x = b[0] - a[0];\n\tvar y = b[1] - a[1];\n\treturn Math.sqrt(x * x + y * y);\n};\n\nVec2.distSq = function(a, b) {\n\tvar x = b[0] - a[0];\n\tvar y = b[1] - a[1];\n\treturn x * x + y * y;\n};\n\nVec2.near = function(a, b, dist) {\n\treturn Vec2.distSq(a, b) <= dist * dist;\n};\n\nVec2.limit = function(a, max, result) {\n\tresult = result || a;\n\tvar x = a[0];\n\tvar y = a[1];\n\tvar ratio = max / Math.sqrt(x * x + y * y);\n\tif (ratio < 1) {\n\t\tresult[0] = x * ratio;\n\t\tresult[1] = y * ratio;\n\t} else if (result !== a) {\n\t\tresult[0] = x;\n\t\tresult[1] = y;\n\t}\n\treturn result;\n};\n\nVec2.clamp = Vec2.limit;\n\nvar radCache1 = Vec2();\nvar radCache2 = Vec2();\n\nVec2.rad = function(a, b) {\n\tif (!b) {\n\t\treturn Math.atan2(a[1], a[0]);\n\t}\n\treturn Math.acos(\n\t\tVec2.dot(Vec2.norm(a, radCache1), Vec2.norm(b, radCache2))\n\t);\n};\n\nVec2.rotate = function(a, theta, result) {\n\tresult = result || a;\n\tvar sinA = Math.sin(theta);\n\tvar cosA = Math.cos(theta);\n\tresult[0] = a[0] * cosA - a[1] * sinA;\n\tresult[1] = a[0] * sinA + a[1] * cosA;\n\treturn result;\n};\n\nVec2.rotateAxis = function(a, b, theta, result) {\n\treturn Vec2.add(\n\t\tVec2.rotate(\n\t\t\tVec2.sub(a, b, result || a),\n\t\t\ttheta\n\t\t),\n\t\tb\n\t);\n};\n\nVec2.rotateTo = function(a, rad, result) {\n\tresult = result || a;\n\tvar len = Vec2.len(a);\n\treturn Vec2.rotate(Vec2.set(result, len, 0), rad);\n};\n\nVec2.lookAt = function(a, b, result) {\n\tvar len = Vec2.len(a);\n\treturn Vec2.norm(\n\t\tVec2.rotate(\n\t\t\ta,\n\t\t\tMath.atan2(b[0] - a[0], b[1] - a[1]) - Math.atan2(a[1], a[0]),\n\t\t\tresult || a\n\t\t),\n\t\tnull, len\n\t);\n};\n\nVec2.variant = function(a, delta, result) {\n\tresult = result || a;\n\tresult[0] = a[0] + rand(-delta, delta);\n\tresult[1] = a[1] + rand(-delta, delta);\n\treturn result;\n};\n\nVec2.variantCirc = function(a, delta, result) {\n\tresult = result || a;\n\tvar len = rand(0, delta);\n\tvar theta = rand(0, TAU);\n\tresult[0] = a[0] + len * Math.cos(theta);\n\tresult[1] = a[1] + len * Math.sin(theta);\n\treturn result;\n};\n\nVec2.variantRad = function(a, delta, result) {\n\treturn Vec2.rotate(a, rand(-delta, delta), result);\n};\n\nVec2.variantLen = function(a, delta, result) {\n\treturn Vec2.norm(a, result, Vec2.len(a) + rand(-delta, delta));\n};\n\nVec2.defineProperty = function(cls, name) {\n\tvar prop = '_' + name;\n\tObject.defineProperty(cls.prototype, name, {\n\t\tget: function() {\n\t\t\treturn this[prop];\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis[prop][0] = value[0];\n\t\t\tthis[prop][1] = value[1];\n\t\t}\n\t});\n\tvar copy = 'copy' + name.charAt(0).toUpperCase() + name.slice(1);\n\tcls.prototype[copy] = function(result) {\n\t\tresult[0] = this[prop][0];\n\t\tresult[1] = this[prop][1];\n\t\treturn result;\n\t};\n};\n\nmodule.exports = Vec2;\n\n\n/** WEBPACK FOOTER **\n ** ./lib/math/vec2.js\n **/"],"sourceRoot":"","file":"acme.js"}