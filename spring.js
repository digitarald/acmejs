// Generated by CoffeeScript 1.3.3
var Spring, SpringPool,
  __hasProp = {}.hasOwnProperty,
  __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; };

Spring = (function() {

  function Spring() {
    this.center = Vec2();
  }

  Spring.prototype.acquire = function(host, centerX, centerY) {
    this.acquired = true;
    host.spring = this;
    host.pubsub.sub('release', this);
    this.host = host;
    return Vec2.set(this.center, centerX, centerY);
  };

  Spring.prototype.release = function() {
    this.acquired = false;
    this.host.pubsub.unsub(null, this);
    delete this.host.spring;
    delete this.host;
    return this;
  };

  Spring.prototype.update = function(target) {};

  return Spring;

})();

SpringPool = (function(_super) {

  __extends(SpringPool, _super);

  function SpringPool() {
    return SpringPool.__super__.constructor.apply(this, arguments);
  }

  SpringPool.prototype.update = function(delta) {
    var center, spring, _i, _len, _ref, _ref1;
    _ref = this.entities;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      spring = _ref[_i];
      if (!spring.acquired) {
        continue;
      }
      center = ((_ref1 = spring.target) != null ? _ref1.pos : void 0) || spring.center;
      spring.update(delta);
    }
    return this;
  };

  return SpringPool;

})(Pool);

Spring.pool = new SpringPool(function() {
  return new Spring();
}, 128);
